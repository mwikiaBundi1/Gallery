(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[18],{"/WHw":function(e,t,n){n.d(t,"a",(function(){return v}));var a=n("q1tI"),i=n.n(a),o=n("/MKj"),r=n("JW66"),s=n("Ye/N"),c=n("joD6"),l=n("oN2T"),d=n("5FNA"),u=n("VwDf"),m=n("Wer7"),h=n("U4JR"),p=n("vvax"),g=n("fArA"),b=n("c50B");function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){var t,n;return n=t=class extends a.Component{constructor(...e){super(...e),f(this,"state",{boardDates:[],createBoardError:null,inputName:this.props.prefilledName||"",nameValidators:[Object(b.n)({message:s.a._("Don't forget to name your board!")}),Object(b.j)({max:r.a.MAX_CHARS_FOR_BOARD_TITLE,maxErrorString:Object(p.b)(s.a._("Please enter no more than {{ maxLength }} characters.","Validation error when a user input is too long","Validation error when a user input is too long"),{maxLength:r.a.MAX_CHARS_FOR_BOARD_TITLE}).join("")})],nameValidatorErrors:[],privacy:this.props.isAdAccountOwner?r.a.BoardPrivacy.PUBLIC:r.a.BoardPrivacy.PROTECTED,saving:!1}),f(this,"handleChangeName",(e,t)=>{const n=Object(b.q)(this.state.nameValidators,e);this.setState({inputName:e,nameValidatorErrors:n,createBoardError:null},()=>{t&&this.handleCreate()})}),f(this,"handleChangePrivacy",()=>{const e=this.state.privacy===r.a.BoardPrivacy.SECRET?r.a.BoardPrivacy.PUBLIC:r.a.BoardPrivacy.SECRET;this.setState({privacy:e})}),f(this,"handleChangeDate",e=>{this.setState({boardDates:e})}),f(this,"handleCreate",()=>{const{boardDates:e,inputName:t,privacy:n}=this.state,{createBoard:a,invalidateResource:i,onCreate:o,isAdAccountOwner:r,advertiser_id:c}=this.props;let l,d;e&&e.length>0&&(e.length>1?(l=Object(u.b)(e[0]),d=Object(u.b)(e[1])):d=Object(u.b)(e[0]));const m={event_start_date:l,event_date:d,privacy:n,name:t,...!r&&c?{advertiser_id:c}:{}};this.setState({saving:!0,createBoardError:null}),a(m).then(e=>{this.setState({saving:!1}),o(e),m.event_date&&Object(h.a)(8623,{view:415,objectId:e.id})}).catch(e=>{let t=s.a._("Uh oh! Something went wrong.");if(e.message){const{message:n,message_detail:a}=e;t=a?`${n} ${a}`:n}else"string"==typeof e&&(t=e);this.setState({saving:!1,createBoardError:t})}),i(n)})}UNSAFE_componentWillReceiveProps(e){e.prefilledName&&this.setState({inputName:e.prefilledName})}render(){const{createBoard:t,invalidateResource:n,...a}=this.props;return i.a.createElement(e,Object.assign({onBoardCreate:this.handleCreate,onChangeBoardDate:this.handleChangeDate,onChangeBoardName:this.handleChangeName,onChangeBoardPrivacy:this.handleChangePrivacy},a,this.state))}},f(t,"displayName",`WithBoardCreatePane(${e.displayName||e.name})`),n}function S(e){const{advertiser:t,viewer:n}=e,a=!t||n.isAuth&&t.owner_user_id===n.id,i=t&&t.id;return{isAdAccountOwner:a,...i?{advertiser_id:i}:{}}}function y(e,t){return{invalidateResource:n=>{e(Object(m.f)("BoardsResource",Object(d.a)(t.viewer.username,n===r.a.BoardPrivacy.SECRET)))},createBoard:t=>e(Object(l.f)(t))}}function v(e){return Object(g.compose)(c.a,Object(o.connect)(S,y),E)(e)}},"3z7j":function(e,t,n){n.d(t,"a",(function(){return i}));var a=n("Wer7");function i(e,t){return n=>n(Object(a.a)("BoardSectionResource",{field_set_key:t||"board_page",section_id:e}))}},"6A0I":function(e,t,n){var a=n("q1tI"),i=n("/MKj"),o=n("JW66"),r=n("Sihc"),s=n("Ye/N"),c=n("GBVV"),l=n("n6mq");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(i.connect)()(class extends a.Component{constructor(e){super(e),d(this,"onCreateSection",()=>{const{board:e,dispatch:t,completeCreateSectionAction:n,pinImport:a}=this.props;return this.setState({isSaving:!0}),t(Object(r.a)({boardId:e.id,name:this.state.inputName.trim(),pinImport:a})).then(e=>{this.setState({isSaving:!1,newSection:e}),n(e)}).catch(e=>{this.setState({createError:e.message_detail||e.message,isSaving:!1})})}),d(this,"handleKeyDown",({event:e,value:t})=>{const{createError:n,inputName:a}=this.state;[o.a.KeyCode.ENTER,o.a.KeyCode.NUMPAD_ENTER].includes(e.which)&&!n&&a.trim()&&this.onCreateSection()}),d(this,"handleChangeName",({value:e})=>{this.setState({createError:null,inputName:e})}),d(this,"handleInputRef",e=>{this.setState({inputRef:e})}),this.state={createError:null,inputName:e.initialName||"",inputRef:null,newSection:null,isSaving:!1}}componentDidUpdate(e,t){const{createError:n,inputRef:a}=this.state;!a||t.inputRef&&!n||a.focus()}render(){const{onClearModal:e,showTitle:t,positionRelative:n}=this.props,{createError:i,inputName:o,isSaving:r}=this.state,d=!!o.trim()&&!i;return a.createElement(l.c,{xs:{display:"flexColumn"},color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:n?"relative":"absolute",rounding:2,width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}}},t&&a.createElement(l.c,{marginTop:3,paddingX:6,paddingY:3},a.createElement(l.m,{size:"sm"},s.a._("Add section","Title in the add section modal","Title in the add section modal"))),a.createElement(l.c,{padding:3},a.createElement(l.c,{marginBottom:2},a.createElement(l.q,{htmlFor:"sectionEditName"},a.createElement(l.K,{size:"md",color:i?"red":"gray"},s.a._("Name","Board section name","Board section name")))),a.createElement(l.c,null,a.createElement(l.c,{ref:this.handleInputRef},a.createElement(l.M,{errorMessage:i||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:s.a._('Like "Lighting"',"Placeholder for board section name","Placeholder for board section name"),size:"lg",type:"text",value:o})))),a.createElement(l.j,null),a.createElement(l.c,{display:"flex",flex:"grow"}),a.createElement(l.j,null),a.createElement(l.c,{padding:6},a.createElement(l.c,{display:"flex",justifyContent:"between"},a.createElement(l.d,{onClick:e,text:s.a._("Cancel","cancel section add","cancel section add"),inline:!0}),a.createElement(c.b,{disabled:!d||r,onClick:this.onCreateSection,submitting:r,text:s.a._("Add","add a new section","add a new section")}))))}})},"6G9P":function(e,t,n){n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var a=n("q1tI"),i=n.n(a),o=(n("JW66"),n("Ye/N")),r=n("xdpg"),s=n("n6mq");const c=(e,t)=>{if(!t)return e;const n=new RegExp(/http(s?):/);if(!n.test(e)){const a=n.exec(t);if(a&&a.length){e=a[0]+e}}return e},l=(e,t)=>t?Object(r.c)(o.a._("Saved to {{sectionName}} in {{boardName}}","Toast for successfully saving to a section within a board","Toast for successfully saving to a section within a board"),{sectionName:t.title,boardName:e}):i.a.createElement(i.a.Fragment,null,i.a.createElement(s.K,{color:"white"},o.a._("Saved to")),i.a.createElement(s.K,{color:"white",weight:"bold"},e))},B6Tf:function(e,t,n){var a=n("q1tI"),i=n.n(a),o=n("b/K5"),r=n("/MKj"),s=n("JW66"),c=n("QoKk"),l=n("Ye/N"),d=n("GBVV"),u=n("/WHw"),m=n("n+wb"),h=n("n6mq");var p=Object(u.a)((function({createBoardError:e,inputName:t,nameValidatorErrors:n,onBoardCreate:a,onCancel:o,onChangeBoardDate:r,onChangeBoardName:u,onChangeBoardPrivacy:p,onInvite:g,onToggleFlyout:b,privacy:f,preselectedCollaborators:E,saving:S,showTitle:y,isAdAccountOwner:v}){const _=0===n.length,w=f===s.a.BoardPrivacy.SECRET;return i.a.createElement(h.c,{color:"white",height:"100%",left:!0,position:"absolute",top:!0,width:"100%"},i.a.createElement("form",{onSubmit:e=>{e.preventDefault(),a()},style:{height:"100%"}},i.a.createElement(h.c,{direction:"column",display:"flex",height:"100%"},y&&i.a.createElement(h.c,{display:"flex",marginTop:3,paddingX:6,paddingY:3},i.a.createElement(h.m,{size:"sm"},l.a._("Create board"))),i.a.createElement(h.c,{padding:3},i.a.createElement(h.c,{marginBottom:2},i.a.createElement(h.q,{htmlFor:"boardEditName"},i.a.createElement(h.K,{size:"sm"},l.a._("Name")))),i.a.createElement(h.c,null,i.a.createElement(h.M,{errorMessage:n.join(", "),id:"boardEditName",name:"boardName",onChange:({value:e})=>u(e),placeholder:l.a._('Like "Places to Go" or "Recipes to Make"'),size:"lg",value:t}))),i.a.createElement(h.c,{padding:3},i.a.createElement(h.c,{marginBottom:2},i.a.createElement(h.q,{htmlFor:"boardEditDate"},i.a.createElement(h.K,{size:"sm"},l.a._("Add dates (optionalâ€”this can help you plan!)","pin-to-board.CreateBoardPane.CreateBoardPane","Label for date picker field on board create")))),i.a.createElement(h.c,null,i.a.createElement(c.a,{onChange:r,onToggleFlyout:b}))),v&&i.a.createElement(i.a.Fragment,null,i.a.createElement(h.c,{padding:3},i.a.createElement(h.c,{marginBottom:2},i.a.createElement(h.q,{htmlFor:"secret"},i.a.createElement(h.K,{size:"sm"},l.a._("Secret","secret board","secret board")))),i.a.createElement(h.c,null,i.a.createElement(h.I,{id:"secret",onChange:p,switched:w}))),i.a.createElement(h.c,{display:"flex",flex:"grow",overflow:"hidden"},i.a.createElement(h.c,{width:"100%"},i.a.createElement(m.a,{onSelectedCollaboratorsChange:g,preselectedCollaborators:E})))),!v&&i.a.createElement(i.a.Fragment,null,i.a.createElement(h.c,{padding:3},i.a.createElement(h.c,{marginBottom:2},i.a.createElement(h.q,{htmlFor:"protected"},i.a.createElement(h.K,{size:"sm"},l.a._("Protected board (not listed on user's profile)","protected board","protected board")))),i.a.createElement(h.c,null,i.a.createElement(h.I,{disabled:!0,id:"protected",onChange:()=>void 0,switched:!0})))),i.a.createElement(h.c,{bottom:!0,color:"white",dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",marginLeft:"-288px"}},display:"flex",justifyContent:"between",paddingX:4,paddingY:2,position:"fixed",width:720},i.a.createElement(h.d,{inline:!0,onClick:o,text:l.a._("Cancel","cancel board create","cancel board create")}),i.a.createElement(h.c,{display:"flex",justifyContent:"end"},!!e&&i.a.createElement(h.c,{paddingX:2},i.a.createElement(h.K,{align:"center",color:"red",size:"md",weight:"bold"},e)),i.a.createElement(d.b,{disabled:!t.trim()||!_||!!e||S,submitting:S,text:l.a._("Create","create a new board","create a new board")}))))))})),g=n("6A0I"),b=n("zLLH"),f=n("0BOE"),E=n("qyR9");var S=Object(b.c)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id})})(class extends a.Component{constructor(...e){var t,n,a;super(...e),a=e=>{const{board:t,sectionsResource:{data:n}}=this.props;return e.length>=E.a?[{items:Object(f.a)([t],e),customProps:{inSectionSelection:!0}},{items:Object(f.a)(n,e,"title")}]:[{items:[t],customProps:{inSectionSelection:!0}},{items:n}]},(n="getSections")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a}render(){const{sectionsResource:{error:e,isLoaded:t},boardSavedTo:n,isSelectMode:a,onSectionCreate:o,onSectionSelected:r,pinId:s}=this.props;return i.a.createElement(E.b,{isSelectMode:a,boardSavedTo:n,createButtonLabel:l.a._("Add section","Button for creating a board section","Button for creating a board section"),hasLoadError:!!e,isLoaded:t,getSections:this.getSections,onCreate:o,onSelected:r,pinId:s})}}),y=n("Wer7"),v=n("U4JR"),_=n("fArA");const w=2,C=3,I=void 0,x=e=>{const t=[],n=[];return e.forEach(e=>{e.name.match(/^\d/)?n.push(e):t.push(e)}),[...t,...n]};function T(e,t,n){return{...e?{pin_id:e}:{},...t?{username:t}:{},...n?{advertiser_id:n,filter:"protected"}:{},field_set_key:"board_picker",limit:I,shortlist_suggestions:w}}var O=Object(_.compose)(Object(r.connect)((function(e){const{advertiser:t,viewer:n}=e;return n.isAuth&&t&&t.owner_user_id!==n.id?{advertiser_id:t.id,username:t.owner_user_id}:{}})),Object(b.c)({name:"BoardPickerBoardsResource",key:"boardResource",options:e=>T(e.pinId,e.username,e.advertiser_id)}))(class extends a.Component{constructor(...e){var t,n,a;super(...e),a=e=>{const{boardResource:{data:t}}=this.props;if(!t)return[];const{all_boards:n,boards_shortlist:a}=t,i=x(n);return i.length<=C?[{items:i}]:e.length>=E.a?[{items:Object(f.a)(i,e)}]:[a.length?{items:a,title:l.a._("Top choices")}:{items:[]},{items:i,title:l.a._("All boards","title for board picker all boards section","title for board picker all boards section")}]},(n="getSections")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a}render(){const{boardResource:{data:e,error:t,isLoaded:n},boardSavedTo:a,isSelectMode:o,onBoardCreate:r,onBoardSelected:s,pinId:c}=this.props,l=n&&!!e&&e.all_boards.length<=C;return i.a.createElement(E.b,{isSelectMode:o,boardSavedTo:a,hasLoadError:!!t,hasLowBoardCount:l,isLoaded:n,getSections:this.getSections,onCreate:r,onSelected:s,pinId:c})}});function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=Object(r.connect)(null,(function(e,t){return{invalidateResource:()=>{e(Object(y.f)("BoardPickerBoardsResource",T(t.pinId)))},invalidatePinBetterSaveResource:()=>{e(Object(y.f)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))}}}))(class extends i.a.Component{constructor(...e){super(...e),B(this,"state",{inviteQueue:{},newName:"",selectedSectionBoard:this.props.boardWithSection||null,showCreate:this.props.showCreate||!1}),B(this,"close",()=>{const{selectedSectionBoard:e,showCreate:t}=this.state,{onClose:n}=this.props;t?this.setState({showCreate:!1},this.manageModalTitle):e?this.setState({selectedSectionBoard:null},this.manageModalTitle):n()}),B(this,"sendInvites",e=>{const{inviteQueue:t}=this.state;Object.keys(t).forEach(n=>{t[n].resource(e.id,[n])})}),B(this,"handleInvite",e=>{const{inviteQueue:t}=this.state;if(t[e.id]){const n={...t};delete n[e.id],this.setState({inviteQueue:n})}else{const n=Object.assign({},t,{[e.id]:e});this.setState({inviteQueue:n})}}),B(this,"handleBoardCreate",e=>{const{onBoardCreated:t}=this.props;this.handleBoardSave(e,!0),t&&t(e)}),B(this,"handleBoardSave",(e,t)=>{const{selectedSectionBoard:n}=this.state,{onBoardSave:a,invalidatePinBetterSaveResource:i,invalidateResource:o}=this.props;if(o(),i(),n&&"board_section"===e.type){return a(n,e,t)}const r=e,{section_count:s=0}=r;!n&&s>0?this.setState({selectedSectionBoard:r},this.manageModalTitle):(this.sendInvites(e),a(r,void 0,t))}),B(this,"handleCreate",e=>t=>{t=t||"",this.setState({newName:t,showCreate:!0},this.manageModalTitle);const n=e?13105:13025,a=e?10306:249;Object(v.a)(101,{component:n,element:a})}),B(this,"manageModalTitle",()=>{const{setModalTitle:e}=this.props,{selectedSectionBoard:t,showCreate:n}=this.state;e&&e(n&&t?l.a._("Add section","Repin title for making a board section","Repin title for making a board section"):n&&!t?l.a._("Create board","Repin title for making a new board","Repin title for making a new board"):t&&!n?l.a._("Choose section","Repin title for choosing a board section","Repin title for choosing a board section"):l.a._("Choose board","Repin title for choosing a board","Repin title for choosing a board"))})}render(){const{boardSavedTo:e,isRepin:t,isSelectMode:n,onToggleFlyout:a,pinId:o,preselectedCollaborators:r,setModalTitle:s,suggestedBoardTitle:c}=this.props,{newName:l,selectedSectionBoard:d,showCreate:u}=this.state,m=!!d,b=!s;return i.a.createElement(h.c,{display:"flex",position:"relative",width:"100%"},!u&&i.a.createElement(h.c,{direction:"column",display:"flex",marginTop:4,width:"100%"},d?i.a.createElement(S,{board:d,boardSavedTo:e,isSelectMode:n,onSectionCreate:this.handleCreate(m),onSectionSelected:this.handleBoardSave}):i.a.createElement(O,{boardSavedTo:e,isSelectMode:n,onBoardCreate:this.handleCreate(m),onBoardSelected:this.handleBoardSave,pinId:o})),u&&!d&&i.a.createElement(p,{onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,onToggleFlyout:a,pinId:o,prefilledName:l||c,preselectedCollaborators:r,showTitle:b}),u&&d&&i.a.createElement(g.a,{board:d,completeCreateSectionAction:this.handleBoardSave,initialName:l,isRepin:t,onClearModal:this.close,showTitle:b}))}}),P=n("TiQD"),R=n("v+PR"),k=n("Ev07"),N=n("G35+"),A=n("mBfy");var D=Object(_.compose)(Object(r.connect)(({viewer:e})=>({viewer:e}),()=>({})),Object(b.c)({name:"UserResource",key:"userSocialResource",options:e=>({user_id:e.viewer&&e.viewer.isAuth?e.viewer.id:"",field_set_key:"social_connect"})}))((function({onSocialConnect:e,userSocialResource:{data:t,isLoaded:n}}){const[o,r]=Object(a.useState)(!!(n&&t&&t.facebook_publish_stream_enabled)),[s,c]=Object(a.useState)(!!(n&&t&&t.twitter_publish_enabled));if(Object(a.useEffect)(()=>{n&&t&&(r(!!t.facebook_publish_stream_enabled),c(!!t.twitter_publish_enabled))},[t,n]),!t)return null;const{connected_to_facebook:d,twitter_url:u}=t,m=t=>{r(t),A.default.set("facebook_publish_stream_enabled",t),e(N.a.FACEBOOK,t)};return!(!d&&!u)&&i.a.createElement(h.c,{display:"flex",padding:2},d&&i.a.createElement(h.c,{display:"flex",alignItems:"center",marginStart:2},i.a.createElement(h.f,{checked:o,id:"share_facebook",onChange:()=>{o?m(!1):k.a.maybeRequestFbTimelinePermission({success:()=>m(!0),error:()=>m(!1)})},size:"sm"}),i.a.createElement(h.q,{htmlFor:"share_facebook"},i.a.createElement(h.c,{marginStart:2},i.a.createElement(h.K,null,l.a._("Post to Facebook"))))),u&&i.a.createElement(h.c,{display:"flex",alignItems:"center",marginStart:5},i.a.createElement(h.f,{checked:s,id:"share_twitter",onChange:()=>{const t=!s;c(t),e(N.a.TWITTER,t)},size:"sm"}),i.a.createElement(h.q,{htmlFor:"share_twitter"},i.a.createElement(h.c,{marginStart:2},i.a.createElement(h.K,null,l.a._("Post to Twitter"))))))})),M=n("Sihc");function F(){return i.a.createElement(h.c,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center"},i.a.createElement(h.G,{accessibilityLabel:l.a._("Pins being saved to new sections","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","accessibility label on spinner"),show:!0}),i.a.createElement(h.c,{paddingY:2},i.a.createElement(h.m,null,l.a._("Hold, please...","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","Heading on modal while saving pins"))),i.a.createElement(h.K,null,l.a._("We're grouping these into sections. This will help organize all your ideas!","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","Text explaining new pins are being saved")))}var L=n("82UD");function W({index:e,pin:t,sectionName:n}){const o=t.id,r=Object(a.useContext)(ne),[s,c]=Object(a.useState)(!1),l=Object(a.useCallback)(({event:e})=>{e.preventDefault(),e.stopPropagation(),r({type:s?"unselect":"select",payload:{sectionName:n,pinId:o}}),c(!s)},[o,s]);return i.a.createElement(h.P,{onTouch:l,rounding:4},i.a.createElement(L.a,{attributionOption:"hide",blockClickEvents:!0,pin:t,pinId:t.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},selectionState:s?"selected-image-only":"deselected-image-only",surface:"SectionSuggestedPins",trackingParameters:{slotIndex:e}}))}var H=n("w70y");const z="84",K=152,q=16,U=10;var V=Object(a.memo)((function({sectionSuggestion:e,showSpinner:t}){const n=Object(a.useRef)(),o=Object(H.a)({name:"BatchP2PResource",options:{clientType:z,page_size:U,pinIds:e.pins.map(e=>e.id)},allowStale:!1});return i.a.createElement(a.Fragment,null,i.a.createElement(h.c,{display:"flex",justifyContent:"center",width:"100%"},i.a.createElement(h.G,{accessibilityLabel:l.a._("Loading pins","save.pin-to-board.PinToBoard.SectionSuggestions.SectionPinsSelection","Accessibility label on a loading spinner"),show:t&&o.isFetching})),o.data&&i.a.createElement(h.c,{paddingY:4,paddingX:8},i.a.createElement(h.m,{align:"left",size:"sm"},e.name)),i.a.createElement("div",{ref:n},o.data&&n&&n.current&&i.a.createElement(h.v,{columnWidth:K,comp:({data:t,itemIdx:n})=>i.a.createElement(W,{index:n,pin:t,sectionName:e.name}),gutterWidth:q,items:o.data||[],loadItems:()=>{},scrollContainer:()=>n.current})))}),(e,t)=>e.sectionSuggestion.id===t.sectionSuggestion.id);function Y({canSubmit:e,handleClose:t,handleSubmit:n,sectionSuggestions:o}){return i.a.createElement(a.Fragment,null,i.a.createElement(h.c,{width:"100%"},i.a.createElement(h.c,{minHeight:"100%",marginBottom:12,width:"100%"},o.map((e,t)=>i.a.createElement(h.c,{marginBottom:4,key:e.name},i.a.createElement(V,{sectionSuggestion:e,showSpinner:0===t})))),i.a.createElement(h.c,{bottom:!0,color:"white",dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",position:"sticky"}},display:"flex",justifyContent:"end",padding:4,width:720},i.a.createElement(h.d,{color:e?"red":"gray",inline:!0,size:"lg",text:e?l.a._("Next","save.pin-to-board.PinToBoard.SectionPinsWrapper","Button to submit form selections"):l.a._("Skip","save.pin-to-board.PinToBoard.SectionPinsWrapper","Button to submit form selections"),onClick:()=>{e?n():t()}}))))}const G="calc(100% - 88px)";function $({handleClose:e,handleSubmit:t,suggestions:n}){const[o,r]=Object(a.useState)({}),s=!!Object.keys(o).length;return i.a.createElement(h.c,null,i.a.createElement(h.c,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{height:G}}},i.a.createElement(h.c,{display:"flex",wrap:!0,height:360,paddingX:6},n.map(e=>i.a.createElement(h.c,{paddingX:1,height:160,key:e.name},i.a.createElement(h.P,{rounding:6,onTouch:()=>{const t={...o};t[e.name]?delete t[e.name]:t[e.name]=e,r(t)}},i.a.createElement(h.c,{rounding:7,dangerouslySetInlineStyle:{__style:{border:o[e.name]?"2px solid #111":"2px solid white",padding:"2px"}}},i.a.createElement(h.c,{height:160,width:152,position:"relative",rounding:6},i.a.createElement(h.u,{rounding:6,height:160,width:152},i.a.createElement(h.p,{alt:e.name,fit:"cover",naturalHeight:e.images["236x"].height,naturalWidth:e.images["236x"].width,src:e.images["236x"].url})),i.a.createElement(h.c,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:"rgba(0, 0, 0, 0.3)"}},display:"flex",height:160,justifyContent:"center",left:!0,paddingX:5,position:"absolute",rounding:6,top:!0,width:152},i.a.createElement(h.m,{align:"center",color:"white",size:"sm"},e.name))))))))),i.a.createElement(h.c,{display:"flex",width:"100%",justifyContent:"end",padding:5},i.a.createElement(h.d,{color:s?"red":"gray",inline:!0,size:"lg",text:s?l.a._("Next","save.pin-to-board.SectionSuggestionPicker","Button to submit form selections"):l.a._("Skip","save.pin-to-board.SectionSuggestionPicker","Button to submit form selections"),onClick:()=>{s?t(Object.values(o)):e()}})))}var X=n("CvCA"),Q=n("6G9P"),J=n("0SCs"),Z=n("y19s"),ee=n("nGHF");const te=1500,ne=Object(a.createContext)();function ae(e,t){const{sectionName:n,pinId:a}=t.payload,i=[...e[n]||[]];switch(t.type){case"select":return{...e,[n]:[...i,a]};case"unselect":const t=i.indexOf(a);if(i.splice(t,1),!i.length){const t={...e};return delete t[n],t}return{...e,[n]:i};default:throw new Error("Unsupported action received by PinSelectionReducer")}}function ie({board:e,handleClose:t,setModalTitle:n,suggestions:o}){const[s,c]=Object(a.useState)("sections"),[d,u]=Object(a.useState)([]),[m,h]=Object(a.useReducer)(ae,{}),{showOneToast:p}=Object(ee.b)(),g=Object(r.useDispatch)(),{history:b}=Object(Z.b)(),{group:f}=Object(J.c)("web_board_section_templates"),E=Object(a.useRef)(!1);Object(a.useEffect)(()=>()=>{E.current&&clearTimeout(E.current)});const S=()=>{Object(v.a)(101,{component:20,view:52})},y=()=>{t(),p(({onHide:t})=>i.a.createElement(X.a,{duration:ce,onHide:t,text:Object(Q.a)(e.name),href:e.url,imageUrl:e.image_cover_url,onClick:S}))};return{sections:i.a.createElement($,{handleClose:y,handleSubmit:e=>{u(e),c("pins"),n&&n(l.a._("Great! Pick some ideas to start off your board.","save.pin-to-board.PinToBoard.SectionSuggestions.SectionSuggestionContainer","Modal title for choosing ideas for a new board"))},suggestions:o}),pins:i.a.createElement(ne.Provider,{value:h},i.a.createElement(Y,{canSubmit:!!Object.keys(m).length,handleClose:y,handleSubmit:()=>{let t=0;c("saving"),n&&n(null);const a=d.reduce((e,t)=>(e[t.name]=null,e),{});Object.entries({...a,...m}).forEach(([n,a])=>{g(Object(M.a)({boardId:e.id,initialPinIds:a,name:n})).then(()=>{(t+=1)===d.length&&(E.current=setTimeout(()=>{"enabled_go_to_board"===f?b.push(e.url):y()},te))})})},sectionSuggestions:d})),saving:i.a.createElement(F,null)}[s]}var oe=n("Yo6N"),re=n("pLLR");function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return ce})),n.d(t,"c",(function(){return de})),n.d(t,"b",(function(){return me}));const ce=4e3,le="703px",de={LOADING:"loading",SUCCESS:"success"};class ue extends a.PureComponent{constructor(...e){super(...e),se(this,"state",{isFlyoutOpen:!1,isSavingPin:!1,newBoard:null}),se(this,"pinImageRef",Object(a.createRef)()),se(this,"unmounted",!1),se(this,"handleSavePinToBoard",(e,t,n)=>{const{handleSaveToBoard:a,sectionSuggestions:i,setModalTitle:o}=this.props;a(e,t,n),n&&(this.setState({isSavingPin:!0,newBoard:e}),i&&i.length>0&&o&&o(l.a._("Here are some popular topics related to your board. Choose any you like.","save.pin-to-board.PinToBoard.SectionPickerModalTitle","Modal title for selection recommended sections for a new board")))}),se(this,"handleToggleFlyout",()=>this.setState({isFlyoutOpen:!this.state.isFlyoutOpen})),se(this,"safeSetState",(e,t)=>{this.unmounted?t&&t():this.setState(e,t)}),se(this,"close",()=>{const{isFlyoutOpen:e}=this.state,{handleAbort:t}=this.props;e||t()}),se(this,"dismissModal",e=>{const{dismissModal:t}=this.props;t&&t()})}componentWillUnmount(){this.unmounted=!0}render(){const{boardSavedTo:e,boardWithSection:t,color:n,displaySuccessAnimation:r,handleNewBoardAnimationCompletion:s,handleSocialConnectSet:c,isInModal:d,newPin:u,pin:m,preselectedCollaborators:p,onBoardCreated:g,sectionSuggestions:b,sensitiveContentNotice:f,setModalTitle:E,showCreate:S,shouldRenderContent:y,suggestedBoardTitle:v,updateDescription:_}=this.props;if(!m||!m&&!m.resourceLoaded||!y)return null;const{isSavingPin:w,newBoard:C}=this.state;let I=null;u&&u.board&&(I=u.board.name);const x=f&&f.title||this.props.modalTitle,T=f?i.a.createElement(oe.a,{inModal:!0,notices:[f]}):i.a.createElement(h.c,{display:"flex",height:"calc(90vh - 97px)",justifyContent:"center",maxHeight:le,width:"100%"},w&&C&&b&&b.length>0?i.a.createElement(ie,{board:C,handleClose:this.close,setModalTitle:E,suggestions:b}):i.a.createElement(a.Fragment,null,i.a.createElement(h.c,{color:"white",display:"flex",height:"100%",overflow:"hidden",position:"relative",rounding:2,width:"100%"},i.a.createElement(h.c,{direction:"column",display:"flex",justifyContent:"between",width:"40%"},i.a.createElement(h.c,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginTop:3},i.a.createElement(R.a,{color:n,pin:m,pinImageRef:this.pinImageRef,updateDescription:_})),i.a.createElement(D,{onSocialConnect:c})),i.a.createElement(h.c,{display:"flex",width:"60%"},i.a.createElement(j,{boardSavedTo:e,boardWithSection:t,isRepin:!0,onBoardCreated:g,onBoardSave:this.handleSavePinToBoard,onClose:this.close,onToggleFlyout:this.handleToggleFlyout,pinId:m.id,preselectedCollaborators:p,setModalTitle:d?E:void 0,showCreate:S,suggestedBoardTitle:v}))),r&&i.a.createElement(o.b,{onDismiss:()=>{s(),this.dismissModal()},pin:m,pinImageRef:this.pinImageRef,selectedBoardName:I})));return d?i.a.createElement(P.b,{accessibilityModalLabel:x||l.a._("Repin modal","save.pin-to-board.PinToBoard.PinToBoard","Accessibility label on modal"),heading:x,onDismiss:this.close,size:"md"},T):T}}se(ue,"defaultProps",{pwtAuxData:{}});const me=Object(re.f)(ue)},GBVV:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n("q1tI"),i=n("n6mq");const o={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function r(){return a.createElement(i.c,{alignItems:"center",color:"red",display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%",rounding:8},a.createElement(i.c,{dangerouslySetInlineStyle:o,display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18}))}function s({accessibilityExpanded:e,accessibilityHaspopup:t,accessibilityLabel:n,disabled:o,name:s,onClick:c,selected:l,size:d,submitting:u,text:m,textColor:h}){return a.createElement(i.c,{display:"flex",position:"relative"},u&&a.createElement(r,null),a.createElement(i.d,{accessibilityExpanded:e,accessibilityHaspopup:t,accessibilityLabel:n,color:"red",disabled:o||u,inline:!0,name:s,onClick:c,selected:l,size:d,textColor:h,type:"submit",text:m}))}},Sihc:function(e,t,n){n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return u}));var a=n("Pqnw"),i=n("uVIr"),o=n("VqlB"),r=n("eOdZ"),s=n("oN2T"),c=n("KFEb"),l=n("Wer7");function d(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function u({boardId:e,name:t,nameSource:n,pinImport:u,initialPinIds:m=[]}){let h=0;"RECOMMENDATION"===n?h=1:"EDITED_RECOMMENDATION"===n&&(h=2);const p={board_id:e,initial_pins:u&&!u.all?u.pinIds:m,name:t,name_source:h};return t=>r.a.create("BoardSectionResource",p).callCreate({showError:!1}).then(({resource_response:{data:n}})=>{t(d(e,n)),t(Object(i.a)({feedId:e,feedType:c.a.BOARD_SECTIONS,itemIds:[n.id],itemType:"board_section"})),t(Object(s.b)(e,"pin_count")),t(Object(l.f)("BoardSectionsRepinResource",{board_id:e}));const{all:r,pinIds:m}=u||{all:!1,pinIds:[]};return r?new Promise((a,i)=>t(Object(o.a)({inverseSelection:!0,selectedPinIds:m,source:{boardId:e,sectionId:null},target:{boardId:e,sectionId:n.id}})).then(()=>a(n)).catch(i)):(m.length>0&&t(Object(a.a)(c.a.BOARD_PINS,e)),n)})}},VqlB:function(e,t,n){n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return p}));var a=n("3z7j"),i=n("Pqnw"),o=n("uVIr"),r=n("MhBu"),s=n("eOdZ"),c=n("oN2T"),l=n("KFEb"),d=n("gzTk");const u=e=>Object(i.a)(e.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,e.sectionId||e.boardId);function m(e,t){const{source:n,target:i}=e;i.boardId!==n.boardId?(t(Object(c.b)(n.boardId,"pin_count")),t(Object(c.b)(i.boardId,"pin_count"))):n.sectionId&&i.sectionId||t(Object(c.b)(i.boardId,"pin_count")),n.sectionId&&t(Object(a.a)(n.sectionId)),i.sectionId&&t(Object(a.a)(i.sectionId))}function h(e){return t=>{const{selectedPinIds:n,source:a,target:i}=e;t(Object(r.a)({feedId:a.sectionId||a.boardId,feedType:a.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:n,itemType:"pin"})),t(Object(o.a)({feedId:i.sectionId||i.boardId,feedType:i.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:n,itemType:"pin"})),m(e,t)}}function p(e){return t=>(function(e,t){const{inverseSelection:n,selectedPinIds:a,source:i,target:c}=e;if(i.boardId===c.boardId&&(i.sectionId||null)===(c.sectionId||null))return Promise.reject();if(n){const e={board_id:i.boardId,new_board_id:c.boardId,old_section_id:i.sectionId||void 0,new_section_id:c.sectionId||void 0,pin_ids:a};return s.a.create("BulkEditSelectAllResource",e).callUpdate({showError:!1}).then(()=>Promise.all([t(u(i)),t(u(c))])).catch(d.a)}{const e=(e,n)=>{t(Object(r.a)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:a,itemType:"pin"})),t(Object(o.a)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:a,itemType:"pin"}))};e(i,c);const n=()=>e(c,i);if(c.boardId===i.boardId){if(c.sectionId){const e={section_id:c.sectionId,pins:a};return s.a.create("BoardSectionEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),Object(d.a)(e)})}{const e={section_id:i.sectionId,pins:a};return s.a.create("BoardSectionPinsResource",e).callDelete({showError:!1}).catch(e=>{n(),Object(d.a)(e)})}}{const e={board_id:c.boardId,section_id:c.sectionId||void 0,pin_ids:a};return s.a.create("BulkEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),Object(d.a)(e)})}}})(e,t).then(()=>m(e,t))}},Yo6N:function(e,t,n){var a=n("q1tI"),i=n.n(a),o=n("3gA6"),r=n("n6mq");function s({action:e,alignCenter:t}){const{title:n,description:a,button:s}=e,c=n&&n.text,l=a&&a.text,d=s&&s.text||"",u=s&&s.link||"",m=s&&s.link?s.link.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").replace("/",""):"";return s&&d&&u.startsWith("http")?i.a.createElement(r.c,null,i.a.createElement(r.c,{marginBottom:1},i.a.createElement(r.K,{align:t?"center":"left",weight:"bold"},""!==d?d:"Visit")),i.a.createElement(r.c,{marginBottom:1},i.a.createElement(o.b,{className:"underlineLink",to:u},i.a.createElement("span",{style:{textDecoration:"underline"}},i.a.createElement(r.K,{align:t?"center":"left",truncate:!0},m))))):i.a.createElement(r.c,null,!!c&&i.a.createElement(r.c,{marginBottom:1},i.a.createElement(r.K,{align:t?"center":"left",weight:"bold"},c)),!!l&&i.a.createElement(r.c,{marginBottom:1},i.a.createElement(r.K,{align:t?"center":"left"},l)))}const c={backgroundColor:"#E1F8F7",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},l={boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"};function d({inModal:e,notice:t}){const{title:n,description:a,actions:o=[]}=t,d=a&&a.text||"",u=a&&a.text_tags||[],m=1===o.length,h=b(d,u);return i.a.createElement(r.c,{rounding:2,padding:6,dangerouslySetInlineStyle:{__style:e?l:c}},!!n&&!e&&i.a.createElement(r.c,{marginBottom:2,display:"flex"},i.a.createElement(r.m,{size:"md"},n)),!!d&&i.a.createElement(r.c,{marginBottom:4},i.a.createElement("span",{style:{whiteSpace:"pre-wrap"}},i.a.createElement(r.K,{overflow:"normal",align:e?"center":"left"},h))),!!o.length&&i.a.createElement(r.c,{display:"flex",wrap:!0,marginStart:-2,marginEnd:-2,direction:e?"column":"row"},o.map(t=>i.a.createElement(r.c,{column:e||m?12:6,paddingY:1,paddingX:2,key:JSON.stringify(t)},i.a.createElement(s,{action:t,alignCenter:e||m})))))}const u=44,m=117,h=540,p=656;function g({notice:e}){const{actions:t=[],description:n,footer:a}=e,s=b(n&&n.text||"",n&&n.text_tags||[]),c={color:"#004b91",display:"block",fontSize:"28px",WebkitFontSmoothing:"antialiased"};return i.a.createElement(r.c,{width:"100%",display:"flex",direction:"column",alignItems:"center",marginBottom:3},i.a.createElement(r.c,{dangerouslySetInlineStyle:{__style:{backgroundColor:"#86d1ce"}},display:"flex",justifyContent:"center",width:p,rounding:8},i.a.createElement(r.c,{height:"100%",width:"100%",padding:10},i.a.createElement("span",{style:c},s),i.a.createElement(r.c,{marginTop:6},t.map(e=>{var t;const n=null===(t=e.button)||void 0===t?void 0:t.link;var a,s;return n&&n.startsWith("tel")?i.a.createElement(r.c,null,i.a.createElement("span",{style:{fontWeight:"600",...c}},null===(a=e.title)||void 0===a?void 0:a.text),i.a.createElement("span",{style:c},null===(s=e.description)||void 0===s?void 0:s.text)):i.a.createElement(o.b,{to:n||""},i.a.createElement(r.c,{display:"inlineBlock"},i.a.createElement(r.c,{alignItems:"center",color:"navy",display:"flex",justifyContent:"center",height:u,rounding:"pill",width:m},i.a.createElement(r.K,{color:"white",weight:"bold"},e.button&&e.button.text))))})))),!!a&&i.a.createElement(r.c,{paddingY:2,width:h},i.a.createElement(r.t,{inline:!0,target:"blank",href:a.link,key:a.link},i.a.createElement(r.K,{align:"center",color:"gray",size:"sm"},i.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.text}})))))}function b(e,t){const n=[];let a=0;for(let o=0;o<t.length;o+=1){const s=t[o];if(5===s.tag_type&&s.link){const t=e.substring(s.offset,s.offset+s.length),o=i.a.createElement(r.t,{inline:!0,target:"blank",href:s.link,key:t},i.a.createElement(r.K,{inline:!0,weight:"bold"},t));n.push(i.a.createElement("span",null,e.substring(a,s.offset))),n.push(o),a=s.offset+s.length}}return a>0&&n.push(i.a.createElement("span",null,e.substring(a))),0===n.length?[i.a.createElement("span",null,e)]:n}function f({inModal:e,notices:t}){return i.a.createElement(a.Fragment,null,t.map(t=>2===t.style?i.a.createElement(g,{notice:t}):i.a.createElement(d,{notice:t,inModal:e})))}n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return f}))},"b/K5":function(e,t,n){var a=n("q1tI"),i=n.n(a),o=n("n6mq");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],c=120,l=800,d=(e,t)=>Math.random()*((e||1)-(t||0))+(t||0),u=e=>e*(Math.PI/180);class m extends a.PureComponent{constructor(...e){super(...e),r(this,"animationTimer",null),r(this,"canvasRemovalTimer",null),r(this,"containerRef",i.a.createRef()),r(this,"buildCanvas",()=>{if(!this.containerRef.current)return null;const{height:e,width:t}=this.containerRef.current.getBoundingClientRect(),n=2.5*e,a=document.createElement("canvas");return a.style.position="absolute",a.style.left=`${0-(n-t)/2}px`,a.style.top=`${0-(n-e)/2}px`,a.style.pointerEvents="none",a.style.width=`${n}px`,a.style.height=`${n}px`,a.style.overflow="visible",a.width=n,a.height=n,a}),r(this,"explode",()=>{const e=this.buildCanvas();if(!e)return;const t=this.containerRef.current,n=e.getContext("2d");t.prepend(e);const a=Array.from(Array(c)).map((t,n)=>({x:e.width/2,y:e.height/2,radius:Math.round(d(10,30)),color:s[Math.floor(Math.random()*s.length)],degree:Number(d(0,360).toFixed(1)),speed:Math.round(d(0,25)),friction:.9,opacity:Number(d(0,.5).toFixed(1)),yVel:0,gravity:.04})),i=(e,t,n,a)=>{window.requestAnimationFrame(()=>i(e,t,n,a)),t.clearRect(0,0,n,a),e.forEach((e,n)=>{e.x+=e.speed*Math.cos(u(e.degree)),e.y+=e.speed*Math.sin(u(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})};i(a,n,e.width,e.height),this.canvasRemovalTimer=setTimeout(()=>{t.removeChild(e)},this.props.delay+l)})}componentDidUpdate(e){const{delay:t,startAnimation:n}=this.props,{startAnimation:a}=e;n&&a!==n&&(this.animationTimer=setTimeout(this.explode,t))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return i.a.createElement(o.c,{ref:this.containerRef,position:"relative"},this.props.children)}}r(m,"defaultProps",{delay:0});var h=m,p=n("Ye/N"),g=n("vvax");function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return C}));const f=1800,E=800,S=335,y=e=>({pointerEvents:"none",opacity:e?1:0,WebkitTransition:"opacity .3s ease-in-out",transition:"opacity .3s ease-in-out",zIndex:1}),v=e=>({opacity:e?1:0,WebkitTransition:"opacity .5s ease-in-out .75s",transition:"opacity .5s ease-in-out .75s",overflow:"visible"}),_=(e,t,n,a)=>{let i=null,o=null,r={},s={};const c=n.current.getBoundingClientRect();if(a&&a.current){const e=t.current.getBoundingClientRect();s=a.current.getBoundingClientRect(),r={left:c.left-e.left,top:c.top-e.top};const n={x:s.x-c.x,y:s.y-c.y},l={x:(s.width-c.width)/2,y:(s.height-c.height)/2};i=`translate(${n.x}px, ${n.y}px)`,o=`translate(${l.x}px, ${l.y}px)`}return{mask:{position:"absolute",left:r.left,top:r.top,width:e?s.width:c.width,height:e?s.height:c.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?i:"none",transform:e?i:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s",borderRadius:e?"8px 0px 0px 8px":"8px",zIndex:2},imageContainer:{width:c.width,height:c.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?o:"none",transform:e?o:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s"}}},w=e=>({opacity:e?1:0,WebkitTransform:e?"translateY(0)":"translateY(20%)",transform:e?"translateY(0)":"translateY(20%)",WebkitTransition:"all .5s ease-in-out .75s",transition:"all .5s ease-in-out .75s",textAlign:"center",marginTop:"24px"});class C extends a.PureComponent{constructor(...e){super(...e),b(this,"state",{isInitialized:!1}),b(this,"containerRef",Object(a.createRef)()),b(this,"pinDestinationRef",Object(a.createRef)())}componentDidMount(){this.requestAnimationFrameId=window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}componentWillUnmount(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}componentDidUpdate(e,t){const{isInitialized:n}=this.state,{onDismiss:a}=this.props;n&&a&&!this.dismissTimeout&&(this.dismissTimeout=setTimeout(a,f+E))}render(){const{firstRepin:e,pin:t,pinImageRef:n,selectedBoardName:r}=this.props,{description:s="",images:c}=t,{height:l=0,width:d=0,url:u=""}=c["236x"]||{},{isInitialized:m}=this.state,{mask:b,imageContainer:f}=_(m,this.containerRef,n,this.pinDestinationRef);return i.a.createElement(a.Fragment,null,i.a.createElement(o.c,{position:"absolute",top:!0,bottom:!0,right:!0,left:!0,ref:this.containerRef},i.a.createElement(o.c,{maxHeight:S,overflow:"hidden",dangerouslySetInlineStyle:{__style:b}},i.a.createElement(o.c,{dangerouslySetInlineStyle:{__style:f}},i.a.createElement(o.p,{alt:s,src:u||"",naturalHeight:l||1,naturalWidth:d||1}))),i.a.createElement(o.c,{color:"white",position:"absolute",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:y(m)}},i.a.createElement(o.c,{display:"flex",justifyContent:"center",alignItems:"center",direction:"column",height:"100%",dangerouslySetInlineStyle:{__style:v(m)}},i.a.createElement(h,{delay:1250,startAnimation:m},i.a.createElement(o.u,{rounding:2,width:270,height:180},i.a.createElement(o.c,{display:"flex",height:"100%",width:"100%"},i.a.createElement(o.c,{ref:this.pinDestinationRef,color:"transparent",marginEnd:1,flex:"grow",height:"100%"}),i.a.createElement(o.c,{display:"flex",width:80,direction:"column"},i.a.createElement(o.c,{color:"lightGray",flex:"grow",marginBottom:1}),i.a.createElement(o.c,{color:"lightGray",flex:"grow"}))))),i.a.createElement(o.c,{paddingX:2,dangerouslySetInlineStyle:{__style:w(m)}},i.a.createElement(o.m,{align:"center"},e?Object(g.b)(p.a._("You saved your first Pin to {{ selectedBoardName }}!","First board create confirmation message","First board create confirmation message"),{selectedBoardName:null!=r?r:""}):Object(g.b)(p.a._("You saved this Pin to {{ selectedBoardName }}!","Board create confirmation message","Board create confirmation message"),{selectedBoardName:null!=r?r:""})))))))}}b(C,"defaultProps",{firstRepin:!1})},"g/XF":function(e,t,n){n.d(t,"a",(function(){return s}));var a=n("q1tI"),i=n("JW66"),o=n("zwad"),r=n("n6mq");function s({url:e,description:t,color:n}){return n=n||i.a.DEFAULT_IMAGELESS_PIN_COLOR,a.createElement(r.c,{rounding:2,height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:n}}},a.createElement(r.c,{maxHeight:200,padding:4,overflow:"hidden"},e&&a.createElement(r.c,{marginBottom:2},a.createElement(r.K,{color:"white",size:"sm"},o.a.parse(e).hostname||e)),a.createElement(r.c,{maxHeight:144},a.createElement(r.K,{color:"white",overflow:"normal",weight:"bold"},t))))}},gzTk:function(e,t,n){n.d(t,"a",(function(){return c}));var a=n("1inl"),i=n("Ye/N");const o=2171,r=2172,s=2173;function c(e){a.a.showError(function(e){switch(e.api_error_code){case o:case r:case s:return i.a._("Please wait until the previous board action finishes.");default:return e.message}}(e))}},lm6u:function(e,t,n){var a=n("q1tI"),i=n.n(a),o=n("/MKj"),r=n("1inl"),s=n("3z7j"),c=n("ajUs"),l=n("Ye/N");var d=n("TN0d"),u=n("eOdZ"),m=n("G35+"),h=n("CvCA"),p=n("Wrea"),g=n("fArA"),b=n("Vzit"),f=n("WnNx"),E=n("n6mq"),S=n("U4JR"),y=n("NjDU"),v=n("C0mq"),_=n("6G9P"),w=n("B6Tf"),C=n("oTtT"),I=n("nGHF"),x=n("oN2T");function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return P}));const O=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>â€¦)]+/gi,B="236x";class j extends i.a.Component{constructor(...e){super(...e),T(this,"state",{boardSavedTo:null,displaySuccessAnimation:!1,experienceComplete:()=>{},experienceDismiss:()=>{},newPin:null,modalTitle:this.props.showCreate?l.a._("Create board"):l.a._("Choose board")||"",pinDescription:this.props.pin&&this.props.pin.description||"",resolve:void 0,sharing:{facebook:!1,twitter:!1}}),T(this,"unmounted",!1),T(this,"setModalTitle",e=>this.safeSetState({modalTitle:e})),T(this,"updateDescription",e=>{this.safeSetState({pinDescription:e})}),T(this,"close",()=>{const{onClose:e,boardPickerStopwatch:t}=this.props;e&&e(),t&&t.abort("boardPickerClose"),Object(S.a)(2502,{component:5,element:610})}),T(this,"safeSetState",(e,t)=>{this.unmounted?t&&t():this.setState(e,t)}),T(this,"getPinResource",(e,t,n)=>{var a;const{color:i,location:o,pin:r,method:s,guid:l,additionalCreateFields:d,advertiser_id:m,previousHistory:h}=this.props;let p;r.id&&(p=Object(c.a)(r,o,h)||`${r.tracking_params}~0`);const g=r.id?"RepinResource":"PinResource",b=!r.id&&r.image_url?Object(_.b)(r.image_url,r.link):(null===(a=r.images.orig)||void 0===a?void 0:a.url)||"",f={...d,board_id:t||"",color:i||"",clientTrackingParams:p,description:this.state.pinDescription,guid:l||"",link:r.link,image_base64:r.image_base64,image_url:b,is_buyable_pin:!1,is_removable:r.promoted_is_removable,media_upload_id:r.media_upload_id,method:s||"",pin_id:r.id||"",section:n,title:r.title||"",...m?{advertiser_id:m}:{}};if(!e){const{facebook:e,twitter:t}=this.state.sharing;f.share_facebook=e,f.share_twitter=t}return u.a.create(g,f)}),T(this,"triggerPubSubs",e=>{d.a.instance.publish("currentUser","pinCreated",e),d.a.instance.publish(e.board.id,"pinCreated",{pin:e})}),T(this,"makeCancelablePromise",e=>{let t=!1;return{promise:new Promise((n,a)=>{e.then(e=>t?a({isCanceled:!0}):n(e)),e.catch(e=>a(t?{isCanceled:!0}:e))}),cancel(){t=!0}}}),T(this,"handleLogToastClick",()=>{Object(S.a)(101,{component:20,view:52})}),T(this,"showSuggestedBoardToast",(e,t,n,a)=>{const{toastManagerContext:o,shouldShowToast:r}=this.props;if(r&&e){const{name:t,url:n,image_thumbnail_url:a}=e;o.showOneToast(({onHide:e})=>i.a.createElement(h.a,{duration:w.a,onHide:e,text:i.a.createElement(i.a.Fragment,null,i.a.createElement(E.K,{color:"white"},l.a._("You might also like","Post repin suggested board","Post repin suggested board")),i.a.createElement(E.K,{color:"white",weight:"bold"},t)),href:n,imageUrl:a,onClick:this.handleLogToastClick}))}}),T(this,"showBoardSavedToast",(e,t)=>{const{toastManagerContext:n}=this.props;n.showToast(({onHide:n})=>i.a.createElement(h.a,{duration:w.a,onHide:n,text:Object(_.a)(e.name,t),href:t?`${e.url}${t.slug}`:e.url,imageUrl:e.image_cover_url,onClick:this.handleLogToastClick}))}),T(this,"dismissModal",e=>{const{resolve:t,newPin:n}=this.state;t&&t(n)}),T(this,"fetchBoardRecommendation",e=>{return u.a.create("RelatedBoardForPinRandomFeedResource",{pin:e.id,page_size:1}).callGet({showError:!1}).then(e=>Promise.resolve(e.resource_response.error?null:e.resource_response.data[0]))}),T(this,"handleBoardSaveSuccess",(e,t,n,a)=>{const{action:i,dispatch:o,hideSuccessAnimation:r,homeTakeoverExperience:c,pin:d,setCompletionPromise:u,shouldShowToast:m,viewerUserId:h}=this.props;o(Object(b.d)());const g=this.makeCancelablePromise(new Promise((s,d)=>{const u=e.resource_response.data;this.triggerPubSubs(u);const h=this.state.pinDescription.match(O)||[];h.length>0&&Object(S.a)(2,{element:10273,hashtags:JSON.stringify(h),objectId:this.props.pin.id});const p=r?()=>{}:()=>{m&&this.showBoardSavedToast(t,n),this.safeSetState({displaySuccessAnimation:!0,modalTitle:l.a._("Board created","Modal title after creating a new board","Modal title after creating a new board"),newPin:u,resolve:s})};"repin"===i?(this.fetchBoardRecommendation(u).then(e=>{this.showSuggestedBoardToast(e,u,n,a)}),a?p():s(u)):("create"===i&&c&&500840===c.experience_id&&(o(function(e){return{type:"PIN_CREATED_VIA_CREATOR_CHECKLIST",payload:{pin_created_via_creator_checklist:e}}}(!0)),Object(S.a)(7510,{component:13233})),a?p():s(u))}));if(a||o(Object(f.c)(d.id)),u(g),o(Object(x.c)(t)),o(Object(p.d)({boardId:t.id,sectionId:n&&n.id,increment:1})),h&&(o(Object(y.b)({userId:h,increment:1})),o(Object(b.d)())),n||!t.image_cover_url){const{image_url:e,images:n}=d;t.image_cover_url=e||n&&n[B]&&n[B].url||"",o(Object(x.d)({},t))}n&&o(Object(s.a)(n.id)),o(function(e,t,n,a,i){return{type:"PIN_SAVE",payload:{pinId:e,saved:t,boardId:n,title:a,url:i}}}(d.id,!0,t.id,t.name,t.url))}),T(this,"handleSaveToBoard",(e,t,n)=>{const{boardPickerStopwatch:a,onToggleModal:i,shouldShowToast:o}=this.props;a&&a.abort("boardPickerSubmit"),o&&!n&&(this.close(),this.showBoardSavedToast(e,t));const s="secret"===(e.privacy||""),c={board:t?t.id:e.id,state:w.c.LOADING};this.safeSetState({boardSavedTo:c},()=>{this.getPinResource(s,e.id,(t||{}).id).callCreate({showError:!1}).then(a=>{this.safeSetState({boardSavedTo:Object.assign(c,{state:w.c.SUCCESS})},()=>this.handleBoardSaveSuccess(a,e,t,n)),i&&!n&&i(!1)}).catch(e=>{this.unmounted||this.safeSetState({boardSavedTo:null}),r.a.showError(e.message_detail||e.message);const t=this.makeCancelablePromise(Promise.reject(e));this.props.setCompletionPromise(t),i&&i(!1)})})}),T(this,"handleSocialConnectSet",(e,t)=>{const n=Object.assign({},this.state.sharing);e===m.a.FACEBOOK?n.facebook=t:e===m.a.TWITTER&&(n.twitter=t),this.safeSetState({sharing:n})}),T(this,"handleNewBoardAnimationCompletion",()=>{const{dispatch:e,pin:t}=this.props;e(Object(f.c)(t.id))})}UNSAFE_componentWillReceiveProps(e){const{boardWithSection:t,showCreate:n}=this.props;this.safeSetState({pinDescription:e.pin&&e.pin.description||e.description||""}),t&&n?this.setModalTitle(l.a._("Create section","modal title for create section pane","modal title for create section pane")):t&&!n&&this.setModalTitle(l.a._("Choose section","modal title for choose section","modal title for choose section"))}componentWillUnmount(){this.unmounted=!0}render(){const{close:e,dismissModal:t,handleNewBoardAnimationCompletion:n,handleSaveToBoard:a,handleSocialConnectSet:i,setModalTitle:o,updateDescription:r}=this,{boardSavedTo:s,displaySuccessAnimation:c,modalTitle:l,newPin:d}=this.state,{color:u,pin:m}=this.props;return this.props.children({boardSavedTo:s,color:u,dismissModal:t,displaySuccessAnimation:c,handleAbort:e,handleNewBoardAnimationCompletion:n,handleSaveToBoard:a,handleSocialConnectSet:i,modalTitle:l,newPin:d,pin:m,setModalTitle:o,updateDescription:r})}}const P=Object(g.compose)(Object(o.connect)(e=>{const{advertiser:t,viewer:n,history:a}=e,i=n.isAuth&&t&&t.owner_user_id!==n.id?t.id:null,o=e.experiences.eligibleExperiences[11],r=e.experiences.eligibleExperiences[33];return{homeTakeoverExperience:o,previousHistory:a.previous,repinTakeoverExperience:r,...i?{advertiser_id:i}:{},...n.isAuth?{viewerUserId:n.id}:{}}}),I.c,v.a)((function(e){const t=Object(C.b)();return i.a.createElement(j,Object.assign({},e,{boardPickerStopwatch:t}))}))},"v+PR":function(e,t,n){var a=n("q1tI"),i=n.n(a),o=n("Ye/N"),r=n("zLLH"),s=n("vvax"),c=n("n6mq");const l=185;var d=Object(r.c)({name:"PinSaveStatusResource",key:"saveStatusResource",options:({pin:e})=>({id:e.id})},{allowStale:!1})((function(e){const{saveStatusResource:{data:t}}=e;return t&&t.pinned_to_board?i.a.createElement(c.c,null,i.a.createElement(c.c,{color:"red","data-test-id":"already-pinned",display:"flex",padding:3,rounding:2,width:l},i.a.createElement(c.K,{align:"center",color:"white",size:"md",weight:"bold"},Object(s.b)(o.a._("Psst! You already saved this Pin to {{ board_name }} ","Toast for already having repinned pin","Toast for already having repinned pin"),{board_name:(t.pinned_to_board||{}).name}).join(" "))),i.a.createElement(c.c,{display:"flex",justifyContent:"center",marginTop:-3},i.a.createElement(c.n,{accessibilityLabel:"",color:"red",icon:"heart",size:26}))):null})),u=n("P6kd"),m=n("g/XF"),h=n("U4JR");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return y}));const g=236,b=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*/,f=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*$/,E=0,S="g";class y extends a.Component{constructor(...e){super(...e),p(this,"state",{cursorIndex:-1,flyoutCursorIndex:-1,description:this.props.pin&&this.props.pin.description&&this.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,editedBefore:!1,flyoutOpened:!1}),p(this,"onDescriptionChange",(e,t)=>{const n=new RegExp(b,S);let a="";if(t<e.length){let i=n.exec(e),o=n.lastIndex<t;for(;i&&o;)i=n.exec(e),o=n.lastIndex<t;const r=!!i&&b.test(e.slice(i.index,t));o=!!i&&i.index<t,i&&r&&o&&(a=i[E])}else{const t=f.exec(e);a=t?t[E]:""}this.updateDescription(e);const i=b.test(a),o=this.state.isHashtagFlyoutOpen?this.state.flyoutCursorIndex:e.slice(0,t).lastIndexOf("#");this.setState({cursorIndex:t,flyoutCursorIndex:o,description:e,hashtagQuery:a,isHashtagFlyoutOpen:i,flyoutOpened:this.state.flyoutOpened||i})}),p(this,"onCursorChange",e=>{const{isHashtagFlyoutOpen:t,flyoutCursorIndex:n}=this.state;t&&e<n&&this.setState({isHashtagFlyoutOpen:!1})}),p(this,"updateDescription",e=>{this.props.updateDescription&&this.props.updateDescription(e)}),p(this,"handleDescriptionBlur",e=>{const t=e.target.value.trim(),{isHashtagFlyoutOpen:n}=this.state;this.updateDescription(t),this.setState({description:t,editing:n})}),p(this,"handleDescriptionEdit",()=>{this.setState({editing:!0,editedBefore:!0})}),p(this,"handleHashtagAddition",e=>{const{pin:t}=this.props;Object(h.a)(101,{component:208,element:10249,hashtags:e,objectId:t.id});const n=this.state.flyoutCursorIndex,a=Number(n+this.state.hashtagQuery.length),i=this.state.description.slice(0,n)+e+" "+this.state.description.slice(a);this.updateDescription(i),this.setState({description:i,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})}),p(this,"handleRefTextArea",e=>{this._textArea=e})}render(){const{color:e,isFirstPin:t,pin:n,pinImageRef:a}=this.props,{description:o,editing:r,flyoutOpened:s,hashtagQuery:l,isHashtagFlyoutOpen:h}=this.state,{images:p,link:b}=n,f=p&&p[g+"x"],E=f&&f.url||n.image_base64;return i.a.createElement(c.c,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:t?"50%":"",dangerouslySetInlineStyle:{__style:s&&r?{transform:"translateY(-75px)"}:{}}},i.a.createElement(c.c,{display:"flex",direction:"column",alignItems:"center"},n&&n.id&&i.a.createElement(d,{pin:n}),i.a.createElement(c.c,{paddingY:t?9:0,width:240},i.a.createElement(c.c,{ref:a,maxHeight:s&&r?220:335,rounding:4,overflow:"hidden"},E?i.a.createElement(c.p,{alt:o,src:E,naturalHeight:f.height||1,naturalWidth:f.width||1}):!!b&&i.a.createElement(m.a,{color:e||"",description:o,url:b})))),this.anchor&&h?i.a.createElement(u.a,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,editing:r,query:l}):null)}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/pjs-18-6330677c83eff94c6ddf.mjs.map
