(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[22,"CarouselCommon"],{"/mzO":function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("q1tI"),a=n("Ye/N"),o=n("n6mq");function r({commentsDisabled:e,onCommentChange:t,onPhotoChange:n,photosDisabled:r,isManagedView:s}){return i.createElement(o.c,null,i.createElement(o.j,null),i.createElement(o.c,{md:{display:"flex"},justifyContent:"between",paddingX:s?0:4,paddingY:s?6:3},!s&&i.createElement(o.c,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(o.K,{size:"md"},a.a._("Comment and Photo Permissions"))),i.createElement(o.c,{xs:{column:12},md:{column:s?12:8}},i.createElement(o.c,{paddingY:1,display:"flex",alignItems:"center"},i.createElement(o.I,{onChange:t,id:"CommentSwitch",switched:!e}),i.createElement(o.c,{paddingX:2},i.createElement(o.q,{htmlFor:"CommentSwitch"},i.createElement(o.K,{size:"md"},a.a._("Allow people to comment","Label for toggling comments on a pin in pin edit form","Label for toggling comments on a pin in pin edit form"))))),i.createElement(o.c,{paddingY:1,alignItems:"center",display:"flex"},i.createElement(o.I,{onChange:n,id:"PhotoSwitch",switched:!r}),i.createElement(o.c,{paddingX:2},i.createElement(o.q,{htmlFor:"PhotoSwitch"},i.createElement(o.K,{size:"md"},a.a._("Allow people to upload photos","Label for toggling photos on a pin in pin edit form","Label for toggling photos on a pin in pin edit form"))))))))}},"5S2N":function(e,t,n){var i=n("q1tI"),a=n.n(i),o=n("/MKj"),r=n("VJm5"),s=n("rSLd"),l=n("xOLo"),d=n("BkRI"),c=n.n(d),u=n("/mzO"),h=n("kwau"),p=n("JW66"),m=n("eOdZ"),g=n("5FNA"),E=n("Wer7");var f=n("Sihc"),b=n("Y+p1"),_=n.n(b),S=n("Ye/N"),y=n("TiQD"),C=n("GBVV"),I=n("4cpq"),w=n("CvCA"),v=n("nGHF"),x=n("n6mq");function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const k=Object(v.c)(class extends a.a.PureComponent{constructor(...e){super(...e),T(this,"state",{deleting:!1}),T(this,"unmounted",!1),T(this,"handleConfirm",()=>{if(this.state.deleting)return;const{onDeletePin:e}=this.props;this.setState({deleting:!0}),e().then(()=>this.handleDeleteDidComplete()).catch(e=>this.handleDeleteDidComplete(e))}),T(this,"handleDeleteDidComplete",e=>{const{toastManagerContext:t}=this.props;this.unmounted||this.setState({deleting:!1}),e||t.showToast(({onHide:e})=>a.a.createElement(w.a,{onHide:e,text:S.a._("Pin deleted!","User deleted their pin","User deleted their pin")}))})}componentWillUnmount(){this.unmounted=!0}render(){const{onDismiss:e}=this.props,{deleting:t}=this.state;return a.a.createElement(y.b,{heading:S.a._("Are you sure?","Confirm the user wants to delete the pin","Confirm the user wants to delete the pin"),accessibilityModalLabel:S.a._("Are you sure you want to delete this pin?","Accessible label to confirm the user wants to delete the pin","Accessible label to confirm the user wants to delete the pin"),size:"sm",onDismiss:e,footer:a.a.createElement(x.c,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1},a.a.createElement(x.c,{paddingX:1},a.a.createElement(x.d,{onClick:e,text:S.a._("Cancel")})),a.a.createElement(x.c,{paddingX:1},a.a.createElement(I.a,{id:"confirm-delete-pin"},a.a.createElement(C.b,{color:"red",onClick:this.handleConfirm,text:S.a._("Delete Pin"),submitting:t}))))},a.a.createElement(x.c,{padding:4},a.a.createElement(x.K,null,S.a._("Once you delete a Pin, you can't undo it!"))))}});k.displayName="DeletePinConfirmation";var D=k,R=n("V711");function M({board:e,canEdit:t,onBoardChange:n,onBoardCreate:i}){return a.a.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},a.a.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:2},a.a.createElement(x.q,{htmlFor:"BoardPicker"},a.a.createElement(x.K,{size:"md"},S.a._("Board")))),t?a.a.createElement(x.c,{xs:{column:12},md:{column:8}},a.a.createElement(R.a,{id:"BoardPicker",board:e,onBoardChosen:n,onBoardCreate:i})):a.a.createElement(x.c,{xs:{column:12},md:{column:8},paddingY:2},a.a.createElement(x.K,{size:"md",weight:"bold"},e.name)))}var P=n("TSYQ"),O=n.n(P),B=n("Q7uW"),N=n("zy/z"),L=n("zywm"),j=n("/5zs"),A=n("pLLR");function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=Object(A.f)(class extends i.Component{constructor(...e){super(...e),F(this,"state",{focused:!1}),F(this,"suggestionAnchorRef",i.createRef()),F(this,"setRef",e=>this.textAreaRef=e),F(this,"handleBlur",e=>{this.setState({focused:!1});const{onBlur:t}=this.props;t&&t({event:e,value:e.currentTarget.value})}),F(this,"handleFocus",e=>{this.setState({focused:!0});const{onFocus:t}=this.props;t&&t({event:e,value:e.currentTarget.value})}),F(this,"onTextChange",()=>{if(this.textAreaRef){this.props.onDescriptionChange({value:this.textAreaRef.textContent});const e=Object(L.d)(this.textAreaRef);this.props.onUserMentionTagsChange({userMentionTags:e})}})}render(){const{canEdit:e,description:t,errorMessage:n,existingTags:a,label:o,placeholder:r,onDescriptionChange:s,requestContext:l}=this.props,{focused:d}=this.state,c=new j.c(l,"cp_mention_web").enabled();return i.createElement(i.Fragment,null,i.createElement(x.j,null),i.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(x.q,{htmlFor:"DescriptionField"},i.createElement(x.K,{size:"md"},o))),e?i.createElement(x.c,{xs:{column:12},md:{column:8}},i.createElement(x.c,null,c?i.createElement("div",{ref:this.suggestionAnchorRef,id:"DescriptionField",className:O()("DescriptionField",{DescriptionField__error:!!n,DescriptionField__focus:d})},i.createElement(N.a,{handleBlur:this.handleBlur,setRef:this.setRef,suggestionAnchor:this.suggestionAnchorRef.current,onTextChange:this.onTextChange,handleFocus:this.handleFocus,existingTags:a,textValue:t})):i.createElement(x.L,{id:"DescriptionField",placeholder:r,value:t,onChange:s,hasError:(n||"").length>0})),!!n&&i.createElement(x.c,{justifyContent:"center"},i.createElement(B.a,{errorMessage:n,htmlFor:"pin-edit-description"}))):i.createElement(x.c,{xs:{column:12},md:{column:8},paddingY:2},i.createElement(x.K,{size:"md",weight:"bold"},t))))}}),Y=n("NXrh");function V({board:e,canEdit:t,currentSection:n,onSectionChange:a,onSectionCreate:o,sectionId:r,sectionName:s}){const l=e.id?Y.b:Y.a;return i.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:3},i.createElement(x.q,{htmlFor:"SectionPicker"},i.createElement(x.K,{size:"md"},S.a._("Section","label for editing a Pin's board section","label for editing a Pin's board section")))),t?i.createElement(x.c,{xs:{column:12},md:{column:8}},i.createElement(l,{board:e,onSectionChange:a,selectedSectionId:r,selectedSectionName:s,onSectionCreate:o})):i.createElement(x.c,{xs:{column:12},md:{column:8},paddingY:2},i.createElement(x.K,{size:"md",weight:"bold"},n&&!(e||{}).is_collaborative?n.title:S.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit"))))}var z=n("X9vl"),q=n("a9HN"),K=n("xdpg");const Q=6;function H({onClick:e,storyPinData:t}){const{pages:n}=t,a=n.length,o=a-Q>1;return i.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(x.K,{size:"md"},S.a._("Pages","editPinModal.EditStoryPinPages.header","Header text for editing Story Pin pages"))),i.createElement(x.c,{xs:{column:12},md:{column:8},display:"flex"},i.createElement(x.P,{onTouch:e,fullWidth:!1,rounding:2},i.createElement(x.c,{display:"flex"},n.slice(0,Q).map((e,t)=>i.createElement(x.c,{marginEnd:2,key:`story-pin-page-${e.id}`},i.createElement(z.a,{index:t,key:`editStoryPageThumbnail-${t}`,pinItem:{...Object(q.b)(e)}}))),a>Q&&i.createElement(x.c,{position:"relative"},i.createElement(z.a,{index:Q,key:`editStoryPageThumbnail-${Q}`,pinItem:{...Object(q.b)(n[Q])}}),o&&i.createElement(x.c,{position:"absolute",color:"transparentDarkGray",top:!0,column:12,height:"100%",rounding:2,display:"flex",alignItems:"center",justifyContent:"center"},i.createElement(x.K,{color:"white",weight:"bold"},Object(K.i)(S.a._("+{{ pageCount }}","+N count, indeicating there are N more pages in Story Pin","+N count, indeicating there are N more pages in Story Pin"),{pageCount:a-Q}))))))))}function W({canEdit:e,onTitleChange:t,title:n,errorMessage:a}){return i.createElement(i.Fragment,null,i.createElement(x.j,null),i.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(x.q,{htmlFor:"TitleField"},i.createElement(x.K,{size:"md"},S.a._("Title","Label for editing title of pin","Label for editing title of pin")))),i.createElement(x.c,{xs:{column:12},md:{column:8}},e?i.createElement(i.Fragment,null,i.createElement(x.c,null,i.createElement(x.M,{hasError:(a||"").length>0,id:"TitleField",onChange:t,size:"lg",value:n})),!!a&&i.createElement(x.c,{justifyContent:"center"},i.createElement(B.a,{errorMessage:a,htmlFor:"pin-edit-title"}))):i.createElement(x.c,{xs:{column:12},md:{column:8},paddingY:2},i.createElement(x.K,{size:"md",weight:"bold"},n)))))}function G({onChangeWebsite:e,link:t,errorMessage:n}){return i.createElement(i.Fragment,null,i.createElement(x.j,null),i.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(x.q,{htmlFor:"WebsiteField"},i.createElement(x.K,{size:"md"},S.a._("Website")))),i.createElement(x.c,{xs:{column:12},md:{column:8}},i.createElement(x.c,null,i.createElement(x.M,{hasError:(n||"").length>0,id:"WebsiteField",onChange:e,size:"lg",value:t})),!!n&&i.createElement(x.c,{justifyContent:"center"},i.createElement(B.a,{errorMessage:n,htmlFor:"pin-edit-website"})))))}var X=n("TN0d"),J=n("Wrea"),$=n("ZVWG"),Z=n("bo/h"),ee=n("XCz/"),te=n("U4JR"),ne=n("NjDU"),ie=n("zLLH"),ae=n("C0mq");function oe(e){return e?S.a._("Title too long. Make sure all cards' titles have less than 100 characters","Title entered is too long while editing a carousel pin and/or one of its pins","Title entered is too long while editing a carousel pin and/or one of its pins"):S.a._("Title too long. Make sure title has less than 100 characters","Title entered is too long while editing a pin","Title entered is too long while editing a pin")}function re(e){return e?S.a._("Need to provide a valid URL. Make sure all cards' links are valid","Invalid URL/link provided while editing a carousel pin and/or one of its pins","Invalid URL/link provided while editing a carousel pin and/or one of its pins"):S.a._("Need to provide a valid URL. Make sure the link is valid","Invalid URL/link provided while editing a pin","Invalid URL/link provided while editing a pin")}var se=n("fArA"),le=n("c50B"),de=n("VqlB");function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e){return Boolean(e&&e.trim().length)}function he(e,t){const n=ue(e),i=ue(t);return(n||i)&&e!==t}const pe=(e,t)=>({field_set_key:"detailed",id:e,preserve_component_state:t});t.a=Object(se.compose)(ae.a,Object(ie.c)({key:"pinResource",name:"PinResource",options:e=>pe(e.pinId,!0)}),Object(o.connect)((function(e,t){const{advertiser:n,viewer:i}=e;return i.isAuth&&n&&n.owner_user_id!==i.id?{advertiser_id:n.id}:{}}),e=>({invalidatePinResource:t=>e(Object(E.f)("PinResource",pe(t,!0))),changeBoardPinCount:t=>e(Object(J.d)(t)),changeUserPinCount:t=>e(Object(ne.b)(t)),completeResourceFetch:t=>e(Object(E.b)("PinResource",pe(t.id,!1),t)),pinMoved:Object(se.bindActionCreators)(de.b,e)})))(class extends i.Component{constructor(...e){super(...e),ce(this,"state",{board:this.props.pinResource.data&&this.props.pinResource.data.board||null,commentsDisabled:this.props.pinResource.data&&this.props.pinResource.data.comments_disabled||!1,description:this.props.pinResource.data&&this.props.pinResource.data.description.trim()||"",apiErrorMessage:null,link:this.props.pinResource.data&&this.props.pinResource.data.link||"",photosDisabled:this.props.pinResource.data&&this.props.pinResource.data.did_it_disabled||!1,sectionId:this.props.pinResource.data&&this.props.pinResource.data.section&&this.props.pinResource.data.section.id||null,sectionName:this.props.pinResource.data&&this.props.pinResource.data.section&&this.props.pinResource.data.section.title||null,showDeleteConfirmation:!1,carousel_data:this.props.pinResource.data&&this.props.pinResource.data.carousel_data||null,title:this.props.pinResource.data&&this.props.pinResource.data.title||"",userNote:this.props.pinResource.data&&this.props.pinResource.data.unified_user_note&&this.props.pinResource.data.unified_user_note.trim()||"",isProcessing:!1,currentIndex:void 0!==this.props.carouselSlotCurrentIndex?this.props.carouselSlotCurrentIndex:this.props.pinResource.data&&this.props.pinResource.data.carousel_data&&this.props.pinResource.data.carousel_data.index||0,shouldApplyTextToAll:!1,shouldDisableSave:!1,shouldShowCarouselSliders:!1,shouldShowValidationTitleError:!1,shouldShowValidationDescriptionError:!1,shouldShowValidationLinkFormatError:!1,shouldShowGenericUpdateError:!1,shouldShowValidationUserMentionTagsError:!1,userMentionTags:this.props.pinResource.data&&this.props.pinResource.data.user_mention_tags||[]}),ce(this,"onClickDeleteButton",()=>this.setState({showDeleteConfirmation:!0})),ce(this,"onHideConfirmation",()=>this.setState({showDeleteConfirmation:!1})),ce(this,"updateCarouselSlotIndex",()=>{const{carouselSlotCurrentIndex:e}=this.props;this.setState({currentIndex:void 0!==e?e:this.props.pinResource.data&&this.props.pinResource.data.carousel_data&&this.props.pinResource.data.carousel_data.index||0})}),ce(this,"handleBoardChange",e=>{const{board:{id:t}}=this.state;e.id!==t&&this.setState({board:e,sectionId:null,sectionName:null})}),ce(this,"createBoard",e=>{const{board:t}=this.state;if(!t.id&&t.name&&e){const{dispatch:n}=this.props;n(function(e,t){const n={name:e,privacy:p.a.BoardPrivacy.PUBLIC};return e=>m.a.create("BoardResource",n).callCreate().then(n=>{const i=n.resource_response.data;return e(t.username&&Object(E.f)("BoardsResource",Object(g.a)(t.username,!1))),i})}(t.name,e)).then(e=>{if(this._isMounted){const{sectionId:t,sectionName:n}=this.state;!t&&n?(this.setState({board:e}),this.createSection()):(this.handleBoardChange(e),this.handleSave())}})}}),ce(this,"handleBoardCreateClick",e=>{if(!e)return;const t={name:e,privacy:p.a.BoardPrivacy.PUBLIC};this.setState({board:t,sectionId:null,sectionName:null})}),ce(this,"createSection",()=>{const{board:e,sectionName:t}=this.state;if(!t)return;if(!e.id)return void this.createBoard();const n={boardId:e.id,name:t},{dispatch:i}=this.props;i(Object(f.a)(n)).then(e=>{this._isMounted&&(this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null}),this.handleSave())}).catch(e=>{this.setState({shouldShowGenericUpdateError:!0,apiErrorMessage:e.message})})}),ce(this,"handleSectionCreateClick",e=>{if(0===e.length)return;const{board:t}=this.state;t&&this.setState({sectionId:null,sectionName:e})}),ce(this,"handleSectionChange",e=>this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null,shouldShowGenericUpdateError:!1})),ce(this,"handleDeletePin",()=>{const{pinResource:{data:e},pinId:t,onDelete:n,onHide:i,changeBoardPinCount:a,changeUserPinCount:o,advertiser_id:r}=this.props,s={...r?{advertiser_id:r}:{},id:t};return m.a.create("PinResource",s).callDelete().then(()=>{if(this._isMounted){if(!e)return;const{board:{id:r},pinner:{id:s},section:l}=e;a({boardId:r,sectionId:l&&l.id||void 0,increment:-1}),o({userId:s,increment:-1}),X.a.instance.publish(r,"pinDeleted",t),X.a.instance.publish(s,"pinDeleted"),X.a.instance.publish(t,"pinDeleted"),i(),n&&n()}})}),ce(this,"sanitizeCarouselData",e=>{let{carousel_data:t}=this.state;if(e&&(t=e),t){const{carousel_slots:e}=t;if(e){const t={carousel_slots:[]};return e.forEach(e=>{const n={};n.description=e.details||"",n.title=e.title||"",n.link=e.link||"",t.carousel_slots.push(n)}),t}}return null}),ce(this,"triggerBoardAndSectionCreate",e=>()=>{const{board:t,sectionId:n,sectionName:i}=this.state;!t.id&&t.name?this.createBoard(e):!n&&i?this.createSection():this.handleSave()}),ce(this,"handleSave",()=>{this.setState({isProcessing:!0});const{advertiser_id:e,pinId:t,pinResource:{data:n},invalidatePinResource:i,completeResourceFetch:a,onHide:o}=this.props;if(!n)return;const{board:r,comments_disabled:s,did_it_disabled:l,title:d,description:c,link:u,section:h,carousel_data:p}=n,{carousel_data:g,shouldShowValidationLinkFormatError:E}=this.state;let f;if(g){const e=this.sanitizeCarouselData();e&&(f=JSON.stringify(e))}const{board:b,commentsDisabled:S,currentIndex:y,photosDisabled:C,title:I,description:w,sectionId:v,carousel_data:x,userMentionTags:T}=this.state,k=b||r,D=E?u:this.state.link,R={board_id:k.id,board_section_id:v,carousel_data_json:f,description:w,disable_comments:S,disable_did_it:C,id:t,link:D,title:I,user_mention_tags:JSON.stringify(T),...e?{advertiser_id:e}:{}},M=h&&h.id||null,P=k.id,O=r.id,B=O!==P,N=(Boolean(M)||Boolean(v))&&M!==v,L=he(d,I),j=he(c,w),A=he(u,D),F=Boolean(x)&&Boolean(p)&&!_()(x,p);B||N||L||j||A||F||(s!==S||l!==C)?m.a.create("PinResource",R).callUpdate().then(({resource_response:e})=>{if(this._isMounted){const{changeBoardPinCount:t,onSubmit:n,pinId:r,pinMoved:s,view:l,viewParameter:d}=this.props;(B||N)&&P&&O&&(s({selectedPinIds:[r],source:{boardId:O,sectionId:M},target:{boardId:P,sectionId:v}}),t({boardId:P,sectionId:v||void 0,increment:1}),t({boardId:O,sectionId:M||void 0,increment:-1})),n&&P&&k.url&&n({boardId:P,title:k.name,sectionId:v,url:k.url}),o(),i(r);const{data:u}=e;u.carousel_data&&(u.carousel_data.index=y),a(u);const h={};h.objectId=r,B&&(h.board_was_modified=!0),!B&&N&&(h.board_section_was_modified=!0),j&&(h.original_pin_description=c,h.edited_pin_description=w),F&&(h.original_carousel_data=JSON.stringify(this.sanitizeCarouselData(p)),h.edited_carousel_data=JSON.stringify(this.sanitizeCarouselData(x))),Object(te.a)(2,{component:208,view:l,viewParameter:d,...h})}}).catch(()=>{const{shouldShowValidationTitleError:e,shouldShowValidationDescriptionError:t,shouldShowValidationLinkFormatError:n}=this.state;this.setState({isProcessing:!1,shouldShowGenericUpdateError:!e&&!t&&!n})}):(o(),i(t)),this.setState({isProcessing:!1})}),ce(this,"handleTextChanges",(e,t)=>{const{carousel_data:n}=this.state;if(!n)return;const i=c()(n),{carousel_slots:a=[]}=i,{currentIndex:o,shouldApplyTextToAll:r,description:s,link:l,title:d}=this.state,u=this.valueIsValidForType(e,t);switch(r?a.forEach(n=>n[t]=e):a[o]&&(a[o][t]=e),t){case"details":const t=0===o?e:s;this.setState({description:t,carousel_data:i||null,shouldShowValidationDescriptionError:!u,shouldShowGenericUpdateError:!1});break;case"link":const n=0===o?e:l;this.setState({link:n,carousel_data:i||null,shouldShowValidationLinkFormatError:!u,shouldShowGenericUpdateError:!1});break;case"title":const a=0===o?e:d;this.setState({title:a,carousel_data:i||null,shouldShowValidationTitleError:!u,shouldShowGenericUpdateError:!1})}}),ce(this,"handleDescriptionChange",({value:e})=>{const t=this.valueIsValidForType(e,"description");this.setState({description:e,userNote:e,shouldShowValidationDescriptionError:!t,shouldShowGenericUpdateError:!1})}),ce(this,"handleUserMentionTagsChange",({userMentionTags:e})=>{const t=this.valueIsValidForType(e,"userMentionTags");this.setState({userMentionTags:e,shouldShowValidationUserMentionTagsError:!t,shouldShowGenericUpdateError:!1})}),ce(this,"handleCarouselDetailsChange",({value:e})=>{this.handleTextChanges(e,"details")}),ce(this,"handleTitleChange",({value:e})=>{const t=this.valueIsValidForType(e,"title");this.setState({title:e,shouldShowValidationTitleError:!t,shouldShowGenericUpdateError:!1})}),ce(this,"handleCarouselTitleChange",({value:e})=>{this.handleTextChanges(e,"title")}),ce(this,"valueIsValidForType",(e,t)=>{switch(t){case"details":case"description":return e.length<=500;case"link":return e.length>=0&&0===Object(le.q)([Object(le.p)({message:S.a._("Not a valid url.","Validation error for an improperly formated url","Validation error for an improperly formated url")})],e).length;case"title":return e.length<=100;case"userMentionTags":return e.length<=5;default:return!0}}),ce(this,"handleWebsiteChange",({value:e})=>{const t=this.valueIsValidForType(e,"link");this.setState({link:e,shouldDisableSave:!t,shouldShowValidationLinkFormatError:!t,shouldShowGenericUpdateError:!1})}),ce(this,"handleCarouselWebsiteChange",({value:e})=>{this.handleTextChanges(e,"link")}),ce(this,"handleCommentChange",e=>this.setState({commentsDisabled:!e.value})),ce(this,"handlePhotoChange",e=>this.setState({photosDisabled:!e.value})),ce(this,"handleShouldApplyToAll",e=>{if(e){const{currentIndex:t,carousel_data:n}=this.state;if(!n)return;const i=c()(n),{carousel_slots:a}=i,{details:o,link:r,title:s}=a[t];a.forEach(e=>{e.details=o,e.title=s,e.link=r}),this.setState({carousel_data:i,shouldApplyTextToAll:e})}else this.setState({shouldApplyTextToAll:e})}),ce(this,"handleCarouselSlider",e=>{const{carousel_data:t}=this.state,n=t&&t.carousel_slots&&t.carousel_slots.length||1;e>=0&&e<n&&this.setState({currentIndex:e})}),ce(this,"handleClickStoryPinPages",()=>{const{pinResource:{data:e},history:t}=this.props;e&&t.push(`/story-pin-builder/${e.id}/edit`)}),ce(this,"handleMouseEnter",()=>{this.setState({shouldShowCarouselSliders:!0})}),ce(this,"handleMouseLeave",()=>{this.setState({shouldShowCarouselSliders:!1})})}componentDidMount(){this._isMounted=!0,this.updateCarouselSlotIndex()}UNSAFE_componentWillReceiveProps(e){const{pinResource:{data:t,isLoaded:n},carouselSlotCurrentIndex:i}=e;t&&n!==this.props.pinResource.isLoaded&&this.setState({board:t.board,commentsDisabled:t.comments_disabled,description:t.description&&t.description.trim(),link:t.link,photosDisabled:t.did_it_disabled,sectionId:(t.section||{}).id,sectionName:(t.section||{}).title,title:t.title,userNote:t.unified_user_note,carousel_data:t.carousel_data,currentIndex:void 0!==i?i:t.carousel_data&&t.carousel_data.index||0,shouldApplyTextToAll:!1,userMentionTags:t.user_mention_tags||[]})}componentWillUnmount(){this._isMounted=!1}generateIndexIndicator(){const{currentIndex:e,carousel_data:t}=this.state,n=t&&t.carousel_slots&&t.carousel_slots.length||1;return n<2?"":a.a.createElement(x.c,{direction:"row",padding:2},a.a.createElement(x.q,{htmlFor:"CardsIndex"},a.a.createElement(x.K,{size:"md"},e+1,"/",n)))}render(){const{disableDelete:e,onHide:t,pinResource:n,pinId:i}=this.props,{apiErrorMessage:o,board:d,commentsDisabled:c,description:p,link:m,photosDisabled:g,sectionId:E,sectionName:f,showDeleteConfirmation:b,title:_,userNote:C,isProcessing:w,carousel_data:v,shouldApplyTextToAll:T,currentIndex:k,shouldDisableSave:R,shouldShowCarouselSliders:P,shouldShowValidationTitleError:O,shouldShowValidationDescriptionError:N,shouldShowValidationLinkFormatError:L,shouldShowGenericUpdateError:j,shouldShowValidationUserMentionTagsError:A,userMentionTags:F}=this.state,Y=n.data||{},z=v&&v.carousel_slots&&v.carousel_slots.length>0&&v.carousel_slots[k]||{},{details:q="",link:K="",title:Q=""}=z;if(b)return a.a.createElement(D,{onDeletePin:this.handleDeletePin,onDismiss:this.onHideConfirmation});const X=!!(Y&&Y.story_pin_data_id&&Y.story_pin_data),J=!!(v&&v.carousel_slots&&v.carousel_slots.length>1),te=Y&&(Y.access||[]).includes("write")||this.props.canEdit,ne=e=>te&&!Y.is_repin&&!(Y.aggregated_pin_data&&Y.aggregated_pin_data.is_shop_the_look)&&!X&&(J||!v)&&(Y.native_creator&&Y.native_creator.id===e.id||J&&Y.pinner&&Y.pinner.id===e.id||Y.link_domain&&Y.link_domain.official_user&&Y.link_domain.official_user.id===e.id||!!Y.domain&&Y.pinner&&Y.pinner.domain_url&&Y.pinner.domain_url.includes(Y.domain)),ie=e=>!ne(e),ae=e=>ie(e)?function(e){return e?S.a._("Note too long. Make sure all cards' notes have less than 500 characters","User note entered is too long while editing a carousel pin and/or one of its pins","User note entered is too long while editing a carousel pin and/or one of its pins"):S.a._("Note too long. Make sure note has less than 500 characters","User note entered is too long while editing a pin","User note entered is too long while editing a pin")}(J):function(e){return e?S.a._("Description too long. Make sure all cards' descriptions have less than 500 characters","Description entered is too long while editing a carousel pin and/or one of its pins","Description entered is too long while editing a carousel pin and/or one of its pins"):S.a._("Description too long. Make sure description has less than 500 characters","Description entered is too long while editing a pin","Description entered is too long while editing a pin")}(J),se=e=>N?ae(e):A?function(e){return S.a._("Too many mentions. Make sure you have at most 5.","editPinModal.errorMessages.userMentionOverLimit","Too many mentions used in the description")}():"",le=e=>J?q:ie(e)?C:p,de=Y&&Y.images&&Y.images["474x"]||{};return a.a.createElement(y.b,{heading:S.a._("Edit this Pin","Edit a previously saved pin","Edit a previously saved pin"),accessibilityModalLabel:S.a._("Edit your previously saved pin","Accessible label for edit previously saved pin modal","Accessible label for edit previously saved pin modal"),size:"lg",onDismiss:t,footer:a.a.createElement(x.c,{display:"flex",justifyContent:"between",marginStart:-1,marginEnd:-1},a.a.createElement(x.c,null,a.a.createElement(I.a,{id:"delete-pin-button"},a.a.createElement(x.d,{text:S.a._("Delete"),onClick:this.onClickDeleteButton,disabled:e}))),j&&a.a.createElement(x.c,{display:"flex",marginStart:2,marginTop:2,justifyContent:"center"},a.a.createElement(B.a,{errorMessage:o||S.a._("Sorry! There was an error editing your Pin.","Toast for pin edit error","Toast for pin edit error"),htmlFor:"pin-edit-generic-error"})),a.a.createElement(h.a,null,e=>a.a.createElement(x.c,{display:"flex",justifyContent:"between",marginStart:-2,marginEnd:-2},a.a.createElement(x.c,{paddingX:2},a.a.createElement(x.d,{text:S.a._("Cancel"),onClick:t})),a.a.createElement(x.c,{paddingX:2,"data-test-id":"edit-pin-save"},a.a.createElement(x.d,{text:S.a._("Save"),color:"red",onClick:this.triggerBoardAndSectionCreate(e),disabled:R})))))},!n.isLoaded||w?a.a.createElement(x.c,{paddingX:12,paddingY:9},a.a.createElement(x.G,{accessibilityLabel:S.a._("loading","Accessible label for the edit pin loading icon","Accessible label for the edit pin loading icon"),show:!0})):a.a.createElement(h.a,null,e=>a.a.createElement(x.c,{md:{display:"flex"},justifyContent:"between",minHeight:350,paddingX:4},a.a.createElement(x.c,{xs:{column:12},md:{column:9}},a.a.createElement(M,{board:d||Y.board,canEdit:te,onBoardChange:this.handleBoardChange,onBoardCreate:this.handleBoardCreateClick}),a.a.createElement(V,{board:d||Y.board,canEdit:te,currentSection:Y.section,onSectionChange:this.handleSectionChange,sectionId:E,sectionName:f,onSectionCreate:this.handleSectionCreateClick}),ie(e)?null:a.a.createElement(W,{canEdit:te,onTitleChange:J?this.handleCarouselTitleChange:this.handleTitleChange,title:J?Q:_,errorMessage:O?oe(J):""}),(Y.pinner||{}).id===e.id?a.a.createElement(U,{canEdit:te,description:le(e)||"",existingTags:F,errorMessage:se(e),label:ie(e)?S.a._("Note","Label for editing user note","Label for editing user note"):S.a._("Description","Label for editing description","Label for editing description"),placeholder:ie(e)?S.a._("Write a note about this Pin...","Placeholder for editing user note","Placeholder for editing user note"):S.a._("Tell us about this Pin...","Placeholder for editing description","Placeholder for editing description"),onDescriptionChange:J?this.handleCarouselDetailsChange:this.handleDescriptionChange,onUserMentionTagsChange:this.handleUserMentionTagsChange}):null,ne(e)&&a.a.createElement(G,{link:J?K:m,onChangeWebsite:J?this.handleCarouselWebsiteChange:this.handleWebsiteChange,errorMessage:L?re(J):""}),J&&a.a.createElement(x.c,{display:"flex",justifyContent:"end",paddingX:4,paddingY:3,alignItems:"end"},a.a.createElement(x.c,{paddingY:2},a.a.createElement(x.q,{htmlFor:"applyTextToAll"},a.a.createElement(x.K,null,S.a._("Apply text to all","Apply title, description, link to all cards","Apply title, description, link to all cards")))),a.a.createElement(x.c,{paddingX:2,paddingY:2},a.a.createElement(x.I,{onChange:e=>this.handleShouldApplyToAll(e.value),id:"applyTextToAll",switched:T}))),a.a.createElement(ee.a,{name:"web_pin_builder_story_pin",isEligible:X},({anyEnabled:t})=>{const{native_creator:n,story_pin_data:i}=Y;if(i){const o=n&&n.id===e.id,r=Object($.a)(i.metadata.compatible_version,Z.a);return X&&t&&o&&(0===r||-1===r)&&a.a.createElement(x.c,null,a.a.createElement(H,{onClick:this.handleClickStoryPinPages,storyPinData:i}))}return null}),Y.can_delete_did_it_and_comments&&a.a.createElement(u.a,{commentsDisabled:c,onCommentChange:this.handleCommentChange,onPhotoChange:this.handlePhotoChange,photosDisabled:g})),a.a.createElement(x.c,{paddingX:4,paddingY:3,justifyContent:"center",direction:"column"},J?this.generateIndexIndicator():"",a.a.createElement(x.u,{width:236},a.a.createElement(x.c,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},a.a.createElement(x.u,{rounding:2,wash:!0},J&&P&&a.a.createElement(x.c,{width:"100%",height:"100%",display:"inlineBlock",position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:10,background:"rgba(0, 0, 0, 0.3)"}}},a.a.createElement(l.default,{handleCarouselSwipe:this.handleCarouselSlider,carouselIndex:k,carouselData:v,pinId:i,isEditMode:!0})),J?a.a.createElement(r.a,{carouselIndex:k,isCloseup:!1,carouselData:v,pinId:i,isEditMode:!0}):a.a.createElement(x.p,{alt:p,color:"#efefef",naturalHeight:de.height,src:de.url,naturalWidth:de.width})),J&&a.a.createElement(s.default,{carouselIndex:k,carouselData:v,pinId:i,handleCarouselSwipe:this.handleCarouselSlider,isEditMode:!0,variant:"legacy"})))))))}})},"8mez":function(e,t,n){function i(e,t,n){return{type:"PIN_BUILDER_ADD_PIN_DRAFT",payload:{pinDraftId:e,pinDraft:t,options:n}}}n.d(t,"a",(function(){return i}))},LeWa:function(e,t,n){n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r}));n("q1tI");var i=n("QkVN"),a=n.n(i);const o={text:"",srcUrl:"",canonicalUrl:"",imageSignature:"",imageUrl:"",isFetching:!1},r={backgroundColor:"#ffffff",blockIds:[],canvasJson:null,coverImgSignature:"",description:"",descriptionError:null,dominantColors:[],layout:null,linkBlock:o,linkError:null,media:null,selectedBlockId:null,signals:{},title:"",titleError:null};t.a=(e=r,t)=>{switch(t.type){case"PIN_DRAFT_ADD_STORY_PIN_ITEM":case"STORY_PIN_ITEM_UPDATE_DATA":{const{pinItem:n}=t.payload;return{...e,...n}}case"STORY_PIN_ITEM_SET_DESCRIPTION":{const{description:n}=t.payload;return{...e,description:n}}case"STORY_PIN_ITEM_SET_DESCRIPTION_ERROR":{const{descriptionError:n}=t.payload;return{...e,descriptionError:n}}case"STORY_PIN_ITEM_UPDATE_LINK_BLOCK":{const{linkBlock:n}=t.payload;return{...e,linkBlock:{...e.linkBlock,...n}}}case"STORY_PIN_ITEM_SET_LINK_ERROR":{const{linkError:n}=t.payload;return{...e,linkError:n}}case"STORY_PIN_ITEM_SET_MEDIA":{const{media:n}=t.payload;return{...e,media:n,canvasJson:null}}case"STORY_PIN_ITEM_UPDATE_MEDIA":{const{media:n}=t.payload;return{...e,media:e.media?a()({},e.media,n):null}}case"STORY_PIN_ITEM_SET_TITLE":{const{title:n}=t.payload;return{...e,title:n}}case"STORY_PIN_ITEM_SET_TITLE_ERROR":{const{titleError:n}=t.payload;return{...e,titleError:n}}case"STORY_PIN_ITEM_SET_EDITED_IMAGE":{const{editedMedia:n,canvasJson:i}=t.payload;return{...e,media:n,canvasJson:i}}case"STORY_PIN_ITEM_SET_SELECTED_BLOCK_ID":{const{blockId:n}=t.payload;return{...e,selectedBlockId:n}}case"STORY_PIN_ITEM_SET_BACKGROUND_COLOR":{const{backgroundColor:n}=t.payload;return{...e,backgroundColor:n}}case"STORY_PIN_ITEM_SET_COVER_IMAGE_SIGNATURE":{const{coverImgSignature:n}=t.payload;return{...e,coverImgSignature:n}}case"STORY_PIN_ITEM_SET_LAYOUT":{const{layout:n}=t.payload;return{...e,layout:n}}case"STORY_PIN_ITEM_SET_DOMINANT_COLORS":{const{dominantColors:n}=t.payload;return{...e,dominantColors:n}}case"STORY_PIN_ITEM_ADD_BLOCK":{const{blockId:n}=t.payload,{blockIds:i}=e;return{...e,blockIds:[...i,n]}}case"STORY_PIN_ITEM_REMOVE_BLOCK":{const{blockId:n}=t.payload,{blockIds:i}=e;return{...e,blockIds:[...i.filter(e=>e!==n)]}}default:return e}}},MfYO:function(e,t,n){n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"l",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return c})),n.d(t,"k",(function(){return u})),n.d(t,"j",(function(){return h})),n.d(t,"i",(function(){return p})),n.d(t,"a",(function(){return m}));const i=20,a=375,o=a-40,r=665,s=72,l=40,d=10,c=28,u=l+2*d,h=s/4,p=840,m=`${a}px 128px`},NXrh:function(e,t,n){n.d(t,"a",(function(){return b}));var i=n("q1tI"),a=n.n(i),o=n("/MKj"),r=n("Sihc"),s=n("Ye/N"),l=n("rrvb"),d=n("fArA"),c=n("0BOE"),u=n("jdx6"),h=n("qyR9"),p=n("zLLH"),m=n("n6mq");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E="NO_SECTION_VALUE";function f({section:e,hovered:t,searchQuery:n}){return a.a.createElement(m.c,null,a.a.createElement(m.c,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2},a.a.createElement(m.c,{flex:"grow"},a.a.createElement(m.K,{weight:"bold"},Object(u.b)(n,e.title)))),e.id===E&&a.a.createElement(m.j,null))}const b=class extends i.Component{constructor(...e){super(...e),g(this,"state",{searchQuery:""}),g(this,"getPickerSections",()=>{const{searchQuery:e}=this.state,{sectionsResource:t,mergingFromSectionId:n}=this.props;let i=t&&t.data||[];return i=n?i.filter(e=>e.id!==n):[{id:E,title:s.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit")},...i],e.length>=h.a&&(i=Object(c.a)(i,e,"title")),[{items:i}]}),g(this,"createBtnDisabled",()=>{const{sectionsResource:e}=this.props,{searchQuery:t}=this.state;return!(!e||!e.data)&&e.data.some(e=>e.title.toLowerCase()===t.toLocaleLowerCase())}),g(this,"handleSectionCreate",()=>{const{board:e,onSectionChange:t,sectionsResource:n,dispatch:i,onSectionCreate:a}=this.props,{searchQuery:o}=this.state;a?a(o):i&&e.id&&i(Object(r.a)({boardId:e.id,name:o})).then(e=>{n&&n.refreshData(),this.setState({searchQuery:""}),t(e)})}),g(this,"handleSectionSelected",e=>{const{onSectionChange:t}=this.props;e.id===E?(t(null),this.setState({searchQuery:""})):(t(e),this.setState({searchQuery:""}))}),g(this,"handleSearchQueryUpdate",e=>{this.setState({searchQuery:e})}),g(this,"renderRow",({item:e,hovered:t})=>{const{searchQuery:n}=this.state;return a.a.createElement(f,{section:e,hovered:t,searchQuery:n})})}componentDidUpdate(e){const t=e.selectedSectionId,{selectedSectionId:n}=this.props;if(n!==t){const{sectionsResource:e}=this.props;e&&e.refreshData()}}render(){const{sectionsResource:e,selectedSectionId:t,mergingFromSectionId:n,selectedSectionName:i}=this.props,{searchQuery:o}=this.state;let r=n?s.a._("Pick a section","default dropdown option for selecting a board section to merge to","default dropdown option for selecting a board section to merge to"):s.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit");if(t){let n;e&&e.data&&(n=e.data.find(e=>e.id===t)),r=n&&n.title||r}else i&&(r=i);return a.a.createElement(m.c,null,a.a.createElement(m.G,{accessibilityLabel:s.a._("loading section picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!!e&&!e.isLoaded}),(!e||e&&e.isLoaded)&&a.a.createElement(l.a,{dropdownValue:r,onCreate:n?null:this.handleSectionCreate,onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleSectionSelected,renderRow:this.renderRow,searchQuery:o,sections:this.getPickerSections(),createBtnDisabled:this.createBtnDisabled()}))}};t.b=Object(d.compose)(Object(o.connect)(),Object(p.c)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id})},{allowStale:!1}))(b)},Q7uW:function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("q1tI"),a=n("n6mq");function o(e){const{htmlFor:t,errorMessage:n}=e;return i.createElement(a.q,{htmlFor:t},i.createElement(a.c,{marginTop:1},i.createElement(a.K,{color:"red",size:"md"},n)))}},V711:function(e,t,n){var i=n("q1tI"),a=n.n(i),o=n("/MKj"),r=n("8cMa"),s=n("kwau"),l=n("JW66"),d=n("Ye/N"),c=n("rrvb"),u=n("zLLH"),h=n("0BOE"),p=n("jdx6"),m=n("Wer7"),g=n("qyR9"),E=n("n6mq"),f=n("fArA"),b=n("oN2T");function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S({board:e,hovered:t,searchQuery:n}){const i=e.privacy===l.a.BoardPrivacy.SECRET;return a.a.createElement(E.c,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2},a.a.createElement(E.c,{flex:"grow"},a.a.createElement(E.K,{weight:"bold"},Object(p.b)(n,e.name))),a.a.createElement(E.c,{display:"flex",flex:"none",direction:"row"},i&&a.a.createElement(r.a,{type:"secret"}),e.is_collaborative&&a.a.createElement(r.a,{type:"group"})))}t.a=Object(f.compose)(Object(o.connect)((function(e){const{advertiser:t,viewer:n}=e,i=n.isAuth&&t&&t.owner_user_id!==n.id;return{advertiser_id:i?t.id:null,username:i?t.owner_user_id:null}}),(function(e){return{invalidateBoardPickerBoardsResource:()=>{e(Object(m.f)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))},createBoard:t=>e(Object(b.f)(t))}})),Object(u.c)({name:"BoardPickerBoardsResource",key:"boardResource",options:e=>({pin_id:e.pinId,field_set_key:"board_picker",onlyFetchBoards:!0,username:e.username,...e.advertiser_id&&e.username?{advertiser_id:e.advertiser_id,filter:"protected",username:e.username}:{}})},{allowStale:!1}))(class extends i.Component{constructor(e,t){super(e,t),_(this,"getSections",()=>{const{searchQuery:e}=this.state,{boardResource:{data:{all_boards:t}}}=this.props;return e.length>=g.a?[{items:Object(h.a)(t,e)}]:[{items:t}]}),_(this,"createBtnDisabled",()=>{const{boardResource:{data:{all_boards:e}}}=this.props,{searchQuery:t}=this.state;return e.some(e=>e.name.toLowerCase()===t.toLowerCase())}),_(this,"handleBoardCreate",e=>()=>{const{searchQuery:e}=this.state;if(!e)return;const{createBoard:t,invalidateBoardPickerBoardsResource:n,onBoardCreate:i}=this.props;n(),i?i(e):t({name:e,privacy:"public"}).then(e=>{const{onBoardChosen:t}=this.props;t(e)})}),_(this,"handleBoardSelected",e=>{this.props.onBoardChosen(e),this.setState({selectedBoard:e})}),_(this,"handleSearchQueryUpdate",e=>{this.setState({searchQuery:e})}),_(this,"renderRow",({item:e,hovered:t})=>{const{searchQuery:n}=this.state;return a.a.createElement(S,{board:e,hovered:t,searchQuery:n})}),this.state={searchQuery:"",selectedBoard:e.board}}render(){const{boardResource:e,board:t}=this.props,{searchQuery:n,selectedBoard:i}=this.state;let o=d.a._("Select a board","Label for selecting a board in Edit Pin Modal","Label for selecting a board in Edit Pin Modal");return t?o=t.name:i&&(o=i.name),a.a.createElement(E.c,null,a.a.createElement(E.G,{accessibilityLabel:d.a._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!e.isLoaded}),e.data&&a.a.createElement(s.a,null,e=>a.a.createElement(c.a,{dropdownValue:o,onCreate:this.handleBoardCreate(e),onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleBoardSelected,renderRow:this.renderRow,searchQuery:n,sections:this.getSections(),createBtnDisabled:this.createBtnDisabled()})))}})},X9vl:function(e,t,n){n.d(t,"a",(function(){return d}));var i=n("q1tI"),a=n("vgrb"),o=n("MfYO"),r=n("n6mq");const s={width:o.l,height:o.f},l={transition:Object(a.a)({property:"height",duration:"short",timingFunction:"easeOut"})};function d(e){const{index:t,pinItem:n}=e,{description:a,title:d}=n,c=0===t;return i.createElement(i.Fragment,null,i.createElement(r.c,{display:"flex",direction:"column",rounding:2,justifyContent:"center",width:o.l,height:o.f,overflow:"hidden",dangerouslySetInlineStyle:{__style:{backgroundColor:"black"}}},function(e){const{description:t,media:n,title:a}=e,{height:o,src:l,width:d,type:c}=n||{};if(!n)return null;if("localVideo"===c)return i.createElement(i.Fragment,null,i.createElement("video",{muted:!0,src:l,style:s},i.createElement("track",{kind:"captions"})));if(n&&"webVideo"===n.type){const{customCoverImg:e}=n||{};return i.createElement(r.p,{alt:a||t,color:"#FEFEFE",src:e&&e.src||"",naturalHeight:o,naturalWidth:d})}return i.createElement(r.p,{alt:a||t,color:"#FEFEFE",src:l,naturalHeight:o,naturalWidth:d})}(n)),i.createElement(r.c,{height:!d&&!a||c?0:o.j,color:"white",rounding:2,column:12,position:"absolute",bottom:!0,dangerouslySetInlineStyle:{__style:l}}))}},a9HN:function(e,t,n){n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return h}));var i=n("8mez"),a=n("qfnd"),o=n("xk4V"),r=n.n(o),s=n("q/rS"),l=n("LeWa");function d(e){if(e.image){const{height:t,url:n,width:i}=e.image.images["345x"]||e.image.images["236x"];return{height:t,src:n,width:i,id:r()(),signature:e.image_signature,type:"webImage"}}if(e.video&&e.video.video_list&&e.video.video_list.V_HLSV3_MOBILE){const{height:t,width:n,url:i,thumbnail:a}=e.video.video_list.V_HLSV3_MOBILE;return{id:r()(),width:n,height:t,src:i,customCoverImg:{src:a},type:"webVideo",signature:e.video_signature}}return null}function c(e){var t;if(!e||e.type!==s.a.LINK)return l.c;const{text:n="",src_url:i="",canonical_url:a="",normalized_url:o="",image:r,image_signature:d}=e;return{text:n,srcUrl:i,canonicalUrl:a,normalizedUrl:o,imageUrl:(null===(t=r.images.originals)||void 0===t?void 0:t.url)||r.images["345x"].url,imageSignature:d,isFetching:!1}}function u(e){const t=e.blocks.filter(e=>1===e.block_type)[0],n=e.blocks.filter(e=>0===e.block_type)[0],i=e.blocks.filter(e=>4===e.block_type)[0];return{...l.b,title:t&&t.text||"",description:n&&n.text||"",linkBlock:c(i),media:d(e)}}function h(e){return(t,n)=>{e&&e.story_pin_data&&t(function(e){return(t,n)=>{const{id:o,board:r,section:s,story_pin_data:l}=e,d={mode:"edit",selectedItem:{boardId:r.id,title:s?s.title:r.name,...s?{sectionId:s.id}:{}},type:"story",status:"saved",pinItemIds:[],pinItemIndex:0};t(Object(i.a)(o,d)),l&&l.pages.map(u).forEach((e,n)=>{t(Object(a.a)(o,n.toString(),e,{saveIndex:!0}))})}}(e))}}},dtqy:function(e,t,n){var i=n("q1tI"),a=n.n(i),o=n("/MKj"),r=n("qWlA"),s=n("5S2N"),l=n("fArA"),d=n("U4JR");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(l.compose)(Object(o.connect)(({pins:e},{pinId:t,carouselSlotCurrentIndex:n})=>{const{carousel_data:i}=e&&t&&e[t]||{},{index:a}=i||{};return void 0!==n?{carouselSlotCurrentIndex:a||n||0}:{}}),(function(e){return class extends i.PureComponent{constructor(...e){super(...e),c(this,"state",{showEditModal:!1}),c(this,"onHide",()=>{this.setState({showEditModal:!1}),this.props.onToggleModal&&this.props.onToggleModal(!1)}),c(this,"handlePinEditButtonClick",Object(r.a)(e=>{e&&e.stopPropagation();const{component:t,onToggleModal:n}=this.props;n&&n(!0),Object(d.a)(101,{element:3,...t?{component:t}:{}}),this.setState({showEditModal:!0})}))}render(){const{pinId:t,onDelete:n,onSubmit:o,carouselSlotCurrentIndex:r}=this.props,{showEditModal:l}=this.state,d={...this.props,handlePinEditButtonClick:this.handlePinEditButtonClick};return a.a.createElement(i.Fragment,null,a.a.createElement(e,d),l&&a.a.createElement(s.a,{carouselSlotCurrentIndex:r,onDelete:n,onHide:this.onHide,onSubmit:o,pinId:t}))}}}))},qfnd:function(e,t,n){function i(e,t,n,i){return{type:"PIN_DRAFT_ADD_STORY_PIN_ITEM",payload:{pinDraftId:e,pinItemId:t,pinItem:n,options:i}}}n.d(t,"a",(function(){return i}))},rrvb:function(e,t,n){var i=n("q1tI"),a=n("Ye/N"),o=n("9QW3"),r=n("NdQN"),s=n("IBrh"),l=n("gdcG"),d=n("n6mq");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(l.a)(class extends i.Component{constructor(...e){super(...e),c(this,"state",{showFlyout:!1}),c(this,"setContainerRef",e=>{this.containerRef=e}),c(this,"handleCreate",()=>{this.hideFlyout();const{onCreate:e}=this.props;e&&e()}),c(this,"handleSelectItem",e=>{this.hideFlyout();const{onSelect:t,onCreate:n}=this.props;e?t(e):n&&n()}),c(this,"handleDropdownTouch",()=>{this.setState(e=>({showFlyout:!e.showFlyout}))}),c(this,"handleHideFlyout",e=>{this.containerRef&&e.target instanceof HTMLElement&&!this.containerRef.contains(e.target)&&this.hideFlyout()}),c(this,"hideFlyout",()=>{const{hoverHandlers:{onMouseLeave:e}}=this.props;e(),this.setState({showFlyout:!1})})}componentDidMount(){document.addEventListener("click",this.handleHideFlyout,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleHideFlyout,{capture:!0})}render(){const{dropdownValue:e,fetchMore:t,hoverHandlers:{onMouseOver:n,onMouseLeave:l},isHovering:c,onCreate:u,onSearchQueryUpdate:h,renderRow:p,searchQuery:m,sections:g,createBtnDisabled:E}=this.props,{showFlyout:f}=this.state;this.indexManager=new o.a(g.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem);const b=!m.trim()||!!E;return i.createElement("div",{ref:this.setContainerRef},i.createElement(d.P,{onMouseEnter:n,onMouseLeave:l,onTouch:this.handleDropdownTouch,fullWidth:!1,rounding:2},i.createElement(d.c,{alignItems:"center",color:c?"lightWash":"lightGray",direction:"row",display:"flex",flex:"grow",paddingX:4,paddingY:3,rounding:2},i.createElement(d.c,{display:"flex",flex:"grow"},i.createElement(d.K,{weight:"bold"},e)),i.createElement(d.n,{icon:"arrow-down",size:14,color:"darkGray",accessibilityLabel:""}))),f&&i.createElement(d.c,{position:"relative"},i.createElement(d.c,{rounding:2,color:"white",display:"flex",direction:"column",overflow:"hidden",position:"absolute",width:"100%",borderSize:"sm",dangerouslySetInlineStyle:{__style:{zIndex:1}}},i.createElement(d.c,null,i.createElement(d.c,{display:"flex",padding:2,marginStart:-1,marginEnd:-1},i.createElement(d.c,{display:"flex",flex:"grow",paddingX:1},i.createElement(r.a,{hideIcon:!0,indexManager:this.indexManager,onChange:h,value:m})),u&&i.createElement(d.c,{paddingX:1},i.createElement(d.d,{disabled:b,inline:!0,onClick:this.handleCreate,text:a.a._("Create","board or section dropdown create button","board or section dropdown create button")})))),i.createElement(s.a,{fetchMore:t,indexManager:this.indexManager,maxHeight:240,onSelectItem:this.handleSelectItem,renderItem:p,sections:g}))))}})},vgrb:function(e,t,n){n.d(t,"a",(function(){return o}));const i={instant:85,short:250,medium:420,semiLong:500,long:800},a={easeIn:"0.9, 0.025, 0.75, 0.625",easeOut:"0.25, 0.375, 0.1, 0.975",easeInOut:"0.66, 0.025, 0.33, 0.975",linear:"0.5, 0.5, 1.0, 1.0",spring:"1, 100, 17, 8"};function o({property:e,duration:t,timingFunction:n,delay:o}){const r=o?` ${o}ms`:"";return`${e} ${"number"==typeof t?`${t}ms`:`${i[t]}ms`} cubic-bezier(${a[n]})${r}`}},xOLo:function(e,t,n){n.r(t),n.d(t,"CarouselSliders",(function(){return g}));var i=n("q1tI"),a=n.n(i),o=n("/MKj"),r=n("XSD5"),s=n("ZbwW"),l=n("Ye/N"),d=n("0nTG"),c=n("U4JR"),u=n("n6mq");const h={slider:{cursor:"pointer",height:"100%",position:"relative",width:"10%",zIndex:"105",pointerEvents:"auto"}},p=(e,t,n,i,a,o,r,s,l,u)=>{if(!u||!a){const{carousel_slots:u,id:h}=a;Object(c.a)(108,{...l,objectId:t,component:s,view:r,viewParameter:o,eventData:{pinCarouselSlotEventData:{carouselSlotId:u[n]&&Number(u[n].id),carouselDataId:Number(h),carouselSlotIndex:n,toCarouselSlotIndex:i}},...Object(d.a)(e)||{}})}},m=(e,t,n,i,a,o)=>{o||void 0===i||(e.preventDefault(),e.stopPropagation(),i(t,n)),void 0!==a&&a(n)},g=({carouselIndex:e,carouselData:t,changeCarouselSlotIndex:n,handleCarouselSwipe:i,pin:o,pinId:r,contextLogData:s,viewParameter:d,viewType:c,componentType:g,isEditMode:E})=>{if(!t)return null;const{carousel_slots:f,index:b}=t,_=void 0!==e?e:b,S=Math.max(0,_-1),y=Math.min(f.length-1,_+1);return a.a.createElement(u.c,{display:"flex",justifyContent:"between",position:"absolute",left:!0,right:!0,bottom:!0,top:!0},a.a.createElement("div",{"data-test-id":"carousel-slider-left",role:"presentation",onClick:e=>{m(e,r,S,n,i,E),p(o,r,_,S,t,d,c,g,s,E)},onKeyUp:e=>{m(e,r,S,n,i,E),p(o,r,_,S,t,d,c,g,s,E)},style:h.slider},_>0&&a.a.createElement(u.c,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},a.a.createElement(u.n,{color:"white",icon:"arrow-back",accessibilityLabel:l.a._("View Previous","Button to advance carousel to the previous image","Button to advance carousel to the previous image")}))),a.a.createElement("div",{"data-test-id":"carousel-slider-right",role:"presentation",onClick:e=>{m(e,r,y,n,i,E),p(o,r,_,y,t,d,c,g,s,E)},onKeyUp:e=>{m(e,r,y,n,i,E),p(o,r,_,y,t,d,c,g,s,E)},style:h.slider},_<f.length-1&&a.a.createElement(u.c,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},a.a.createElement(u.n,{color:"white",icon:"arrow-forward",accessibilityLabel:l.a._("View Next","Button to advance carousel to the next image","Button to advance carousel to the next image")}))))};t.default=Object(o.connect)(({pins:e},{carouselData:t,pinId:n})=>{const i=e[n];return{pin:i,carouselData:t||Object(s.a)(i)}},e=>({changeCarouselSlotIndex:(t,n)=>e(Object(r.a)(t,n))}))(g)}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/pjs-22-06884ce948bd7b8d29ce.mjs.map
