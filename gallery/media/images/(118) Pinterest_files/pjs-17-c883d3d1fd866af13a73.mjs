(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[17,"AuthHandshakeCommon"],{"0Bqi":function(e,t,n){var a=n("q1tI"),r=n.n(a),o=n("q23S"),s=n("Ye/N"),i=n("KNE1"),c=(n("17x9"),n("28DW")),l=n("n6mq");const u={mask:{backgroundColor:"rgba(0, 0, 0, 0.6)",opacity:1,position:"fixed",top:"0px",bottom:"0px",left:"0px",right:"0px",zIndex:1e3},scroller:{WebkitOverflowScrolling:"touch",overflowY:"scroll",bottom:"0px",left:"0px",right:"0px",top:"0px",position:"fixed",WebkitBoxOrient:"vertical",WebkitBoxDirection:"normal",WebkitFlexDirection:"column",msFlexDirection:"column",flexDirection:"column",WebkitJustifyContent:"space-around",msFlexPack:"distribute",justifyContent:"space-around"},modalContainer:{display:"flex",minHeight:"0px",position:"relative",opacity:1,borderRadius:"6px",margin:"0 auto"},closeButton:{backgroundColor:"Transparent",backgroundRepeat:"no-repeat",border:"none",outline:"none",overflow:"hidden",padding:"10px",position:"fixed",right:"24px",top:"24px"}};var d=e=>{const t=e=>{Object(c.a)(`unauth.account_switcher_modal.${e}`)},{renderContent:n}=e;return r.a.createElement("div",{style:u.mask},r.a.createElement(i.a,{unsafeCSS:"\n.AccountSwitcherModal {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n"}),r.a.createElement("div",{className:"AccountSwitcherModal",onClick:()=>{t("empty_space_click");const{onCloseClick:n}=e;n()},role:"dialog",style:u.scroller},r.a.createElement("div",{onClick:e=>{e.stopPropagation()},role:"dialog",style:u.modalContainer},n(),r.a.createElement("button",{"aria-label":s.a._("close","accessible label for close button","accessible label for close button"),onClick:()=>{t("close_button_click");const{onCloseClick:n}=e;n()},style:u.closeButton},r.a.createElement(l.n,{accessibilityLabel:s.a._("close","accessible label for close button","accessible label for close button"),color:"white",icon:"cancel",inline:!0})))))},h=n("3fKP");function p(e){return a.createElement(d,{onCloseClick:()=>{e.onClose&&e.onClose()},renderContent:()=>a.createElement(l.c,{display:"flex",justifyContent:"center",flex:"grow","data-test-id":"account-switcher-modal"},a.createElement(o.a,{container:e.container,email:e.email,isAccountSwitch:!0,isModal:!0,hideAccountSwitchValueProp:e.hideAccountSwitchValueProp,type:h.b.login,signupSource:h.b.login,customLoginTagline:e.customTaglineText||s.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account","Short text on the button that allows a user to log in to another Pinterest account")}))})}n.d(t,"a",(function(){return p}))},"0G5S":function(e,t,n){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o}));const a=(e,t=null)=>{try{return"undefined"!=typeof window&&window.localStorage.getItem(e)||t}catch(n){return console.error("Cannot access localStorage."),t}},r=e=>{try{if("undefined"==typeof window)return;window.localStorage.removeItem(e)}catch(t){console.error("Cannot access localStorage.")}},o=(e,t)=>{try{if("undefined"==typeof window)return;window.localStorage.setItem(e,t)}catch(n){console.error("Cannot access localStorage.")}}},"1yPP":function(e,t,n){},"3fKP":function(e,t,n){n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o}));const a={login:"login",loginMfa:"loginMfa",signup:"signup",personalizedLogin:"personalizedLogin",socialSignupWithAge:"socialSignupWithAge",FBEmailRerequest:"FBEmailRerequest",FBEmailCollection:"FBEmailCollection",emailConfirmation:"emailConfirmation",magicLinkConfirmation:"magicLinkConfirmation",FBEmailAlreadyExist:"FBEmailAlreadyExist"},r={login:"login",loginMfa:"loginMfa",signup:"signup",signupOrPersonalizedLogin:"signupOrPersonalizedLogin",socialSignupWithAge:"socialSignupWithAge",FBEmailRerequest:"FBEmailRerequest",emailConfirmation:"emailConfirmation",magicLinkConfirmation:"magicLinkConfirmation",FBEmailAlreadyExist:"FBEmailAlreadyExist",FBEmailCollection:"FBEmailCollection",respondMessage:"respondMessage"},o={boardPage:"boardPage",boardInvite:"boardInvite",defaultSource:"defaultSource",homePage:"homePage",mwebDefaultSource:"mwebDefaultSource",invite:"invite",login:"login",userFollow:"userFollow",userProfilePage:"userProfilePage",saveButton:"saveButton",actionButton:"actionButton",signupButton:"signupButton",personalizedFlyout:"personalizedFlyout",navigateBoard:"navigateBoard",navigatePin:"navigatePin",navigateInterest:"navigateInterest",unauthHeader:"unauthHeader",unauthBanner:"unauthBanner",visualSearch:"unauthVisualSearch",giftWrap:"giftWrap",loginMfa:"loginMfa"}},"4O/9":function(e,t,n){var a=n("Sxd8"),r="Expected a function";e.exports=function(e,t){var n;if("function"!=typeof t)throw new TypeError(r);return e=a(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}},CzMn:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var a=n("QLqj");function r(e){const t={};return e.forEach(e=>{const n=a.b.localStorage.getItem(e);n&&("signupInterestsPickerStartTime"===e?t.signupInterestsPickerTimeSpent=Date.now()-n:t[e]=n)}),JSON.stringify(t)}function o(){return r(["signupInterestsPickerScrollDown","signupInterestsPickerStartTime"])}function s(){return r(["signupTriedSkipInputName","signupTriedSkipGender","unauthTopicsFollowed"])}},HZII:function(e,t,n){var a=n("4O/9");e.exports=function(e){return a(2,e)}},Iucu:function(e,t,n){},L2Gz:function(e,t,n){n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return c}));var a=n("QLqj");function r(e,t){return e.some(e=>e.id===t.id)}function o(e){const t=[];if(e){const n=72e5,a=Date.now()-n;for(const r of e)r.ts>=a&&("string"==typeof r.image_signature&&t.push(r.image_signature),"string"==typeof r.first_pin_image_signature&&t.push(r.first_pin_image_signature))}return t}function s(){return{plpImages:o(a.b.localStorage.getItem("visitedPinLandingPagesBeforeLogin")||[]),blpImages:o(a.b.localStorage.getItem("visitedBoardLandingPagesBeforeLogin")||[])}}function i(e){return e.url.split("/").pop().replace(/(--.*|\.jpg)$/g,"")}function c(e){const t=e.log_data;return t&&JSON.parse(t).source||""}},QbJe:function(e,t,n){var a=n("q1tI"),r=n.n(a),o=n("/MKj"),s=(n("Iucu"),n("xdpg")),i=n("L2Gz"),c=n("Ye/N"),l=(n("1yPP"),n("n6mq"));const u=3,d=10,h=["blue","eggplant","green","maroon","midnight","navy","olive","orange","orchid","pine","purple","watermelon"];var p=r.a.memo((function(){const e=function(){const e=[];let t,n=0;for(let a=0;a<u;a+=1){e.push([]),t=[];for(let e=0;e<d;e+=1){const e=h[n];t.push(r.a.createElement(l.c,{padding:1},r.a.createElement(l.c,{color:e,height:168,rounding:4,width:112}))),(n+=3)>=h.length&&(n=a)}e[a].push(r.a.createElement("div",{key:a,className:`NuxEducationLoaderGrid__column${a}`},t))}return e}();return r.a.createElement("div",{className:"NuxEducationLoaderGrid"},e)}));const m=236,g=354;var _=r.a.memo((function({selectedInterest:e}){const t={label:c.a._("Food and Drink","Title for topic","Title for topic"),images:{"400x":{height:561,url:"https://i.pinimg.com/400x/10/31/0a/10310a3d860e8f7f2a5753612a870f5a.jpg",width:400}}},n={},{label:a,name:o,images:s}=e||t,{"400x":{url:i,height:u,width:d}}=s;n.domain=(a||o||"").trim().toLowerCase().replace(/\s/g,"").concat(".com"),n.imageHeight=u,n.imageWidth=d,n.imageUrl=i;const{domain:h,imageUrl:p,imageHeight:_,imageWidth:f}=n;return r.a.createElement("div",{className:"NuxEducationLoaderPin","data-test-id":"nux-loader-pin"},r.a.createElement(l.c,{height:g,position:"relative",top:!0,width:m},r.a.createElement("div",{className:"NuxEducationLoaderPin__pinImage"},r.a.createElement(l.u,{height:g,rounding:4,width:m},r.a.createElement(l.p,{alt:c.a._("Pin image","Pin image for nux loading step","Pin image for nux loading step"),color:"darkGray",fit:"cover",naturalHeight:_,naturalWidth:f,src:p})),r.a.createElement(l.c,{marginEnd:3,marginTop:3,position:"absolute",right:!0,top:!0},r.a.createElement("div",{className:"NuxEducationLoaderPin__pinSaveButton"},r.a.createElement(l.d,{accessibilityLabel:c.a._("Save button"),color:"red",size:"lg",text:c.a._("Save","save button for nux loading step","save button for nux loading step")}))),r.a.createElement(l.c,{bottom:!0,left:!0,margin:3,maxWidth:"90%",position:"absolute"},r.a.createElement("div",{className:"NuxEducationLoaderPin__pinLinkButton"},r.a.createElement(l.c,{alignItems:"center",color:"lightGray",display:"flex",justifyContent:"between",paddingX:3,paddingY:1,rounding:"pill"},r.a.createElement(l.c,{alignItems:"center"},r.a.createElement(l.n,{accessibilityLabel:c.a._("link","Pin website url link for nux loading step","Pin website url link for nux loading step"),color:"darkGray",icon:"arrow-up-right",size:12})),r.a.createElement(l.c,{flex:"grow",height:18,marginStart:2,overflow:"hidden"},r.a.createElement(l.K,{size:"sm",truncate:!0,weight:"bold"},h))))))))}));const f={backgroundColor:"#efefef"},b={transition:"width .4s ease-out"};function S(e,t){return Object.assign({},f,{height:e+"px",borderRadius:t})}function w(e,t){return Object.assign({},b,{width:e+"%",borderRadius:t})}var E=({color:e="darkGray",height:t=8,progress:n=0,outerBorderRadius:a="10px",innerBorderRadius:o="inherit"})=>r.a.createElement(l.c,{width:"100%",overflow:"hidden",dangerouslySetInlineStyle:{__style:S(t,a)}},r.a.createElement(l.c,{height:"inherit",color:e,dangerouslySetInlineStyle:{__style:w(n,o)}})),x=n("eOdZ"),y=n("joD6"),C=n("U4JR"),O=n("vVbV"),I=n("5239"),k=n("fArA");function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const T=300,P=5100,R=1e3;var v=Object(k.compose)(Object(o.connect)(null,e=>({dispatchSetNuxStepProgress:t=>e(Object(O.a)(t))})),y.a)(class extends a.PureComponent{constructor(...e){super(...e),N(this,"state",{progressPercent:0}),N(this,"incrementStepAndCompleteLoading",()=>{const{incrementNuxStep:e,isRenux:t}=this.props;if(e(),!t){x.a.create("UserStateResource",{state:I.n,value:I.a}).callCreate()}})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t}=this.props;if(!t){x.a.create("UserStateResource",{state:I.n,value:I.w}).callCreate()}e("loader"),Object(C.a)(13,{view:t?213:24,viewParameter:261}),this.intervalId=setInterval(()=>this.setState(e=>({progressPercent:Math.min(e.progressPercent+100/(P/T),100)})),T)}componentDidUpdate(e,t){this.state.progressPercent>=100&&(clearInterval(this.intervalId),setTimeout(this.incrementStepAndCompleteLoading,R))}componentWillUnmount(){clearInterval(this.intervalId)}render(){const{isRenux:e,selectedInterests:t,showProgressBar:n}=this.props,{progressPercent:a}=this.state,o=e?c.a._("We're refreshing your home feed with lots of new Pins...","Details for ReNUX loading step","Details for ReNUX loading step"):c.a._("We're building your home feed with lots of Pins...","Details for nux loading step","Details for nux loading step"),s=c.a._("They are links saved from around the web","Pin education on NUX loading step","Pin education on NUX loading step"),i=r.a.createElement(E,{height:10,innerBorderRadius:"0 32px 32px 0",outerBorderRadius:"32px 32px 0 0",progress:a});return r.a.createElement("div",{className:"NuxEducationLoader","data-test-id":"nux-complete-loader"},r.a.createElement(l.c,{alignItems:"center",direction:"row",display:"flex",height:"100%",justifyContent:"center",overflow:"hidden",width:"100%"},r.a.createElement(l.c,{marginEnd:7,marginStart:7}),r.a.createElement(l.c,{marginEnd:12,marginStart:10,position:"relative"},r.a.createElement("div",{className:"NuxEducationLoader__loadingCopyContainer"},r.a.createElement(l.m,{size:"md"},c.a._("All set!","Title for nux loading step","Title for nux loading step")),r.a.createElement(l.c,{marginTop:4},r.a.createElement(l.K,null,o))),r.a.createElement("div",{className:"NuxEducationLoader__pinEducationCopyContainer"},r.a.createElement(l.m,{size:"md"},c.a._("Pins are ideas","Pin education on NUX loading step","Pin education on NUX loading step")),r.a.createElement(l.c,{marginTop:4},r.a.createElement(l.K,null,s)))),r.a.createElement(l.c,{marginEnd:8,marginStart:12,paddingX:5},r.a.createElement(p,null)),r.a.createElement(l.c,null,r.a.createElement(_,{selectedInterest:t[0]}))),!n&&r.a.createElement(l.c,{height:10,position:"absolute",top:!0,width:"100%"},r.a.createElement(l.c,{height:65,overflow:"hidden",paddingX:2,rounding:8},i)))}}),A=n("IZzd"),L=n("028R"),j=n("0/lc");function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=Object(o.connect)(null,(e,t)=>({setNuxUpsellProgress:t=>e(Object(j.a)(I.k,t)),dispatchSetNuxStepProgress:t=>e(Object(O.a)(t))}))(class extends a.Component{constructor(...e){super(...e),U(this,"onInstallButtonClicked",()=>{const{isRenux:e}=this.props;A.a.handleExtensionInstall(this.incrementStepAndCompleteLoading),Object(C.a)(101,{component:17,element:280,view:e?213:24,viewParameter:260})}),U(this,"onSkipButtonClick",()=>{const{isRenux:e}=this.props;Object(C.a)(101,{component:17,element:1150,view:e?213:24,viewParameter:260}),this.incrementStepAndCompleteLoading()}),U(this,"incrementStepAndCompleteLoading",()=>{const{incrementNuxStep:e,isRenux:t,setNuxUpsellProgress:n}=this.props;t||n(I.a),e()})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxUpsellProgress:n}=this.props;t||n(I.w),e("extension"),Object(C.a)(13,{view:t?213:24,viewParameter:260})}render(){const{personalizationCopy:{headerText:e,subHeaderText:t}}=this.props;return r.a.createElement(L.a,{header:e,installClick:this.onInstallButtonClicked,skipClick:this.onSkipButtonClick,subheader:t})}}),B=(n("SPMB"),n("/5zs")),D=n("pLLR");function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const M=({isChecked:e,label:t,selectGender:n,value:o})=>r.a.createElement(a.Fragment,null,r.a.createElement(l.c,{"data-test-id":`nux-gender-${t}-label`},r.a.createElement(l.q,{htmlFor:t},r.a.createElement("div",{className:"NuxGenderSelector"},r.a.createElement(l.c,{alignItems:"center",display:"flex",flex:"none",height:60,paddingX:8},r.a.createElement(l.B,{checked:e,id:t,name:"genderOptions",onChange:n,size:"md",value:t}),r.a.createElement(l.c,{display:"flex",flex:"grow",marginStart:6},o)))))),z=({children:e})=>r.a.createElement(l.m,{size:"sm"},e);var H=Object(k.compose)(Object(o.connect)(({viewer:e})=>({gender:e.gender?e.gender:"",customGender:e.customGender?e.customGender:""}),(e,t)=>({dispatchSetNuxStepProgress:t=>e(Object(O.a)(t)),setNuxGenderProgress:t=>e(Object(j.a)(I.m,t)),updateGenderInfo:t=>e(Object(j.f)({updateUserData:t}))})),D.f)(class extends a.PureComponent{constructor(...e){super(...e),F(this,"state",{customGender:this.props.customGender,gender:this.props.gender,showCustomGenderTextfield:this.props.gender===I.z&&this.props.customGender.length>0,showNextButton:[I.i,I.g].includes(this.props.gender)||this.props.customGender.length>0,showCustomGenderDoneButton:this.props.gender===I.z&&this.props.customGender.length>0}),F(this,"setCustomGender",e=>{e.target instanceof HTMLInputElement&&e.target.value.trim().length>0?this.setState({customGender:e.target.value,showCustomGenderDoneButton:!0}):this.state.showNextButton&&e.target instanceof HTMLInputElement?this.setState({customGender:e.target.value,showCustomGenderDoneButton:!1}):this.setState({customGender:"",showCustomGenderDoneButton:!1})}),F(this,"handleCustomGenderSubmit",({event:e})=>{const{customGender:t}=this.state;"Enter"===e.key&&t.length>0&&this.updateGenderCompleteStep()}),F(this,"updateGenderCompleteStep",()=>{const{incrementNuxStep:e,isRenux:t,updateGenderInfo:n}=this.props,{customGender:a,gender:r}=this.state;n(r===I.z?{gender:I.z,custom_gender:a.slice(0,30)}:{gender:r}).then(()=>{this.setUserStateCompletedGenderStep(),Object(C.a)(101,{component:17,element:241,view:t?213:24,viewParameter:3120}),e()})})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxGenderProgress:n}=this.props;e("gender"),t||n(I.w),Object(C.a)(13,{view:t?213:24,viewParameter:3120})}onSelectGenderAsButtons(e){const{showCustomGenderTextfield:t}=this.state;e!==I.z||t?this.setState({gender:e},this.updateGenderCompleteStep):this.setState({gender:I.z,showCustomGenderTextfield:!0})}onSelectGender(e){const{requestContext:t}=this.props,{showCustomGenderTextfield:n,showNextButton:a}=this.state;a?this.setState({gender:e,showCustomGenderTextfield:e===I.z}):e===I.z&&new B.c(t,"web_hide_custom_gender_field").enabled()?this.setState({gender:I.z,showCustomGenderTextfield:!1},this.updateGenderCompleteStep):e===I.z||n?this.setState({gender:I.z,customGender:"",showCustomGenderTextfield:!n,showCustomGenderDoneButton:!1}):this.setState({gender:e},this.updateGenderCompleteStep)}setUserStateCompletedGenderStep(){const{isRenux:e,setNuxGenderProgress:t}=this.props;e||t(I.a)}render(){const{isRenux:e,personalizationCopy:{headerText:t,subHeaderText:n},requestContext:o}=this.props,{customGender:s,showCustomGenderDoneButton:i,showCustomGenderTextfield:u,showNextButton:d}=this.state,h=new B.c(o,"web_nux_gender_step_as_buttons").enabled(),p=c.a._("Female","nux.gender.femaleButton","Option for select female gender"),m=c.a._("Male","nux.gender.maleButton","Option for select male gender"),g=c.a._("Specify another","nux.gender.specifyButton","Option for gender besides male and female"),_=c.a._("Enter preferred gender","nux.gender.customGenderPlaceholder","placeholder text for custom gender text field"),f=c.a._("Submit","nux.gender.submitCustomGender","button text for submitting a custom gender type"),b=c.a._("Okay","nux.gender.submitCustomGender","button text for submitting a custom gender type"),S=u?r.a.createElement(a.Fragment,null,r.a.createElement(l.c,{"data-test-id":"nux-gender-unspecified-input",display:"flex",flex:"grow",marginEnd:!d&&i?3:0},r.a.createElement(l.c,{alignItems:"center",width:"100%"},r.a.createElement(l.M,{id:"customGender",onChange:({event:e})=>this.setCustomGender(e),placeholder:s||_,size:"lg"}))),!d&&i&&r.a.createElement("div",{"data-test-id":"nux-gender-unspecified-done-btn"},r.a.createElement(l.d,{color:"red",inline:!0,onClick:()=>this.updateGenderCompleteStep(),size:"lg",text:f}))):r.a.createElement(z,null,g);return r.a.createElement(l.c,{direction:"column",display:"flex",height:"100%",justifyContent:"start",paddingY:8,width:"100%"},r.a.createElement(l.c,{direction:"column",display:"flex",marginTop:11,paddingX:8,paddingY:8},e?r.a.createElement(l.c,{marginTop:8,paddingY:4},r.a.createElement(l.m,{align:"center",size:"md"},t),r.a.createElement(l.c,{marginTop:3},r.a.createElement(l.K,{align:"center"},n))):r.a.createElement(l.m,{align:"center",size:"lg"},t)),h?r.a.createElement(l.c,{marginTop:10,padding:8},r.a.createElement(l.c,{"data-test-id":`nux-gender-${I.g}-button`},r.a.createElement(l.d,{onClick:()=>this.onSelectGenderAsButtons(I.g),size:"lg",text:p})),r.a.createElement(l.c,{"data-test-id":`nux-gender-${I.i}-button`,marginTop:2},r.a.createElement(l.d,{onClick:()=>this.onSelectGenderAsButtons(I.i),size:"lg",text:m})),r.a.createElement(l.c,{display:"flex",flex:"grow",marginTop:2},u?r.a.createElement(a.Fragment,null,r.a.createElement(l.c,{"data-test-id":"nux-gender-unspecified-input",width:"100%"},r.a.createElement(l.M,{autoComplete:"off",id:"customGender",onChange:({event:e})=>this.setCustomGender(e),onKeyDown:this.handleCustomGenderSubmit,placeholder:_,size:"lg",value:s})),r.a.createElement(l.c,{"data-test-id":"nux-gender-unspecified-done-btn",marginStart:2},r.a.createElement(l.d,{color:"red",disabled:!s,onClick:this.updateGenderCompleteStep,size:"lg",text:b}))):r.a.createElement(l.c,{"data-test-id":`nux-gender-${I.z}-button`,width:"100%"},r.a.createElement(l.d,{onClick:()=>this.onSelectGenderAsButtons(I.z),size:"lg",text:g})))):r.a.createElement(l.c,{paddingY:8},r.a.createElement(M,{isChecked:!u&&this.state.gender.toLowerCase()===I.g,label:I.g,selectGender:()=>this.onSelectGender(I.g),value:r.a.createElement(z,null,p)}),r.a.createElement(M,{isChecked:!u&&this.state.gender.toLowerCase()===I.i,label:I.i,selectGender:()=>this.onSelectGender(I.i),value:r.a.createElement(z,null,m)}),r.a.createElement(M,{isChecked:u,label:I.z,selectGender:()=>this.onSelectGender(I.z),value:S})),d&&!h&&r.a.createElement(l.c,{"data-test-id":"nux_gender_next_btn",marginEnd:8,marginStart:8,marginTop:"auto"},r.a.createElement(l.d,{accessibilityLabel:c.a._("Next","go to next nux step","go to next nux step"),color:"red",disabled:u&&0===this.state.customGender.length,onClick:()=>this.updateGenderCompleteStep(),size:"lg",text:c.a._("Next","next nux step button","next nux step button"),type:"button"})))}}),W=n("xAAE");var $=e=>{const{defaultOptions:t,id:n,items:a,name:o,onChange:s,value:i}=e,c=(a.data||t||[]).sort((e,t)=>e.name.localeCompare(t.name)).map(({name:e,key:t})=>({label:e.toString(),value:t}));return r.a.createElement(l.F,{id:n,name:o,onChange:s,options:c,size:"lg",value:i})},K=n("zLLH"),X=Object(K.c)({name:"CountriesResource",key:"items"})($),q=Object(K.c)({name:"LocalesResource",key:"items"})($),Y=n("17x9"),V=n.n(Y),Q=n("QLqj");function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Z="Country";class ee extends a.PureComponent{constructor(...e){super(...e),J(this,"state",{locale:this.props.reduxLocale||(this.context||{}).locale||I.c,country:this.props.reduxCountry||(this.context||{}).country||I.b,swappingLanguage:!1,swappingCountry:!1}),J(this,"onNextButtonClick",()=>{const{incrementNuxStep:e,isRenux:t,updateUserInfo:n,setNuxLocaleProgress:a}=this.props,{country:r,locale:o}=this.state;n({updateUserData:{country:r,locale:o}}).then(()=>{t||a(I.a),Object(C.a)(101,{component:17,element:10374,view:24,viewParameter:3139}),e()})}),J(this,"updateLocale",({value:e})=>this.setState({locale:e})),J(this,"updateCountry",({value:e})=>this.setState({country:e}))}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxLocaleProgress:n}=this.props;t||n(I.w),e("country"),Q.b.localStorage.getItem("signupUserLocale")||Q.b.localStorage.getItem("signupUserCountry")||Object(C.a)(13,{view:24,viewParameter:3139})}componentDidUpdate(e,t){const{toggleLoadingIndicator:n,isBizNux:a,updateUserInfo:r}=this.props,{country:o,locale:s}=t,{country:i,locale:c}=this.state,l=o!==i,u=s!==c;(l||u)&&r({updateUserData:{country:i,locale:c}}).then(()=>{l&&(Q.b.localStorage.setItem("signupUserCountry",i),this.setState({swappingCountry:!0})),u&&(Q.b.localStorage.setItem("signupUserLocale",c),a?this.setState({swappingLanguage:!0}):n(!0),Object(W.a)("/"))})}render(){const{personalizationCopy:{headerText:e}}=this.props,{country:t,locale:n,swappingLanguage:a}=this.state;return r.a.createElement(l.c,{direction:"column",display:"flex",height:"100%",padding:8,width:"100%"},r.a.createElement(l.c,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginBottom:7},r.a.createElement(l.c,{marginTop:10,paddingY:5,width:"100%"},r.a.createElement(l.m,{align:"center",size:"md"},e)),r.a.createElement(l.c,{marginTop:12,paddingY:5,width:"100%"},r.a.createElement(l.c,{"data-test-id":"nux-locale-select"},r.a.createElement(q,{id:"newUserLanguage",name:"locale",onChange:this.updateLocale,value:n})),r.a.createElement(l.c,{"data-test-id":"nux-country-select",marginTop:4},r.a.createElement(X,{id:"newUserCountry",name:"country",onChange:this.updateCountry,value:t})))),r.a.createElement(l.c,{bottom:!0,"data-test-id":"nux-locale-country-next-btn"},r.a.createElement(l.d,{color:"red",disabled:a||t===Z,onClick:this.onNextButtonClick,size:"lg",text:c.a._("Next","go to next step","go to next step"),type:"submit"})))}}ee.contextTypes={country:V.a.string,locale:V.a.string};var te=Object(o.connect)(({viewer:e})=>({reduxCountry:e.country?e.country:"",reduxLocale:e.locale?e.locale:""}),(e,t)=>({updateUserInfo:t=>e(Object(j.f)(t)),setNuxLocaleProgress:t=>e(Object(j.a)(I.l,t)),dispatchSetNuxStepProgress:t=>e(Object(O.a)(t))}))(ee),ne=n("XocW"),ae=n("ozRy"),re=n("Cufx"),oe=n("V08O");const se={yellow:"#FAB904",orange:"#FF6400",green:"#0FA573",blue:"#0074e8",purple:"#B469EB"},ie="DelightfulBubbles__",ce=[`${ie}fadeIn {\n  to {\n    opacity: 1;\n  }\n}\n`,`${ie}growShrink {\n  0% {\n    transform: scale(0);\n  }\n  50% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n`,`${ie}swirl {\n  0% {\n    transform: rotate(0deg) translateX(-50%);\n  }\n  100% {\n    transform: rotate(-360deg) translateX(-50%);\n  }\n}\n`,...Object.keys(se).map(e=>{const t=((e,t)=>{const n=e.length,a=e.indexOf(t)+1>=n?0:e.indexOf(t)+1;return e[a]})(Object.keys(se),e);return`${ie}colorChange_${e} {\n      0% {\n        background-color: ${se[e]};\n      }\n      50% {\n        background-color: ${se[t]};\n      }\n    }\n    `})],le=Object(oe.a)(ce);function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const de=e=>{const{delay:t,diameter:n,height:a,initialColor:o,width:s,xOffset:i,yOffset:c}=e,u=((e,t,n,a,r,o,s,i)=>({bubblePositionStyles:{position:"absolute",marginLeft:`${o/2-r}px`,marginTop:`${n/2-r}px`,left:`${s}px`,top:`${i}px`},bubbleSwirlStyles:{animation:`${ie}swirl 6s ease-in-out ${e}s infinite forwards`,WebkitAnimation:`${ie}swirl 6s ease-in-out ${e}s infinite forwards`},bubbleGrowShrinkStyles:{transform:"scale(0)",WebkitTransform:"scale(0)",animation:`${ie}growShrink 6s ease-in-out ${e}s infinite alternate`,WebkitAnimation:`${ie}growShrink 6s ease-in-out ${e}s infinite alternate`},bubbleShapeStyles:{height:`${t}px`,width:`${t}px`,borderRadius:"50%",backgroundColor:se[a],opacity:0,animation:`${ie}colorChange_${a} 12s steps(1, start) ${e}s infinite forwards,\n      ${ie}fadeIn 3s linear ${e}s 1 forwards`,WebkitAnimation:`${ie}colorChange_${a} 12s steps(1, start) ${e}s infinite forwards,\n      ${ie}fadeIn 3s linear ${e}s 1 forwards`}}))(t,n,a,o,Math.floor(n/2),s,i,c);return r.a.createElement(l.c,{dangerouslySetInlineStyle:{__style:u.bubblePositionStyles}},r.a.createElement(l.c,{dangerouslySetInlineStyle:{__style:u.bubbleSwirlStyles}},r.a.createElement(l.c,{dangerouslySetInlineStyle:{__style:u.bubbleGrowShrinkStyles}},r.a.createElement(l.c,{dangerouslySetInlineStyle:{__style:u.bubbleShapeStyles}}))))};class he extends a.Component{constructor(...e){super(...e),ue(this,"state",{isInitialized:!1})}componentDidMount(){this.requestAnimationFrameId=window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}shouldComponentUpdate(e,t){return!e.numBubbles===this.props.numBubbles||!t.isInitialized===this.state.isInitialized}getSize(){const{width:e,height:t}=this.props;return void 0!==e&&void 0!==t?{width:e,height:t}:this.containerElement?{height:this.containerElement.offsetHeight,width:this.containerElement.offsetWidth}:{height:void 0,width:void 0}}createBubbles(e,t){const{bubbleSize:n,delayFactor:a,delayOffset:o,numBubbles:s,xRadiusAdjustment:i,yRadiusAdjustment:c}=this.props,l=e+2*c,u=t+2*i,d=[],h=Object.keys(se);for(let p=0;p<s;p+=1){const s=n+Object(oe.c)(-4,4),i=h[p%h.length],{x:c,y:m}=Object(oe.b)(l,u);d.push(r.a.createElement(de,{delay:p*a+o,diameter:s,initialColor:i,xOffset:c,yOffset:m,height:e,width:t,key:p}))}return d}render(){const{height:e,width:t}=this.getSize();return r.a.createElement(l.c,{height:e,width:t,position:"relative"},r.a.createElement("style",{dangerouslySetInnerHTML:{__html:le}}),r.a.createElement("div",{ref:e=>this.containerElement=e},this.state.isInitialized&&this.createBubbles(e||0,t||0),r.a.createElement(l.c,{position:"relative"},this.props.children)))}}ue(he,"defaultProps",{bubbleSize:16,numBubbles:10,xRadiusAdjustment:0,yRadiusAdjustment:0,delayFactor:1,delayOffset:0});var pe=he,me=n("lUXN"),ge=n("28DW"),_e=n("0S8y");function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const be=160,Se=120,we=44,Ee=71;var xe=Object(o.connect)(({viewer:e})=>({firstName:e.firstName?e.firstName:"",userEmail:e.isAuth?e.email:""}),e=>({dispatchSetNuxStepProgress:t=>e(Object(O.a)(t)),updateNameInfo:t=>e(Object(j.f)({updateUserData:t})),setNuxNameProgress:()=>e(Object(j.a)(I.r,I.a))}))(class extends a.PureComponent{constructor(...e){super(...e),fe(this,"state",{name:this.props.firstName,showAccountSwitchModal:!1,showNameInput:!1,showNoNameError:!1,showNameLengthError:!1}),fe(this,"onNameChange",({value:e})=>{this.setState({name:e||"",showNoNameError:!e||s.h(e),showNameLengthError:!!e&&e.length>30})}),fe(this,"toggleNameInput",()=>{this.setState(({showNameLengthError:e,showNoNameError:t,showNameInput:n})=>({showNameInput:e||t||!n})),Object(C.a)(101,{element:136,view:24,viewParameter:259})}),fe(this,"continueAndSave",()=>{const{firstName:e,incrementNuxStep:t,setNuxNameProgress:n,updateNameInfo:a}=this.props,{name:r}=this.state;a(Object(_e.a)(r)).then(()=>{n(),Object(C.a)(101,{element:96,view:24,viewParameter:259,did_edit_name:e!==r}),t()})}),fe(this,"getError",()=>{const{showNameLengthError:e,showNoNameError:t}=this.state;let n="";return t?n=c.a._("And your name is...?","Error flyout when user doesn't input name","Error flyout when user doesn't input name"):e&&(n=c.a._("Hmm, that's a few characters too long. Try a nickname instead?","Name exceeds 30 character maximum error","Name exceeds 30 character maximum error")),n}),fe(this,"handleHideAccountSwitcher",()=>this.setState({showAccountSwitchModal:!1})),fe(this,"handleNotYouClick",e=>{e.event.preventDefault(),Object(ge.a)("web.nux.click_login"),this.setState({showAccountSwitchModal:!0})})}componentDidMount(){this.props.dispatchSetNuxStepProgress("welcome"),Object(C.a)(13,{view:24,viewParameter:259})}render(){const{personalizationCopy:{headerText:e,subHeaderText:t},userEmail:n}=this.props,{name:o,showAccountSwitchModal:i,showNameInput:u}=this.state,d=t.indexOf(" ",Math.round(t.length/2)),h=s.c(c.a._("{{ titleText }}, {{ name }}!","Greeting with inferred name.","Greeting with inferred name."),{titleText:e,name:o}),p=h.indexOf(","),m=c.a._("Already have a Pinterest account?","subtitle to ask users who create a new account if they meant to log in to an existing account","subtitle to ask users who create a new account if they meant to log in to an existing account"),g=s.c(c.a._("You're signing up with {{ email }}","nux.welcomeStep.signupEmailUsed","Text telling users what email they are signing up with in case they meant to log in"),{email:n}),_=this.getError(),f=r.a.createElement(l.c,{dangerouslySetInlineStyle:{__style:{textAlign:"center"}},direction:"column",display:"flex",overflow:"hidden",width:"100%"},r.a.createElement(l.q,{htmlFor:"name"},r.a.createElement(l.c,{marginEnd:-1,marginStart:-1,marginTop:4},r.a.createElement(l.m,{align:"center",size:"md"},u?e:r.a.createElement(a.Fragment,null,h.substring(0,p),r.a.createElement(l.c,{height:we,marginStart:9,marginTop:4,paddingY:1},h.substring(p+1),r.a.createElement(l.c,{"data-test-id":"nux-edit-name-btn",display:"inlineBlock",marginStart:1},r.a.createElement(l.o,{accessibilityLabel:c.a._("Edit Name","Botton that allows editing the user's name","Botton that allows editing the user's name"),bgColor:"transparent",icon:"edit",iconColor:"darkGray",onClick:this.toggleNameInput,size:"sm"}))))))),u&&r.a.createElement(l.c,{alignItems:"center","data-test-id":"nux-edit-name-input",display:"flex",justifyContent:"center",marginTop:1,paddingY:1},r.a.createElement(l.c,{width:be},r.a.createElement(l.M,{errorMessage:_,id:"name",onChange:this.onNameChange,placeholder:c.a._("name"),size:"lg",type:"text",value:o})),r.a.createElement(l.c,{"data-test-id":"nux-update-name-btn",marginStart:2},r.a.createElement(l.d,{accessibilityLabel:c.a._("Submit","Button that stores the name of the updated user","Button that stores the name of the updated user"),color:"gray",inline:!0,onClick:this.toggleNameInput,size:"lg",text:c.a._("Submit","Button that stores the name of the updated user","Button that stores the name of the updated user")})))),b=e=>{switch(e){case"enabled":return"between";case"enabled_no_subheader":case"employees":return"around";default:return"start"}};return r.a.createElement(a.Fragment,null,i&&r.a.createElement(ae.a,{customTaglineText:c.a._("Log in","Title on modal for users to log in to an existing account after they accidentally created a new account","Title on modal for users to log in to an existing account after they accidentally created a new account"),hideAccountSwitchValueProp:!0,onDismiss:this.handleHideAccountSwitcher,showAddAccount:!0}),r.a.createElement(l.c,{direction:"column",display:"flex",height:"100%",minWidth:"100%",paddingX:8,paddingY:8},r.a.createElement(me.a,{name:"web_nux_simplified_welcome"},({anyEnabled:s,group:i})=>r.a.createElement(a.Fragment,null,r.a.createElement(l.c,{alignItems:"center",direction:"column",display:"flex",flex:s?"grow":"shrink",justifyContent:b(i),marginBottom:s?0:10,width:"100%"},r.a.createElement(pe,{delayOffset:-5,xRadiusAdjustment:40},r.a.createElement(l.c,{height:Se,width:Se},r.a.createElement(re.a,{name:o}))),!s&&r.a.createElement(l.c,{alignItems:"center",marginTop:6},r.a.createElement(l.K,{align:"center",size:"lg",truncate:!0},n)),s&&r.a.createElement(l.m,{align:"center",size:"md"},e),!s&&r.a.createElement(l.c,{alignItems:"end",display:"flex",marginTop:2,width:"100%"},f),!["enabled_no_subheader","employees"].includes(i)&&r.a.createElement(l.c,{marginTop:s?0:6,width:"100%"},r.a.createElement(l.K,{align:"center"},t.substring(0,d),r.a.createElement("br",null),t.substring(d))),s&&r.a.createElement(l.c,{alignItems:"center",direction:"column",display:"flex",width:"100%"},r.a.createElement(l.K,{weight:"enabled"===i?"bold":"normal"},c.a._("What should we call you?","nux.welcomeStep.namePrompt","Name prompt above textfield")),r.a.createElement(l.c,{"data-test-id":"nux-edit-name-input",marginTop:"enabled"===i?2:4,minHeight:Ee,width:"100%"},r.a.createElement(l.M,{errorMessage:_,id:"name",onChange:this.onNameChange,placeholder:c.a._("name"),size:"lg",type:"text",value:o})))),r.a.createElement(l.c,{"data-test-id":"nux_name_done_btn",marginTop:s?0:8},r.a.createElement(l.d,{accessibilityLabel:c.a._("Next","go to next nux step","go to next nux step"),color:"red",disabled:!!_,onClick:this.continueAndSave,size:"lg",text:c.a._("Next","next nux step button","next nux step button"),type:"button"})),r.a.createElement(l.c,{marginBottom:s?0:5,marginTop:s?6:5},r.a.createElement(l.P,{fullWidth:!1,onTouch:this.handleNotYouClick},r.a.createElement(l.K,{align:"center",size:"sm"},s?g:m),r.a.createElement(l.K,{align:"center",size:"sm",weight:"bold"},r.a.createElement(l.t,{href:"#"},s?c.a._("Log in to an existing account","nux.welcomeStep.loginExistingAccount","Link allowing users who just created a new account the option to log in instead into an existing account"):c.a._("Log in instead","Link allowing users who just created a new account the option to log in instead into an existing account","Link allowing users who just created a new account the option to log in instead into an existing account")))))))))}}),ye=n("z7RX"),Ce=n("vtuW"),Oe=n("CzMn"),Ie=n("1inl"),ke=n("rh3l"),Ne=n("N0Eu"),Te=n("sEfC"),Pe=n.n(Te),Re=n("E+oP"),ve=n.n(Re);function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Le={input:{backgroundColor:"transparent",border:"none",color:"#333",fontFamily:n("a0jO").b,fontSize:16,fontWeight:600,height:"100%",outline:"none",padding:"0",width:"100%"}},je=8,Ue=450,Ge=40,Be=5,De=10;var Fe=class extends r.a.PureComponent{constructor(...e){super(...e),Ae(this,"state",{userSearchQuery:"",cachedSearchResults:{},loading:!1}),Ae(this,"resultsContainerRef",r.a.createRef()),Ae(this,"onCancelButtonClick",()=>{const{isRenux:e}=this.props;Object(C.a)(101,{view:e?213:24,viewParameter:172,component:17,element:114}),this.setState({userSearchQuery:""}),this.handleSearchAndLoading("")}),Ae(this,"onQueryChange",e=>{const{isRenux:t}=this.props,{cachedSearchResults:n}=this.state;if(e.target instanceof HTMLInputElement){const a=e.target.value;ve()(n)&&this.getNormalizedQuery(a).length>0&&Object(C.a)(7472,{view:t?213:24,viewParameter:172,component:17,element:227}),this.setState({userSearchQuery:a}),this.handleSearchAndLoading(a)}}),Ae(this,"onQueryInputFocus",e=>{const{isRenux:t}=this.props;Object(C.a)(101,{view:t?213:24,viewParameter:172,component:17,element:227})}),Ae(this,"callDebouncedSearchApi",Pe()(()=>{const{cachedSearchResults:e,userSearchQuery:t}=this.state;x.a.create("NuxInterestsSearchResource",{query:t}).callGet({showError:!1},{retries:1}).then(n=>{if(n.resource_response&&n.resource_response.data){const a=n.resource_response.data,r={...e,[t]:a};this.setState({cachedSearchResults:r,loading:!1})}}).catch(n=>{const a={...e,[t]:[]};this.setState({cachedSearchResults:a,loading:!1})}).finally(()=>{this.scrollSearchResultsIntoView()})},De))}scrollSearchResultsIntoView(){this.resultsContainerRef.current&&this.resultsContainerRef.current.scrollIntoView({behavior:"smooth",block:"start"})}handleSearchAndLoading(e){const{cachedSearchResults:t}=this.state,n=this.getNormalizedQuery(e);n.length>0&&!t[n]?(this.setState({loading:!0},this.scrollSearchResultsIntoView),this.callDebouncedSearchApi()):this.setState({loading:!1},this.scrollSearchResultsIntoView)}mapInterestsFollowingState(e){const{selectedInterests:t}=this.props;return e.map(e=>(e.is_followed=Object(i.b)(t,e),e))}getNormalizedQuery(e){return e.trim().toLowerCase()}getSearchResults(){const{cachedSearchResults:e,userSearchQuery:t}=this.state,n=this.getNormalizedQuery(t);return 0===n.length?[]:e[n]?e[n].slice(0,Be):[]}renderSearchBar(){const{userSearchQuery:e}=this.state;return r.a.createElement(l.c,{color:"lightGray",display:"flex",height:Ge,rounding:"pill",width:Ue},r.a.createElement(l.c,{alignItems:"center",display:"flex",flex:"grow",height:"100%",paddingX:4,position:"relative"},r.a.createElement(l.c,{flex:"none",marginEnd:3},r.a.createElement(l.n,{accessibilityLabel:c.a._("Search icon","Search icon in search box","Search icon in search box"),icon:"search",size:20})),r.a.createElement("input",{"data-test-id":"search-box-input",name:"topicSearchBoxInput",onChange:this.onQueryChange,onFocus:this.onQueryInputFocus,placeholder:c.a._("Search for a topic","Placeholder for Search for when user hasn't typed in Search bar","Placeholder for Search for when user hasn't typed in Search bar"),style:Le.input,type:"text",value:e}),e.length>0&&r.a.createElement(l.c,{flex:"none",marginStart:3},r.a.createElement(l.o,{accessibilityLabel:c.a._("Cancel Search icon","Cancel Search icon in search box","Cancel Search icon in search box"),icon:"cancel",onClick:this.onCancelButtonClick,size:"sm"}))))}renderResults(){const{renderInterestGrid:e,suggestedSearchQuery:t}=this.props,{loading:n,userSearchQuery:a}=this.state,o=this.mapInterestsFollowingState(this.getSearchResults()),i=Ne.a.imageHeight+je;return r.a.createElement(l.c,{ref:this.resultsContainerRef,height:i,overflow:"hidden",width:"100%"},n&&r.a.createElement(l.G,{accessibilityLabel:c.a._("Loading search results","Label for a spinner that shows when waiting for a Search result","Label for a spinner that shows when waiting for a Search result"),show:!0}),!n&&o.length>0&&e(o,!0),!n&&0===o.length&&r.a.createElement(l.c,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"around"},r.a.createElement(l.n,{accessibilityLabel:c.a._("Search icon","Search icon used as placeholder in Search results","Search icon used as placeholder in Search results"),color:"lightGray",icon:"search",size:45}),r.a.createElement(l.m,{color:"gray",size:"sm"},0===a.length?s.c(c.a._('Try searching for a topic like "{{ suggestedSearchQuery }}"',"Placeholder for Search for when user hasn't typed in Search bar","Placeholder for Search for when user hasn't typed in Search bar"),{suggestedSearchQuery:t}):s.c(c.a._("We couldn't find {{ userSearchQuery }}. Try another word or phrase!","Shown when we don't have results for a user's search query","Shown when we don't have results for a user's search query"),{userSearchQuery:a}))))}render(){const{cachedSearchResults:e,userSearchQuery:t}=this.state,n=0===t.length&&ve()(e);return r.a.createElement(l.c,{alignItems:"center",direction:"column",display:"flex",height:n?100:200,justifyContent:"between"},n&&r.a.createElement(l.K,null,r.a.createElement("span",{className:"deprecatedTextSizeXL"},c.a._("Still can't find what you're looking for?","Introduces a search bar, which is shown underneath this text.","Introduces a search bar, which is shown underneath this text."))),this.renderSearchBar(),!n&&this.renderResults())}},Me=n("HZII"),ze=n.n(Me),He=n("XCz/");function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const $e=ze()(()=>{Q.b.localStorage.setItem("signupInterestsPickerScrollDown",!0)});class Ke extends r.a.PureComponent{constructor(...e){super(...e),We(this,"state",{showSearch:!1,hoverSection:null,userExpandedSections:[]}),We(this,"gridContainer",r.a.createRef()),We(this,"scrollContainer",r.a.createRef()),We(this,"handleScroll",()=>{const{showSearch:e}=this.state,t=this.scrollContainer.current,n=this.gridContainer.current;if(t&&n){$e();const a=t.scrollTop+t.offsetHeight>=n.clientHeight;this.props.handleBottomScroll(a),a&&!e&&this.setState({showSearch:!0})}}),We(this,"renderInterestGrid",(e,t)=>{const{pickerType:n}=this.props;return e.length>0&&!t&&Q.b.localStorage.setItem("signupInterestsPickerStartTime",Date.now()),n===I.s.REFINED_CATEGORIZED_TOPIC_PICKER?this.renderCategorizedInterests(e):this.renderInterestGridSection(e)}),We(this,"onHoverSection",e=>{this.setState({hoverSection:e})}),We(this,"onHoverLeaveSection",()=>{this.setState({hoverSection:null})}),We(this,"onExpandSection",e=>{const{userExpandedSections:t}=this.state;this.setState({userExpandedSections:t.concat(e)})}),We(this,"renderCategorizedInterests",e=>{const{userExpandedSections:t,hoverSection:n}=this.state,a=new Map;e.forEach(e=>{const t=e.category_title||"",n=a.get(t)||[];n.push(e),a.set(t,n)});const o=[];for(const[s,i]of a.entries()){const e=i.length>5&&!t.includes(s),a=e?i.slice(0,5):i;o.push(r.a.createElement(l.P,{key:s,onTouch:()=>{},onMouseEnter:()=>this.onHoverSection(s),onMouseLeave:this.onHoverLeaveSection},r.a.createElement(l.c,{marginBottom:8},r.a.createElement(l.c,{display:"flex",justifyContent:"between",alignItems:"center",padding:1,marginStart:5,marginEnd:5,marginBottom:2},r.a.createElement(l.m,{size:"sm"},s),n===s&&e&&r.a.createElement(l.P,{onTouch:()=>this.onExpandSection(s),fullWidth:!1},r.a.createElement(l.K,{size:"sm",weight:"bold"},c.a._("See all","nux.topicPicker.see_all","Text on button to expand the number of topics shown")))),this.renderInterestGridSection(a))))}return r.a.createElement(l.c,null,o)}),We(this,"renderInterestGridSection",e=>{const{handleInterestClickFn:t,isRenux:n,pickerType:a}=this.props;let o="xl_144";return a===I.s.CATEGORY_PICKER&&(o="lg_181_120"),a===I.s.REFINED_CATEGORIZED_TOPIC_PICKER&&(o="lg_144_88"),r.a.createElement(l.c,{display:"flex",marginStart:5,marginTop:-1,wrap:!0},e.map((e,a)=>r.a.createElement("div",{key:a},r.a.createElement(l.c,{padding:1},r.a.createElement(Ne.b,{key:e.id,clickHandler:t(e),interest:e,isRenux:n,isSelected:e.is_followed,size:o})))))})}renderSearch(){const{handleInterestClickFn:e,interests:t,isRenux:n,reduxCountry:a,reduxLocale:o,selectedInterests:s}=this.props,i=a||(this.context||{}).country||I.b,c=o||(this.context||{}).locale||I.c,u=["US","AU","GB"].includes(i)&&c.startsWith("en");return r.a.createElement(He.a,{name:"web_nux_topic_search",isEligible:u},({anyEnabled:a})=>a&&r.a.createElement(l.c,{width:"100%",paddingY:7,marginBottom:-10},r.a.createElement(Fe,{handleInterestClickFn:e,isRenux:n,renderInterestGrid:this.renderInterestGrid,selectedInterests:s,suggestedSearchQuery:t[0].name})))}render(){const{disableScroll:e,interests:t,pickerType:n,showTableOfContents:o}=this.props,{showSearch:s}=this.state,i=n===I.s.CATEGORY_PICKER?{}:{paddingBottom:"40px"};return r.a.createElement(l.c,{ref:this.scrollContainer,dangerouslySetInlineStyle:{__style:i},flex:"grow",height:o?"280px":"368px",overflow:e?"visible":"scrollY",paddingX:2,width:"100%"},r.a.createElement("div",{onScroll:this.handleScroll,onWheel:this.handleScroll},t.length>0?r.a.createElement(a.Fragment,null,r.a.createElement(l.c,{ref:this.gridContainer},this.renderInterestGrid(t)),s&&this.renderSearch()):r.a.createElement(l.G,{accessibilityLabel:c.a._("Loading default interests"),show:!0})))}}Ke.contextTypes={country:V.a.string,locale:V.a.string};var Xe=Object(o.connect)(({viewer:e})=>({reduxCountry:e.country?e.country:"",reduxLocale:e.locale?e.locale:""}),()=>({}))(Ke),qe=n("zwad"),Ye=n("573u");function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Qe extends a.PureComponent{constructor(...e){super(...e),Ve(this,"state",{defaultInterests:[],defaultInterestsSet:new Set,contextualMap:{},addedContextualTopics:new Set,numTopicsToShow:null}),Ve(this,"setShortenedRenuxExp",e=>{const{inShortenedEnabled:t,activateShortenedExpFn:n,setShortenedRenuxContainer:a}=this.props;e.length>0&&"viewed_recs"===Object(i.d)(e[0])&&n&&(n(),t&&(a(),this.setState({numTopicsToShow:5})))}),Ve(this,"handleInterestClickFn",e=>()=>{const{selectedInterests:t,onSelectedInterestsChange:n}=this.props,a=!Object(i.b)(t,e);n([e],a),this.logInterestClick(a),this.contextualUpdateInterests(new Set([e.id]))}),Ve(this,"logInterestClick",e=>{const{isRenux:t}=this.props,n=e?1030:1151;Object(C.a)(101,{component:36,element:n,view:t?213:24,viewParameter:172})}),Ve(this,"componentName",I.o),Ve(this,"recordRenderLogToServer",()=>{const e=this.renderTimers.pop();e.end(),ke.default.logToServer(ke.default.SERVER_LOG_TYPE.RENDER_TIME,ke.default.HTTP_METHOD.POST,{timing:e.getCompletedTime(),component:this.componentName})}),Ve(this,"renderTimers",[])}getExtraImageSignal(){const{plpImages:e,blpImages:t}=Object(i.a)(),{mostRecentPinImages:n}=this.props,a=e.concat(t);return n.concat(a)}componentDidMount(){const{hideFollowedInterests:e,isRenux:t,pickerType:n,selectedCategories:a,selectedInterests:r}=this.props;let o,s;n===I.s.CATEGORY_PICKER?o=x.a.create("NuxInterestsCategoriesResource",{urlParams:qe.a.getQueryStringParams()}):I.p.has(n)?(o=x.a.create("NuxInterestsRefinedResource",{extraImageSignal:this.getExtraImageSignal(),urlParams:qe.a.getQueryStringParams(),refineWithInterestIds:a.map(e=>e.id),returnCategorized:n===I.s.REFINED_CATEGORIZED_TOPIC_PICKER}),t&&(s=x.a.create("NuxInterestsFollowingResource",{}))):o=x.a.create("NuxInterestsResource",{is_renux:t,logNetworkTimer:!0,loggerComponentName:I.o,extraImageSignal:this.getExtraImageSignal(),hideFollowedInterests:e,urlParams:qe.a.getQueryStringParams()});const i=o.callGet({showError:!1},{retries:1}),l=s&&s.callGet({showError:!1},{retries:1});Promise.all([i,l]).then(e=>{const[t,n]=e,a=t.resource_response&&t.resource_response.data,o=n&&n.resource_response&&n.resource_response.data||[];if(a){this.logSignupTiming();const e=JSON.parse(Q.b.sessionStorage.getItem(I.B)||"[]"),t=new Set(o.map(e=>e.id)),n=a.filter(n=>!e.includes(n.id)&&!t.has(n.id)),s=this.mapInterestsForDisplay(r,n);this.setShortenedRenuxExp(s);const i=this.state.defaultInterests;this.setState({defaultInterests:s},()=>{i!==s&&this.renderTimers.unshift((new Ye.a).start())});const c=new Set;s.forEach(e=>{!0===e.is_followed&&c.add(e.id)}),Object.keys(c).length>0&&this.contextualUpdateInterests(c)}}).catch(e=>{Ie.a&&Ie.a.showError(e.message||c.a._("Unable to load topics","Error message when failed to load topics.","Error message when failed to load topics."))})}componentDidUpdate(e,t){const{defaultInterests:n}=this.state;n!==t.defaultInterests&&this.renderTimers.length&&this.recordRenderLogToServer(),n.length>0&&0===t.defaultInterests.length&&this.props.preselect&&this.preselectInterests()}getInterestsWithUpdatedIsFollowed(){const{selectedInterests:e}=this.props,{defaultInterests:t}=this.state,n=t.map(t=>(t.is_followed=Object(i.b)(e,t),t)),a=[...e.filter(e=>"type_ahead_search"===Object(i.d)(e))];return n.concat(...a)}logSignupTiming(){const e=Q.b.localStorage.getItem("signupTime");if(e){const t=Date.now()-e;t<I.x&&ke.default.logToServer(ke.default.SERVER_LOG_TYPE.SIGNUP_LOAD,ke.default.HTTP_METHOD.POST,{timing:t,component:"nux"}),Q.b.localStorage.removeItem("signupTime")}}mapInterestsForDisplay(e,t){const n=t.map(e=>({...e,is_followed:e.is_followed,label:e.name}));this.props.onSelectedInterestsChange(n.filter(e=>e.is_followed),!0);const a=new Set(e.map(e=>e.id)),r=n.filter(e=>!a.has(e.id));return e.concat(r)}preselectInterests(){const{numberToFollow:e,onSelectedInterestsChange:t}=this.props,{defaultInterests:n}=this.state,a=e||I.f;t(n.slice(0,a),!0)}contextualUpdateInterests(e){const{defaultInterests:t,defaultInterestsSet:n,addedContextualTopics:a}=this.state,r=[],o=[];let s=!1;t.forEach(t=>{if(r.push(t),n.add(t.id),e.has(t.id)&&!a.has(t.id)){const e=t.contextual_interests.filter(e=>!n.has(e.id));e.length>0&&("InsertionStrategy.INSERT_INPLACE"===t.contextual_insertion_strategy?r.push(...e):"InsertionStrategy.INSERT_AT_THE_END"===t.contextual_insertion_strategy&&o.push(...e),e.forEach(e=>{n.add(e.id)}),s=!0)}}),o.length>0&&r.push(...o),s&&this.setState({addedContextualTopics:new Set([...a,...e]),defaultInterests:r})}render(){const{handleBottomScroll:e,isRenux:t,pickerType:n,selectedInterests:a,showTableOfContents:o}=this.props,{numTopicsToShow:s}=this.state,i=this.getInterestsWithUpdatedIsFollowed();return r.a.createElement(Xe,{disableScroll:!!s&&s<=5,handleBottomScroll:e,handleInterestClickFn:this.handleInterestClickFn,interests:s?i.slice(0,s):i,isRenux:!!t,pickerType:n,selectedInterests:a,showTableOfContents:o})}}var Je=Object(o.connect)(({mostRecentPin:e})=>({mostRecentPinImages:e&&e.plp_image_signatures?e.plp_image_signatures:[]}),()=>({}))(e=>r.a.createElement(He.a,{activate:!1,isEligible:e.isRenux&&!e.isSimpleRenux,name:"web_renux_short"},({anyEnabled:t,customActivate:n})=>r.a.createElement(Qe,Object.assign({},e,{activateShortenedExpFn:n,inShortenedEnabled:t})))),Ze=n("DzJC"),et=n.n(Ze),tt=n("vvax");function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const at=r.a.createElement(l.c,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.1))"}},height:20,left:!0,marginTop:-5,position:"absolute",right:!0,top:!0}),rt=e=>e===I.s.CATEGORY_PICKER?3407:I.p.has(e)?3408:172;var ot=Object(k.compose)(D.f,Object(o.connect)(null,(function(e){return{dispatchSetNuxStepProgress:t=>e(Object(O.a)(t)),dispatchUpdateFollows:t=>e(Object(j.e)(t)),dispatchSubmitOrientationContext:t=>e(Object(j.b)(t)),setNuxPickerProgress:t=>e(Object(j.a)(I.q,t))}})))(class extends a.Component{constructor(...e){super(...e),nt(this,"state",{isBottom:!1,showShortRenux:!1}),nt(this,"getButtonAttributes",(e=!1)=>{const{hideFollowedInterests:t,isRenux:n,pickerType:a,numberToFollow:r,selectedCategories:o,selectedInterests:i}=this.props;if(a===I.s.CATEGORY_PICKER){const e=o.length,a=Math.max(0,r-e),i=c.a.ngettext("Pick {{ numberLeftToFollow }} category","Pick {{ numberLeftToFollow }} categories",a,"nux.picker.next_button","number of categories left to pick"),l=n&&t?c.a._("Next","go to next step","go to next step"):s.i(i,{numberLeftToFollow:`${a}`});return{text:a>0?l:c.a._("Next","go to next step","go to next step"),isDisabled:a>0}}const l=i.length,u=e&&l>=I.j?0:Math.max(0,r-l),d=c.a.ngettext("Pick {{ numberLeftToFollow }} more","Pick {{ numberLeftToFollow }} more",u,"number of interests left to pick","number of interests left to pick"),h=n&&t?c.a._("Next","go to next step","go to next step"):s.i(d,{numberLeftToFollow:`${u}`});return{text:u>0?h:c.a._("Done"),isDisabled:u>0}}),nt(this,"setShortenedRenux",()=>{const{setShortenedRenuxModal:e}=this.props;e(),this.setState({showShortRenux:!0})}),nt(this,"handleBottomScroll",e=>this.setState({isBottom:e})),nt(this,"handleBottomScrollThrottled",et()(this.handleBottomScroll,50)),nt(this,"handleNextClick",()=>{const{customProcessFollowedInterests:e,isRenux:t,selectedCategories:n,selectedInterests:a,followedInterests:r,incrementNuxStep:o,pickerType:s,setNuxPickerProgress:i,dispatchUpdateFollows:c,dispatchSubmitOrientationContext:l,requestContext:u}=this.props;if(s===I.s.CATEGORY_PICKER)return Object(C.a)(101,{component:17,element:96,view:this.viewType,viewParameter:rt(s)}),void o();if(e)return t||i(I.a),e(),void o();let d;if(t){const e=r.reduce((e,t)=>(e[t.id]=t.is_followed,e),{});d=Promise.resolve(c(e))}else{const e=[],t=[];if(a.forEach(n=>{e.push(n.id),t.push(n.log_data?n.log_data:null)}),n.length>0){new B.c(u,"web_nux_topic_two_step_follow_categories").enabled()&&n.forEach(n=>{e.push(n.id),t.push(n.log_data?n.log_data:null)})}const r={interests:e.join(),log_data:JSON.stringify(t),referrer:"nux",user_behavior_data:Object(Oe.a)()};d=Promise.resolve(l(r))}d.then(()=>{t||i(I.a),s!==I.s.STANDARD_TOPIC_PICKER&&Object(C.a)(101,{component:17,element:96,view:this.viewType,viewParameter:rt(s)}),Object(C.a)(101,{component:17,element:96,view:this.viewType,viewParameter:172}),o()})})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,pickerType:n,setNuxPickerProgress:a}=this.props;t||a(I.w),this.viewType=t?213:24,e("topic"),[I.s.CATEGORY_PICKER,I.s.STANDARD_TOPIC_PICKER].includes(n)&&Object(C.a)(13,{view:this.viewType,viewParameter:172}),n!==I.s.STANDARD_TOPIC_PICKER&&Object(C.a)(13,{view:this.viewType,viewParameter:rt(n)})}render(){const{hideFollowedInterests:e,isRenux:t,isSimpleRenux:n,onSelectedInterestsChange:a,personalizationCopy:{headerText:o,subHeaderText:s},pickerType:i,preselect:u,selectedCategories:d,selectedInterests:h,showTableOfContents:p,numberToFollow:m}=this.props,{showShortRenux:g}=this.state,_=this.getButtonAttributes(),f=i===I.s.CATEGORY_PICKER?d:h,b=g||i===I.s.CATEGORY_PICKER,S=[I.s.CATEGORY_PICKER,I.s.REFINED_TOPIC_PICKER].includes(i),w=t&&!S;return r.a.createElement(l.c,{direction:"column",display:"flex",height:"100%"},r.a.createElement(l.c,{display:"visuallyHidden",role:"alert"},Object(tt.b)(c.a._("{{selectedTopicsCount}} of at least 5 topics selected","accessible label how many topics are selected","accessible label how many topics are selected"),{selectedTopicsCount:f.length})),r.a.createElement(l.c,{marginBottom:8,marginTop:w?8:4,paddingX:8,wrap:!0},r.a.createElement(l.m,{align:"center",size:"md"},o),t&&r.a.createElement(l.c,{marginTop:2},r.a.createElement(l.K,{align:"center"},s))),r.a.createElement(Je,{handleBottomScroll:this.handleBottomScrollThrottled,hideFollowedInterests:e,isRenux:t,isSimpleRenux:n,numberToFollow:m,onSelectedInterestsChange:a,pickerType:i,preselect:u,selectedCategories:d,selectedInterests:f,setShortenedRenuxContainer:this.setShortenedRenux,showTableOfContents:p}),r.a.createElement(l.c,{position:"relative"},!b&&at,r.a.createElement(l.c,{"data-test-id":"nux-picker-done-btn",marginBottom:8,marginTop:8,paddingX:8},r.a.createElement(l.d,{color:"red",disabled:_.isDisabled,onClick:this.handleNextClick,size:"lg",text:_.text,type:"submit"}))))}});var st=n("C0mq");function it(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ct extends a.Component{constructor(...e){super(...e),it(this,"state",{followedInterests:[],isLoading:!1,nuxStep:this.getNextStepIndex(-1,this.props.steps,!1),selectedCategories:[],selectedInterests:[],userClickedBack:!1,showShortRenuxModal:!1,quizFollows:JSON.parse(Object(Ce.a)(I.A)||"0")}),it(this,"onComplete",()=>{const{handleComplete:e,isLandingPage:t,isRenux:n,dispatchUpdateFirstHomeFeedRequestAfterNuxFlag:a}=this.props;Object(C.a)(4105,{view:n?213:24,viewParameter:171}),n||a(!0),e(),t&&this.handleNavigate("/")}),it(this,"mounted",!1),it(this,"handleNavigate",e=>{const{history:t}=this.props;t.push({pathname:e,state:{completedNux:!0}})}),it(this,"handleSelectedInterestsChange",(e,t)=>{this.setState(this.isCategoryPickerStep()?(n,a)=>{return{selectedCategories:this.getUpdatedSelectedInterests(n.selectedCategories,e,t)}}:(n,a)=>{const r=this.getUpdatedSelectedInterests(n.selectedInterests,e,t),o=this.getUpdatedFollowInterests(n.followedInterests,e,t),{dispatchSetNuxSelectedInterestImages:s}=a;return s(r.reduce((e,t)=>{if(t&&t.images&&t.images["400x"]){const n={bestPinsImages:t.best_pins_images,height:t.images["400x"].height,width:t.images["400x"].width,url:t.images["400x"].url};e.push(n)}return e},[])),{selectedInterests:r,followedInterests:o}})}),it(this,"nuxSteps",{NuxWelcomeNameStep:xe,NuxGenderStep:H,NuxLocaleCountryStep:te,UsecaseQuiz:ye.a,NuxPicker:ot,NuxExtensionUpsell:G,NuxEducationLoader:v}),it(this,"setShortenedRenuxModal",()=>this.setState({showShortRenuxModal:!0})),it(this,"updateQuizFollows",e=>this.setState({quizFollows:e})),it(this,"onPrevStepClickFn",e=>{const{steps:t,isRenux:n}=this.props,a=t[e].moduleName,r=this.getPickerType();return()=>{const t={NuxWelcomeNameStep:259,NuxGenderStep:3120,NuxLocaleCountryStep:3139,UsecaseQuiz:3395,NuxPicker:rt(r)}[a];t&&Object(C.a)(101,{component:17,element:34,view:n?213:24,viewParameter:t}),e>0&&this.setState({nuxStep:e-1,userClickedBack:!0})}})}componentDidMount(){const{isRenux:e}=this.props;this.mounted=!0,Object(C.a)(4104,{view:e?213:24,viewParameter:170})}componentWillUnmount(){this.mounted=!1}getUpdatedFollowInterests(e,t,n){let a=[...e];return t.forEach(e=>{const t={...e,is_followed:n};let r=!1;a=a.map(e=>e.id===t.id?(r=!0,t):e),r||a.push(t)}),a}getUpdatedSelectedInterests(e,t,n){let a=[...e];return t.forEach(t=>{const r=Object(i.b)(a,t);n&&!r?a.push({...t,is_followed:n}):!n&&r&&(a=e.filter(e=>e.id!==t.id))}),a}getPickerType(){const{steps:e}=this.props,{nuxStep:t}=this.state,n=e[t];return this.getPickerTypeFromStep(n)}getPickerTypeFromStep(e){const t=e.options&&e.options.pickerType;return t&&Object.values(I.s).includes(t)?t:I.s.STANDARD_TOPIC_PICKER}isCategoryPickerStep(){return this.getPickerType()===I.s.CATEGORY_PICKER}isRefinedPickerStep(){return I.p.has(this.getPickerType())}getPersonalizationCopy(e){const{hideFollowedInterests:t,isRenux:n,isSimpleRenux:a,requestContext:r,steps:o}=this.props;let i,l;const u=e.moduleName,d=o.map(e=>e.moduleName).indexOf(u)===o.length-2;switch(u){case"NuxWelcomeNameStep":return{headerText:new B.c(r,"web_nux_simplified_welcome").enabledWithNoActivation()?c.a._("Welcome to Pinterest!","nux.welcomeStep.greeting","Nux welcome step heading"):c.a._("Welcome to Pinterest","greeting on welcome name step","greeting on welcome name step"),subHeaderText:c.a._("Your answers to the next few questions will help us find the right ideas for you","header on nux welcome and name editing step","header on nux welcome and name editing step")};case"NuxGenderStep":return i=c.a._("How do you identify?","Header in NUX gender step.","Header in NUX gender step."),l="",n&&(i=c.a._("It’s time to refresh your feed!","Title on the modal asking user's gender","Title on the modal asking user's gender"),l=c.a._("How would you describe yourself?","Subtitle on the modal asking user's gender","Subtitle on the modal asking user's gender")),{headerText:i,subHeaderText:l};case"NuxLocaleCountryStep":return{headerText:c.a._("Pick your language and country/region","Header in NUX locale/country step","Header in NUX locale/country step")};case"NuxPicker":const e=a&&new B.c(r,"web_topic_educator_lego").enabledWithNoActivation();return!n&&this.isCategoryPickerStep()?i=s.i(c.a.ngettext("Pick at least {{numCategoriesToSelect}} category you want to explore","Pick at least {{numCategoriesToSelect}} categories you want to explore",I.d,"nux.topicPicker.heading","Header in NUX topic picker step, asking user to select some number of categories"),{numCategoriesToSelect:I.d.toString()}):!n&&this.isRefinedPickerStep()?i=s.i(c.a.ngettext("Now pick {{numberToFollow}} (or more!) topics to go deeper","Now pick {{numberToFollow}} (or more!) topics to go deeper",I.e,"nux.topicPicker.heading","Header in NUX topic picker step, asking user to select some number of topics"),{numberToFollow:I.e.toString()}):n&&this.isCategoryPickerStep()?i=c.a._("Pick the categories you want to explore","nux.topicPicker.heading","Header in NUX topic picker step, asking users to select some categories"):n&&this.isRefinedPickerStep()?i=c.a._("Now pick a few topics to go deeper","nux.topicPicker.heading","Header in NUX topic picker step, asking users to select some topics"):n&&t?(i=c.a._("What are you into these days?","Header in ReNUX topic picker step.","Header in ReNUX topic picker step."),l=c.a._("Pick the topics you want to see in your home feed","Subheader in ReNUX topic picker step.","Subheader in ReNUX topic picker step.")):this.hasNuxStep("UsecaseQuiz")?i=c.a._("Last thing! Pick a few more topics you're into","nux.topicPicker.heading","Header in NUX topic picker step after quiz"):e?(i=c.a._("Which topics do you want to see more of?","nux.topicPicker.heading","Header in NUX topic picker step for topic education experience."),l=c.a._("Ideas you see in you home feed are based on topics you like","nux.topicPicker.subheading","Subheader in NUX topic picker step for topic education experience.")):(i=d?c.a._("Last step! Tell us what you're interested in","Header in NUX topic picker step.","Header in NUX topic picker step."):c.a._("Tell us what you're interested in","Header in NUX topic picker step.","Header in NUX topic picker step."),l=s.c(c.a._("Pick {{ numberToFollow }} (or more!) to start discovering new ideas","Subheader in NUX topic picker step with required number of topics to follow","Subheader in NUX topic picker step with required number of topics to follow"),{numberToFollow:String(I.e)})),{headerText:i,matchUsecaseText:this.hasNuxStep("UsecaseQuiz"),subHeaderText:l};case"NuxExtensionUpsell":return{headerText:i=d?c.a._("Last step! Get our handy browser button","Header in NUX browser extension upsell step.","Header in NUX browser extension upsell step."):c.a._("Get our handy browser button","Header in NUX browser extension upsell step.","Header in NUX browser extension upsell step."),subHeaderText:c.a._("Quickly save any idea you find around the web","Subheader in NUX browser extension upsell step","Subheader in NUX browser extension upsell step")};default:return{}}}nuxStepToRender(e,t){const{hideFollowedInterests:n,isRenux:a,isSimpleRenux:o,requestContext:s}=this.props,{followedInterests:i,selectedCategories:c,selectedInterests:l,quizFollows:u}=this.state,d=e.moduleName,h=this.nuxSteps[d],p=this.hasNuxStep("NuxGenderStep"),m=a&&n?I.u:Math.max(0,I.e-u),g=a?I.t:I.d;return r.a.createElement(h,Object.assign({},e.options,{key:this.getPickerType(),experiments:s.experiments,followedInterests:i,hasGenderStep:p,hideFollowedInterests:n,incrementNuxStep:this.incrementNuxStep(this.state.nuxStep),isRenux:a,isSimpleRenux:o,numberToFollow:this.isCategoryPickerStep()?g:m,onSelectedInterestsChange:this.handleSelectedInterestsChange,personalizationCopy:this.getPersonalizationCopy(e),pickerType:this.getPickerType(),requestContext:s,selectedCategories:c,selectedInterests:l,setShortenedRenuxModal:this.setShortenedRenuxModal,showTableOfContents:t,toggleLoadingIndicator:e=>this.setState({isLoading:e}),updateQuizFollows:this.updateQuizFollows}))}getNextStepIndex(e,t,n){const{isRenux:a}=this.props;let r=e+1;if(n)return r;if(!a)for(;r<t.length&&t[r].isCompleted;)r+=1;return r}incrementNuxStep(e){const{steps:t,dispatchSubmitOrientationContextFollow:n}=this.props,{userClickedBack:a}=this.state,r=this.getNextStepIndex(e,t,a);return r>=t.length?this.onComplete:()=>{const a=t=>{if(e!==t)return this.setState({nuxStep:t})};if(t.length>r&&t[r].options&&t[r].options.onStartApi){t[r].options.onStartApi===I.h?n().finally(a):a(r)}else a(r)}}hasNuxStep(e){const{steps:t}=this.props;return t.some(t=>t.moduleName===e)}render(){const{handleDismiss:e,isLandingPage:t,isRenux:n,isSimpleRenux:a,steps:o}=this.props,{isLoading:s,nuxStep:i,showShortRenuxModal:c}=this.state,l=e=>["NuxEducationLoader"].includes(e),u=o.filter(e=>!l(e.moduleName)),d=l(o[i].moduleName)||t,h=o.filter(e=>this.getPickerTypeFromStep(e)===I.s.REFINED_TOPIC_PICKER).length>0,p=n?!d&&!a&&i>0:!d&&!a&&i>1;return r.a.createElement(ne.a,{currentIndex:i,hideDots:(n||a)&&!h||d,isLoading:s,numSteps:u.length,onClose:d||!n&&!a?void 0:e,onPrevStepClick:p?this.onPrevStepClickFn(i):void 0,showShortRenuxPicker:c,stepName:o[i].moduleName},this.nuxStepToRender(o[i],!d))}}it(ct,"defaultProps",{hideFollowedInterests:!1,isRenux:!1,isSimpleRenux:!1});t.a=Object(k.compose)(D.f,Object(o.connect)(()=>({}),e=>({dispatchSetNuxSelectedInterestImages:t=>e(function(e){return{type:"SET_NUX_SELECTED_INTEREST_IMAGES",payload:{images:e}}}(t)),dispatchSubmitOrientationContextFollow:()=>e(Object(j.c)()),dispatchUpdateFirstHomeFeedRequestAfterNuxFlag:t=>e(Object(j.d)(t))})),st.a)(ct)},SPMB:function(e,t,n){},UPfj:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"b",(function(){return d}));var a=n("gxu6"),r=n("QLqj"),o=n("oZBM");function s(e,t=!1){return t?o.a.tier1:e?(e=e||"",o.f.has(e)?o.a.tier1:o.g.has(e)?o.a.tier2:o.a.tier3):o.a.tier1}function i(){a.b("hasBeenShownLoginModalInOpen","true",o.e)}function c(e){r.b.localStorage.setItem("uoiou",!!e)}function l(){return r.b.localStorage.getItem("uoiou")||!1}function u(){r.b.sessionStorage.setItem(o.d,o.c)}function d(){return l()||r.b.sessionStorage.getItem(o.d)===o.c}},VL22:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l}));var a=n("17x9"),r=n.n(a),o=n("kmwA");const s={FACEBOOK:"facebook",GOOGLE_ONE_TAP:"google_one_tap",GOOGLE:"google",EMAIL:"email",OTHER:"other"},i=e=>e.facebook_id?s.FACEBOOK:e.google_open_id_token?s.GOOGLE_ONE_TAP:e.gplus_code||e.gplus_id_token?s.GOOGLE:e.email?s.EMAIL:s.OTHER,c=(r.a.shape({credentials:r.a.shape({}),userData:r.a.shape({}),type:r.a.oneOf(Object.values(s))}),e=>e in o.a.settings.MINIMUM_AGE_BY_EU_COUNTRY),l=e=>o.a.settings.EN_COUNTRIES_WITH_MANDATORY_AGE.includes(e)||o.a.settings.LATAM_AGE_COLLECTION.has(e)},a0jO:function(e,t,n){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));const a=["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto","Oxygen-Sans","Ubuntu","Cantarell",'"Fira Sans"','"Droid Sans"','"Helvetica Neue"',"Helvetica",'"ヒラギノ角ゴ Pro W3"','"Hiragino Kaku Gothic Pro"',"メイリオ","Meiryo",'"ＭＳ Ｐゴシック"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),r=["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto","Oxygen-Sans","Ubuntu","Cantarell",'"Fira Sans"','"Droid Sans"','"Helvetica Neue Bold"',"Helvetica",'"ヒラギノ角ゴ Pro W3"','"Hiragino Kaku Gothic Pro"',"メイリオ","Meiryo",'"ＭＳ Ｐゴシック"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},dg5e:function(e,t,n){n.r(t);n("bZMm");var a=n("JW66"),r=n("+NLT"),o=n("eOdZ"),s=n("kmwA"),i=n("28DW"),c=n("zwad");const l={_parseJson:function(e){return e.json()},_throwError:function(e){const t=new Error(e.statusText);throw t.response=e,l._reconstructError(t),t},_checkStatus:function(e){return 200===e.status||401===e.status?e:(l._throwError(e),{})},_crossDomainRequest:function(e,t,n){if("GET"!==n&&"POST"!==n)return Promise.resolve({});const o={credentials:"include",mode:"cors"};return"POST"===n&&(o.method="POST",o.body=t,o.headers={"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Pinterest-InstallId":r.a.instance.unauth_id},r.a.instance.unauth_id||Object(i.a)(`unauth.auth_handshake.cross_domain.no_unauth_id.${n}`)),fetch(e,o).then(l._checkStatus).then(l._parseJson).then(e=>"success"===e.status?Promise.resolve(e):e.code===a.a.LOGIN_MFA_REQUIRED?(e.api_error_code=e.code,Promise.reject(e)):(l._throwError(e),{})).catch(e=>{throw e})},_reconstructError:e=>{!e.api_error_code&&e.response&&(e.api_error_code=e.response.code,e.message=e.response.message)},_verifyAndGetToken:function(){const e=s.a.settings.ACCOUNTS_PINTEREST_URL+"/v3/handshake/verify/";return l._crossDomainRequest(e,"","GET")},exchangeTokenAndSetSession:function(e,t=!1){return o.a.create("HandshakeSessionResource",{token:e,isRegistration:t}).callCreate()},verifyLoggedInStatus:function(){l._verifyAndGetToken().then(e=>{if(e&&e.data){const t=e.data;l.exchangeTokenAndSetSession(t).then(e=>{window.location.reload()},e=>{})}},e=>{})},_setUpRegisterParameters:function(e){const t={};if(t.email=e.email||"",t.username=e.username||"",t.password=e.password||"",t.first_name=e.first_name||"",t.last_name=e.last_name||"",t.country=e.country||"",t.locale=r.a.instance.locale,t.referrer=r.a.instance.referrer,e.age){const n=new Date;n.setFullYear(n.getFullYear()-e.age);const a=parseInt(n/1e3,10);t.birthday=a.toString()}if(e.custom_gender&&(t.custom_gender=e.custom_gender),e.gender&&(t.gender=e.gender),e.business_name&&(t.account_type=e.account_type,t.business_name=e.business_name,t.first_name=e.business_name),r.a.instance.invite_code&&(t.invite_code=r.a.instance.invite_code),e.facebook_id){const n=r.a.instance.facebook_token||e.facebook_token||"";t.facebook_id=e.facebook_id,t.facebook_token=n,t.social_username=e.social_username||""}else(e.gplus_code||e.gplus_id_token)&&(t.password=e.password||"",t.one_time_code=e.gplus_code,t.id_token=e.gplus_id_token,t.redirect_uri=e.gplus_redirect_uri);return t.recaptcha_v3_token=e.recaptchaV3Token||"default",c.a.getQueryStringFromObject(t)},_setUpLoginParameters:function(e,t){const n={};if(e.username_or_email&&(n.username_or_email=e.username_or_email.trim(),n.password=e.password,n.referrer=r.a.instance.referrer),e.facebook_id){const t=r.a.instance.facebook_token||e.facebook_token||"";n.facebook_id=e.facebook_id,n.facebook_token=t,n.facebook_autologin=e.facebook_autologin||!1}return e.gplus_id_token&&(n.gplus_id_token=e.gplus_id_token,n.gplus_access_token=e.gplus_access_token,n.gplus_expires_at=e.gplus_expires_at,n.gplus_autologin=e.gplus_autologin||!1),e.mfa_token&&(n.mfa_token=e.mfa_token),n.token=t||"default",c.a.getQueryStringFromObject(n)},_getRegisterRequestUrl:function(e){let t="/v3/register/email/handshake/";return e.facebook_id&&(t="/v3/register/facebook/handshake/"),(e.gplus_code||e.gplus_id_token)&&(t="/v3/register/gplus/handshake/"),e.business_name&&(t="/v3/register/partner/handshake/"),s.a.settings.ACCOUNTS_PINTEREST_URL+t},_getLoginRequestUrl:function(e){let t="/v3/login/handshake/";return e.facebook_id&&(t="/v3/login/facebook/handshake/"),e.gplus_id_token&&(t="/v3/login/gplus/handshake/"),e.mfa_token&&(t="/v3/login/mfa/handshake/"),s.a.settings.ACCOUNTS_PINTEREST_URL+t},registerUser:function(e){const t=l._getRegisterRequestUrl(e),n=l._setUpRegisterParameters(e);return l._crossDomainRequest(t,n,"POST")},loginUser:function(e,t){const n=l._getLoginRequestUrl(e),a=l._setUpLoginParameters(e,t);return l._crossDomainRequest(n,a,"POST")}};t.default=l},iFas:function(e,t,n){t.a={ACCOUNT_SWITCHER_FLYOUT:"account_switcher_flyout",ACCOUNT_SWITCHER_MODAL:"account_switcher_modal",ACCOUNT_RECOVERY:"account_recovery",BOARD_INVITE:"board_invite",CLOSEUP:"closeup",CLOSEUP_BANNER:"closeup_banner",FOLLOW_BUTTON:"followbtn",FLASHLIGHT_GRID:"flashlight_grid",GOOGLE_ONE_TAP:"google_one_tap_modal",LOGIN_PAGE:"login_page",INSPIRED_BANNER:"inspired_banner",MFA_LOGIN_PAGE:"mfa_login_page",HYBRID_CLICKTHROUGH:"hybrid_clickthrough",HYBRID_BANNER:"hybrid_banner",PIN_GRID:"pin_grid",PIN_IMAGE:"pin_image",RESPONSE_FLYOUT:"response_flyout",STORY_PIN_PAGE:"story_pin_page",UNAUTH_BANNER:"unauth_banner",UNAUTH_HEADER:"unauth_header"}},kw3W:function(e,t,n){var a=n("q1tI"),r=n.n(a),o=n("Cufx"),s=n("n6mq");var i=e=>{if(e.viewerId===e.account.id)return null;{const t=e.account.imageMediumUrl&&!e.account.imageMediumUrl.includes("static/images/user/default");return r.a.createElement(s.c,{alignItems:"center",direction:"row",display:"flex",height:"100%",width:"100%"},r.a.createElement(s.c,{paddingX:1},r.a.createElement(o.a,{name:e.account.fullName||e.account.username,src:t?e.account.imageMediumUrl:"",size:e.large?"lg":"md"})),r.a.createElement(s.c,{marginStart:3,flex:"grow"},r.a.createElement(s.K,{color:"darkGray",truncate:!0,weight:"bold"},e.account.fullName||e.account.username),e.account.email&&r.a.createElement(s.K,{color:"darkGray",truncate:!0},e.account.email)))}},c=n("0Bqi");var l=e=>{const t=Object.keys(e.accounts).length;return r.a.createElement(s.c,{position:"relative"},r.a.createElement(s.c,{color:"lightGray",height:20*t*4,position:"absolute",width:1,dangerouslySetInlineStyle:{__style:{bottom:48,left:52}}}),r.a.createElement("ul",null,Object.keys(e.accounts).map(t=>{const n=e.accounts[t];return r.a.createElement("li",{key:t},r.a.createElement(s.P,{onTouch:()=>e.onClick(n)},r.a.createElement("div",{className:"AccountSwitcherListItem",style:{padding:"8px 16px 8px 28px"}},r.a.createElement(i,{account:n}))))})))},u=n("iFas"),d=n("h4v/"),h=n("Ye/N"),p=n("shJ5"),m=n("x/Ro"),g=n("3gA6"),_=n("eOdZ"),f=n("kmwA"),b=n("NdXn"),S=n("fArA"),w=n("gC5q"),E=n("XCz/"),x=n("U4JR"),y=n("zLLH"),C=n("liz/"),O=n("pLLR");function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(S.compose)(O.f,Object(y.c)({key:"businessUser",name:"UserResource",options:({viewer:e})=>({field_set_key:"linked_partner",user_id:e.id})}))(class extends a.Component{constructor(...e){super(...e),I(this,"state",{failedAccount:null,showLoginModal:!1,isLoading:!1}),I(this,"handleAddAccount",()=>{Object(C.k)("add_account_click",null,this.props.container),this.props.container===u.a.ACCOUNT_SWITCHER_MODAL&&this.props.showLogin?this.props.showLogin():this.setState({showLoginModal:!0})}),I(this,"trackProfileNavigateClick",e=>{Object(C.k)(`current_profile_${e}_click`,null,this.props.container)}),I(this,"handleSwitch",e=>{const{container:t}=this.props;this.setState({isLoading:!0}),Object(x.a)(101,{component:13369,element:11196}),Object(C.k)("switch_account_click",{destination_user_id:e.id},t);const n={get_user:!0,switch_account:e.id};d.a.getInstance().pauseImpressionsAndFlush(),Object(m.a)(n,{container:"account_switcher"},null,!0).then((n={})=>{if(n.resource_response&&n.resource_response.data&&n.resource_response.data.success){const n=`/${e.username}`;Object(C.g)(n,e.id,t)}else Object(C.f)(e.id,t),this.setState({failedAccount:e,isLoading:!1})},n=>{throw Object(C.f)(e.id,t),this.setState({isLoading:!1}),n})}),I(this,"handleLinkedAccountSwitch",e=>{const{container:t,viewer:n}=this.props;if(this.setState({isLoading:!0}),Object(x.a)(101,{component:13369,element:e.partner&&e.partner.isLinkedBusiness?11195:11194}),d.a.getInstance().pauseImpressionsAndFlush(),e.partner&&e.partner.isLinkedBusiness){const n={business_id:e.id,get_user:!0};Object(m.a)(n,{container:"account_switcher"},null,!0).then((n={})=>{Object(C.g)("/",e.id,t)},n=>{throw Object(C.f)(e.id,t),this.setState({isLoading:!1}),n})}else _.a.create("UserSessionResource",{disable_auth_failure_redirect:!0}).callDelete().then(()=>{Object(C.j)(n.id),Object(C.g)(`/${e.username}`,n.id,t)},e=>{throw Object(C.f)(n.id,t),this.setState({isLoading:!1}),e})}),I(this,"handleCloseModal",()=>this.setState({showLoginModal:!1})),I(this,"handleReauthAccount",()=>{Object(C.k)("switch_failure_prompt.login_click",null,this.props.container),this.setState({failedAccount:null,showLoginModal:!0})}),I(this,"handleRemoveUnauthAccount",e=>{Object(C.k)("switch_failure_prompt.account_removed",{removed_user_id:e},this.props.container),Object(C.j)(e),this.setState({failedAccount:null})}),I(this,"getBusinessAccounts",()=>{const{businessUser:e,viewer:{partner:t}}=this.props;return e.data?(t&&t.is_linked_business?e.data.owners:e.data.businesses).reduce((e,t)=>(e[t.id]=Object(w.a)(b.a,!0)(t),t.partner&&t.partner.is_linked_business&&(e[t.id].email=t.partner.biz_ownership_email),e),{}):null}),I(this,"renderAccounts",e=>Object.keys(e).map((t,n)=>r.a.createElement("li",{key:n},r.a.createElement(s.P,{onTouch:()=>{this.handleSwitch(e[t])}},r.a.createElement("div",{className:"AccountSwitcherListItem",style:{height:"auto"}},r.a.createElement(i,{large:!0,account:e[t],viewerId:this.props.viewer.id}))),n!==C.a-2&&r.a.createElement(s.j,null)))),I(this,"renderPinnerButtons",e=>{const{onNavigateButtonClick:t}=this.props;return r.a.createElement(g.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${e}/`},r.a.createElement(s.d,{text:h.a._("View profile","Visit a user profile from account switcher","Visit a user profile from account switcher"),accessibilityLabel:h.a._("Go to current profile","Visit a current user profile from account switcher","Visit a current user profile from account switcher"),size:"sm",color:"red",onClick:()=>{this.trackProfileNavigateClick("button"),t&&t()}}))}),I(this,"renderBusinessButtons",e=>{const{onNavigateButtonClick:t,viewer:{partner:n}}=this.props;return r.a.createElement(s.c,{display:"flex"},r.a.createElement(s.c,{marginEnd:2},r.a.createElement(E.a,{activate:!1,name:"web_pro_mode_header"},({group:e})=>{const a=e.startsWith("enabled_full_width");return r.a.createElement(g.b,{to:a&&n&&!n.is_convert?"/":"/business/hub/",onClick:()=>{Object(x.a)(101,{element:11236}),t&&t()}},r.a.createElement(s.d,{key:"biz-hub-button",text:h.a._("Business hub","Link to Business hub from account switcher","Link to Business hub from account switcher"),accessibilityLabel:h.a._("Go to Business hub","Visit the Business hub for the current business user","Visit the Business hub for the current business user"),size:"sm",color:"red"}))})),r.a.createElement(E.a,{activate:!1,name:"web_pro_mode_header"},({group:n})=>{const a=n.startsWith("enabled_full_width");return r.a.createElement(g.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:a?`${f.a.settings.CANONICAL_MAIN_URL}/${e}/`:`/${e}/`},r.a.createElement(s.d,{text:h.a._("Profile","Visit a user profile from account switcher","Visit a user profile from account switcher"),accessibilityLabel:h.a._("Go to current user profile","Visit a current user profile from account switcher","Visit a current user profile from account switcher"),size:"sm",onClick:()=>{this.trackProfileNavigateClick("button"),t&&t()}}))}))})}componentDidMount(){this.props.container===u.a.ACCOUNT_SWITCHER_MODAL&&Object(C.k)("modal.shown")}componentWillUnmount(){this.props.container===u.a.ACCOUNT_SWITCHER_MODAL&&Object(C.k)("modal.dismiss")}renderLoadingIndicator(){return this.state.isLoading?r.a.createElement(p.a,null):null}render(){const{viewer:{partner:e}}=this.props,{failedAccount:t,isLoading:n,showLoginModal:a}=this.state,u=Object(C.e)(),d=this.getBusinessAccounts(),p=Object.keys(u).length,m=u[this.props.viewer.id];delete u[m.id];const _=m.imageLargeUrl&&!m.imageLargeUrl.includes("static/images/user/default");return r.a.createElement(s.c,{flex:"grow"},a&&r.a.createElement(c.a,{container:this.props.container,onClose:this.handleCloseModal,email:t?t.email:""}),t?r.a.createElement(s.c,{paddingX:4,paddingY:4,flex:"grow"},r.a.createElement(s.c,{marginBottom:3},r.a.createElement(s.K,null,h.a._("Oh no! You're no longer logged into","Full sentence: \"Oh no! You're no longer logged into <user's account>\". Text telling user that they are no longer logged into an account after trying to switch to it","Full sentence: \"Oh no! You're no longer logged into <user's account>\". Text telling user that they are no longer logged into an account after trying to switch to it"))),r.a.createElement(i,{viewerId:m.id,account:t}),r.a.createElement(s.c,{marginTop:4},r.a.createElement(s.d,{text:h.a._("Log in again","Text on button allowing user to log into an account after failing to switch to that account","Text on button allowing user to log into an account after failing to switch to that account"),color:"red",onClick:this.handleReauthAccount})),r.a.createElement(s.c,{marginTop:3},r.a.createElement(s.d,{text:h.a._("Remove account","Text on button allowing user to remove an account from their account switcher after failing to switch to it","Text on button allowing user to remove an account from their account switcher after failing to switch to it"),onClick:()=>this.handleRemoveUnauthAccount(t.id)}))):r.a.createElement(s.c,null,n&&this.renderLoadingIndicator(),r.a.createElement(s.c,null,r.a.createElement(s.c,{alignItems:"center",direction:"row",display:"flex",marginTop:1,padding:4,position:"relative",dangerouslySetInlineStyle:{__style:{zIndex:1}}},r.a.createElement(s.c,{marginEnd:4},r.a.createElement(g.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${m.username}/`},r.a.createElement(s.P,{onTouch:()=>this.trackProfileNavigateClick("avatar")},r.a.createElement(o.a,{name:m.fullName||m.username,size:"lg",src:_?m.imageLargeUrl:""})))),r.a.createElement(s.c,{flex:"grow"},r.a.createElement(s.c,{marginBottom:2},r.a.createElement(s.K,{color:"darkGray",truncate:!0,weight:"bold"},m.fullName||m.username),m.email&&r.a.createElement(s.K,{color:"darkGray",truncate:!0},m.email)),e?this.renderBusinessButtons(m.username):this.renderPinnerButtons(m.username))),d?r.a.createElement(l,{accounts:d,onClick:this.handleLinkedAccountSwitch}):null,r.a.createElement(s.j,null),e&&e.is_linked_business?null:r.a.createElement(s.c,null,r.a.createElement("ul",null,this.renderAccounts(u)))),p<C.a&&!(e&&e.is_linked_business)&&r.a.createElement(s.c,{paddingX:4,paddingY:3},r.a.createElement(s.d,{text:h.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account","Short text on the button that allows a user to log in to another Pinterest account"),onClick:()=>this.handleAddAccount()}))))}})},"liz/":function(e,t,n){var a=n("xAAE"),r=n("JW66"),o=n("iFas"),s=n("0G5S");const i=e=>"undefined"!=typeof window?Object(s.a)(e):null,c=(e,t)=>{"undefined"!=typeof window&&Object(s.c)(e,t)},l={getAccounts:()=>i(r.a.MULTIPLE_ACCOUNTS),getAccountsJSON:()=>l.getAccounts()?JSON.parse(l.getAccounts()):{},getGroupId:()=>{const e=i(r.a.MULTIPLE_ACCOUNTS_GROUP);return e?JSON.parse(e):null},setAccounts:e=>c(r.a.MULTIPLE_ACCOUNTS,e),setGroupId:e=>c(r.a.MULTIPLE_ACCOUNTS_GROUP,JSON.stringify(e))};var u=l,d=n("xk4V"),h=n.n(d),p=n("D2p8"),m=n("28DW");n.d(t,"a",(function(){return g})),n.d(t,"e",(function(){return _})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"k",(function(){return S})),n.d(t,"b",(function(){return w})),n.d(t,"j",(function(){return E})),n.d(t,"i",(function(){return x})),n.d(t,"g",(function(){return y})),n.d(t,"f",(function(){return C})),n.d(t,"h",(function(){return O}));const g=4,_=()=>u.getAccountsJSON(),f=()=>Object.keys(_()).length,b=()=>({[r.a.MULTIPLE_ACCOUNTS]:u.getAccountsJSON(),[r.a.MULTIPLE_ACCOUNTS_GROUP]:u.getGroupId()}),S=(e,t,n)=>{let a=u.getGroupId();a||(a=(()=>{const e=h()();return Object(m.f)("web_account_switcher.utils.group_created",{group_id:e,group_count:f()}),e})(),u.setGroupId(a));const r={group_id:a,group_count:f()};let s="";n&&(s=n===o.a.ACCOUNT_SWITCHER_MODAL?"modal.":"flyout."),Object(m.f)(`web_account_switcher.${s}${e}`,Object.assign({},t,r))},w=(e,t,n)=>{const a=u.getAccountsJSON();a[e.id]=(e=>{const t={id:e.id,username:e.username,email:e.email,fullName:e.fullName||e.full_name,imageMediumUrl:e.imageMediumUrl||e.image_medium_url,imageLargeUrl:e.imageLargeUrl||e.image_large_url};return t.fullName&&t.imageMediumUrl&&t.imageLargeUrl||S("utils.incomplete_user_values"),e.partner&&e.partner.is_create?{...t,partner:{is_create:e.partner.is_create}}:t})(e),u.setAccounts(JSON.stringify(a)),t&&n&&S("new_account_add_success",{method:t,user_added:e.id},n)},E=e=>{const t=u.getAccountsJSON();delete t[e],u.setAccounts(JSON.stringify(t))},x=(e,t)=>{if(!(()=>!!u.getAccounts())()||e&&!(e.id in _())){if(e.partner&&e.partner.is_linked_business&&t)return void w({...e,email:t.partner&&t.partner.is_linked_business?t.partner.biz_ownership_email:""});w(e)}},y=(e,t,n)=>{S("switch_account_success",{destination_user_id:t},n),Object(a.a)(e)},C=(e,t)=>{p.c.resume(p.a),S("switch_account_failure",{destination_user_id:e},t)},O=e=>{p.c.resume(p.b),Object(m.a)(`web.dismiss_account_switcher.${e}`)}},ozRy:function(e,t,n){var a=n("q1tI"),r=n.n(a),o=n("kw3W"),s=n("0Bqi"),i=n("iFas"),c=n("Ye/N"),l=n("TiQD"),u=n("joD6"),d=n("n6mq"),h=n("fArA"),p=n("liz/"),m=n("zLLH");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(h.compose)(u.a,Object(m.c)({name:"UserResource",key:"businessUser",options:({viewer:e})=>({username:e.username,field_set_key:"linked_partner"})}))(class extends a.Component{constructor(e){super(e),g(this,"componentDidMount",()=>{Object(p.i)(this.props.viewer,this.props.businessUser.data)}),g(this,"showLogin",()=>this.setState({showLoginModal:!0})),g(this,"hideLogin",()=>this.setState({showLoginModal:!1}));const{showAddAccount:t}=this.props;this.state={showLoginModal:!!t}}render(){const{customTaglineText:e,hideAccountSwitchValueProp:t,onDismiss:n,showAddAccount:a,viewer:u}=this.props;return this.state.showLoginModal?r.a.createElement(s.a,{container:i.a.ACCOUNT_SWITCHER_MODAL,onClose:a?n:this.hideLogin,customTaglineText:e,hideAccountSwitchValueProp:t}):r.a.createElement(d.c,{position:"relative"},r.a.createElement(l.b,{accessibilityModalLabel:c.a._("View, add, and switch logged in users","modal which allows user to add and switch multiple accounts","modal which allows user to add and switch multiple accounts"),size:"sm",heading:c.a._("Switch accounts","Short title on modal that allows a user to switch between different Pinterest accounts","Short title on modal that allows a user to switch between different Pinterest accounts"),onDismiss:n},r.a.createElement(o.a,{container:i.a.ACCOUNT_SWITCHER_MODAL,onNavigateButtonClick:()=>n(),showLogin:this.showLogin,viewer:u})))}})},q23S:function(e,t,n){n.d(t,"a",(function(){return l}));var a=n("q1tI"),r=n.n(a),o=n("Ye/N"),s=n("MKeS"),i=n("n6mq");const c=Object(s.a)({chunkName:()=>"FullPageSignup",isReady(e){return!!n.m[this.resolve(e)]},requireAsync:()=>Promise.all([n.e(4),n.e(7),n.e(8),n.e("FullPageSignup")]).then(n.bind(null,"pXxl")),requireSync(e){const t=this.resolve(e);return n(t)},resolve(){return"pXxl"}});function l(e){return r.a.createElement(c,Object.assign({},e,{fallback:r.a.createElement(i.c,{display:"flex",justifyContent:"center",alignItems:"center"},r.a.createElement(i.G,{accessibilityLabel:o.a._("Loading signup form"),show:!0}))}))}},"x/Ro":function(e,t,n){var a=n("dg5e"),r=n("+NLT"),o=n("eOdZ"),s=n("QLqj"),i=n("kmwA"),c=n("JW66"),l=n("28DW");const u=new Map([[1,"INVALID_PARAMETERS"],[100,"INVALID_NETWORK_ACCESS_TOKEN"],[105,"FACEBOOK_ACCOUNT_NOT_LINKED"],[12,"API_SERVER_ERROR"],[1202,"LOGIN_MFA_TOKEN_INVALID"],[1203,"MFA_CONNECTION_ERROR"],[13,"API_DOWN"],[181,"GPLUS_CONNECTION_ERROR"],[14,"API_SERVER_SPAM_CONTENT"],[16,"API_REQUEST_TIMEOUT"],[50,"API_ERROR_PIN_NOT_FOUND"],[77,"INVALID_PASSWORD_FB_USER"],[78,"INVALID_PASSWORD_ERROR_CODE"],[79,"INVALID_EMAIL_ERROR_CODE"],[80,"INVALID_EMAIL_OR_PASSWORD"],[82,"LOGIN_DEACTIVATED_USER"],[83,"LOGIN_POLICY_VIOLATION_USER"],[85,"AUTO_PASSWORD_RESET_ERROR_CODE"],[86,"LOGIN_PANICKED_USER"],[87,"LOGIN_SOFT_BANNED_USER"],[93,"API_ERROR_UNDERAGE_REGISTER_ATTEMPT"],[99,"LOGIN_PASSWORD_NOT_CREATED"],[8,"API_LIMIT_EXCEEDED_ERROR"],[9,"API_EVENT_BLOCKED_ERROR"],[19,"USER_IN_SAFE_MODE"],[84,"LOGIN_VOLUNTARILY_DEACTIVATED_USER"],[85,"LOGIN_BAD_PASSWORD_ASK_RESET"],[1201,"LOGIN_MFA_REQUIRED"],[30,"LOGIN_USER_NOT_FOUND"],[88,"LOGIN_HARD_BANNED_USER"],[429,"RESPONSE_CODE_TOO_MANY_REQUESTS"]]);function d(e,t,n="unknown_source",a=!1){if(e){const r=e.http_status===c.a.RESPONSE_CODE_TOO_MANY_REQUESTS?c.a.RESPONSE_CODE_TOO_MANY_REQUESTS:e.api_error_code;let o=r;u.has(r)&&(o=u.get(r));const{container:s}=t;a?Object(l.a)(`unauth_web_client_cctld_login_api_error.${String(o)}.${s||"unknow_container"}.${n}`):Object(l.a)(`unauth_web_client_login_api_error.${String(o)}.${s||"unknow_container"}.${n}`)}}var h=n("UPfj"),p=n("VL22"),m=n("53sj");const g=function(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":e.facebook_id?p.a.FACEBOOK:e.google_open_id_token?p.a.GOOGLE_ONE_TAP:e.gplus_id_token?p.a.GOOGLE:e.phone_number?"phone_number":e.username_or_email?p.a.EMAIL:p.a.OTHER},_=function(e,t,n=!1){let a="referrer_unknown";try{const e=document.referrer;a=e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(u){}const r=g(e),o=t===Object(t)?t.hybridTier:"tier_unknown",s=t===Object(t)?t.container:"container_unknown";Object(l.a)("login.referrer."+a+"."+r),Object(l.a)("login.container."+s+"."+r),Object(l.a)("login.type."+r);const i=g(e)||"method_unknown",c=t.page||"page_unknown";e.gplus_autologin?n?(Object(l.a)("mweb_autologin.google_success"),Object(l.g)("new_mweb_autologin_google",{page:c,referrer:a,container:s,hybridTier:o})):(Object(l.a)("web_autologin_google"),Object(l.g)("new_web_autologin_google",{page:c,referrer:a,container:s,hybridTier:o})):e.facebook_autologin?(Object(l.a)("web_autologin_facebook"),Object(l.g)("new_web_autologin_facebook",{page:c,referrer:a,container:s,hybridTier:o})):(Object(l.a)(`web_login.${i}.success.${c}.${s}.${a}.${o}`),Object(l.g)(`new_web_login.${i}.success`,{page:c,referrer:a,container:s,hybridTier:o}))},f=(e,t)=>{Object(l.a)(`web_cross_domain_login.${e}.${g(t)}`)};t.a=function(e,t={},n=null,c=!1,l,u,p=!1){if(function(e){return!e.mfa_resend&&!!e.username_or_email}(e)){if(-1!==i.a.settings.CORS_HANDSHAKE_DOMAINS.indexOf(r.a.instance.origin))return function(e,t,n){return f("attempt",e),a.default.loginUser(e,t).then(t=>{if(t&&t.data){f("success_with_token",e);const r=t.data;return a.default.exchangeTokenAndSetSession(r).then(t=>(f("success_token_exchanged",e),_(e,n),Promise.resolve()),t=>{throw f("success_token_not_exchanged",e),t})}throw f("success_without_token",e),new Error},t=>{throw f("failure",e),d(t,n,g(e),!0),t})}(e,u,t)}e.switch_account&&(e.get_user=!!c||e.get_user);const b=c?null:s.b.localStorage.getItem("visitedPagesBeforeLogin"),S={...e,app_type_from_client:7===r.a.instance.app_type?7:5,visited_pages_before_login:b?JSON.stringify(b):null,recaptchaV2Token:l,recaptchaV3Token:u};return o.a.create("UserSessionResource",S).callCreate({showError:!1,async:!0}).then(n=>(_(e,t,p),Object(h.e)(!1),Object(m.a)("login").then(()=>n)),n=>(d(n,t,g(e)),Promise.reject(n)))}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/pjs-17-c883d3d1fd866af13a73.mjs.map
